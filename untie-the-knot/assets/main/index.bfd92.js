window.__require=function e(t,o,n){function a(r,c){if(!o[r]){if(!t[r]){var s=r.split("/");if(s=s[s.length-1],!t[s]){var l="function"==typeof __require&&__require;if(!c&&l)return l(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+r+"'")}r=s}var u=o[r]={exports:{}};t[r][0].call(u.exports,function(e){return a(t[r][1][e]||e)},u,u.exports,e,t,o,n)}return o[r].exports}for(var i="function"==typeof __require&&__require,r=0;r<n.length;r++)a(n[r]);return a}({ActionTools:[function(e,t,o){"use strict";cc._RF.push(t,"b2c25CPD7ZMCZD/CIj7ZzqP","ActionTools"),Object.defineProperty(o,"__esModule",{value:!0}),o.ActionTools=void 0;var n=function(){function e(){}return Object.defineProperty(e,"_ins",{get:function(){return this._instance},enumerable:!1,configurable:!0}),e.prototype.doLabStrAni=function(e,t,o){e.node.stopAllActions(),e.string="";var n=t.split(""),a=0,i=o/n.length;e.node.runAction(cc.sequence(cc.callFunc(function(){e.string=e.string+n[a],a++}),cc.delayTime(i)).repeat(n.length))},e.prototype.openUIAni=function(e,t,o,n){void 0===o&&(o=.3),void 0===n&&(n=function(){}),e.opacity=0,t.scale=0,e.runAction(cc.fadeTo(o,100)),t.runAction(cc.sequence(cc.scaleTo(o,1).easing(cc.easeBackOut()),cc.callFunc(n)))},e.prototype.closeUIAni=function(e,t,o,n){void 0===o&&(o=.2),void 0===n&&(n=function(){}),e.runAction(cc.fadeOut(o)),t.runAction(cc.sequence(cc.scaleTo(o,0).easing(cc.easeBackIn()),cc.callFunc(n),cc.removeSelf(!0)))},e.prototype.sortFadeToArr=function(e,t,o,n){void 0===t&&(t=.3),void 0===o&&(o=.02),void 0===n&&(n=!1);for(var a=n?0:255,i=0;i<e.length;i++){var r=e[i];r.opacity=0,r.runAction(cc.sequence(cc.delayTime(o*i),cc.fadeTo(t,a)))}},e.prototype.jumpByDegressAni=function(e,t,o,n,a,i){void 0===o&&(o=0),void 0===i&&(i=0);var r=cc.misc.degreesToRadians(t),c=cc.v2(Math.cos(r)*n,Math.sin(r)*n),s=n/a;e.runAction(cc.sequence(cc.delayTime(i),cc.jumpBy(s,cc.v2(1.5*c.x,o),n,1),cc.removeSelf(!0)))},e.prototype.moveDegressAni=function(e,t,o,n,a,i){void 0===o&&(o=200),void 0===a&&(a=!1),void 0===i&&(i=!1),t=t||this.returnRanNum(-180,180);var r=cc.misc.degreesToRadians(t),c=cc.v2(Math.cos(r)*o,Math.sin(r)*o),s=o/n,l=a?0:e.scale,u=i?0:e.opacity;e.runAction(cc.sequence(cc.spawn(cc.scaleTo(s+.1,l),cc.moveBy(s,c).easing(cc.easeQuadraticActionOut()),cc.fadeTo(s+.1,u)),cc.fadeOut(.1),cc.removeSelf(!0)))},e.prototype.moveByOutInit=function(e,t,o,n){void 0===t&&(t=.5),void 0===o&&(o=0),void 0===n&&(n=0),e.x+=o,e.y+=n,e.runAction(cc.moveBy(t,cc.v2(-o,-n)).easing(cc.easeBackOut()))},e.prototype.sprRedAni=function(e,t,o,n){var a=0;e.runAction(cc.sequence(cc.delayTime(t),cc.callFunc(function(e){e.color=cc.Color.RED}),cc.delayTime(t),cc.callFunc(function(e){e.color=cc.Color.WHITE,++a>=o&&null!=n&&n()})).repeat(o))},e.prototype.shakeAni=function(e,t,o,n,a){void 0===t&&(t=!1),void 0===o&&(o=10),void 0===n&&(n=.1),void 0===a&&(a=2);var i=cc.sequence(cc.rotateBy(n,o),cc.rotateBy(n,-o),cc.rotateBy(n,-o),cc.rotateBy(n,o),cc.rotateBy(n,o),cc.rotateBy(n,-o),cc.delayTime(a));t?e.runAction(i.repeatForever()):e.runAction(i)},e.prototype.returnRanNum=function(e,t){return e+Math.floor(Math.random()*(t-e+1))},e._instance=new e,e}();o.ActionTools=n,cc._RF.pop()},{}],AdManager_H5:[function(e,t,o){"use strict";cc._RF.push(t,"a2d4apyHgxPzpAgAaWifHNK","AdManager_H5"),Object.defineProperty(o,"__esModule",{value:!0}),o.AdManager_H5=void 0;var n=function(){function e(){}return Object.defineProperty(e,"_ins",{get:function(){return this._instance},enumerable:!1,configurable:!0}),e.prototype.showIntersAd=function(){adBreak({type:"next",name:"restart-game"})},e.prototype.showVideoAd=function(e,t){var o=this;this.videoBack=null,this.errorBack=null,e&&(this.videoBack=e),t&&(this.errorBack=t),adBreak({type:"reward",name:"dasdf",beforeReward:function(e){e()},adDismissed:function(){o.errorVideo()},adViewed:function(){o.finishVideo()},adBreakDone:function(){o.finishVideo()}})},e.prototype.finishVideo=function(){this.videoBack&&this.videoBack(),this.videoBack=null,this.errorBack=null},e.prototype.errorVideo=function(){this.errorBack&&this.errorBack(),this.videoBack=null,this.errorBack=null},e._instance=new e,e}();o.AdManager_H5=n,cc._RF.pop()},{}],AdManager_WX:[function(e,t,o){"use strict";cc._RF.push(t,"47cdfp5drpH8r4S/bv1auem","AdManager_WX"),Object.defineProperty(o,"__esModule",{value:!0}),o.AdManager_WX=void 0;var n=e("../manager/PlatformManager"),a=function(){function e(){this.app_id="wx2c68756779fd1535",this.ad_banner_id="adunit-64d55f82495fec1d",this.ad_inter_id="adunit-3e889a9a21c90ec2",this.ad_video_id="adunit-fc615ecff3915673",this.ad_banner=null,this.ad_video=null,this.gameName="\u5927\u6218\u5c0f\u9ed1"}return Object.defineProperty(e,"_ins",{get:function(){return this._instance},enumerable:!1,configurable:!0}),e.prototype.loadAllAd=function(){n.PlatformManager.releaseType==n.releaseType.applet_wechat&&this.addShareMenu()},e.prototype.initVideoAd=function(){var e=this;this.ad_video=wx.createRewardedVideoAd({adUnitId:this.ad_video_id}),this.ad_video.load().then(function(){console.log("\u89c6\u9891\u5e7f\u544a\u52a0\u8f7d\u5b8c\u6210!")}).catch(function(e){console.log("\u89c6\u9891\u52a0\u8f7d\u5931\u8d25:"+e.errMsg)}),this.ad_video.onError(function(t){e.errorVideo(),console.log("\u89c6\u9891\u51fa\u9519:"+t),e.ad_video.load().then(function(){console.log("\u624b\u52a8\u52a0\u8f7d\u6210\u529f"),e.ad_video.show()})}),this.ad_video.onClose(function(t){t&&t.isEnded||void 0===t?(console.log("\u6b63\u5e38\u64ad\u653e\u7ed3\u675f\uff0c\u53ef\u4ee5\u4e0b\u53d1\u6e38\u620f\u5956\u52b1"),e.finishVideo()):(e.errorVideo(!0),console.log("\u64ad\u653e\u4e2d\u9014\u9000\u51fa\uff0c\u4e0d\u4e0b\u53d1\u6e38\u620f\u5956\u52b1"))})},e.prototype.initBanner=function(){var e=wx.createBannerAd({adUnitId:this.ad_banner_id,style:{left:0,top:0,width:720}});e.onResize(function(){var t=wx.getSystemInfoSync(),o=t.screenWidth/2,n=t.screenHeight;e.style.left=o-e.style.realWidth/2+.1,e.style.top=n-e.style.realHeight+.1,e.style.width=.8*t.screenWidth,console.log("bannerAd\u52a0\u8f7d\u6210\u529f")}),e.onError(function(e){console.log(e)}),this.ad_banner=e},e.prototype.showBanner=function(){n.PlatformManager.releaseType==n.releaseType.applet_wechat&&(this.ad_banner||this.initBanner(),this.ad_banner.show())},e.prototype.hideBanner=function(){n.PlatformManager.releaseType==n.releaseType.applet_wechat&&this.ad_banner&&this.ad_banner.hide()},e.prototype.showIntersAd=function(){},e.prototype.showVideoAd=function(){n.PlatformManager.releaseType==n.releaseType.applet_wechat&&wx.showToast({title:"\u6682\u65e0\u89c6\u9891\u5e7f\u544a\uff01",icon:"none",duration:1500})},e.prototype.finishVideo=function(){this.videoBack&&this.videoBack(),this.videoBack=null,this.errorBack=null},e.prototype.errorVideo=function(e){void 0===e&&(e=!1),this.errorBack&&this.errorBack(e),this.videoBack=null,this.errorBack=null},e.prototype.shareFriends=function(e,t){void 0===t&&(t="share"),n.PlatformManager.releaseType==n.releaseType.applet_wechat&&(e=e||"\u5feb\u6765\u5927\u621825\u4e2a\u56de\u5408~~",cc.resources.load(t,cc.Asset,function(t,o){wx.shareAppMessage({title:e,imageUrl:o.url,success:function(e){console.log("\u5206\u4eab\u6210\u529f:",e)},fail:function(){wx.showToast({title:"\u5206\u4eab\u5931\u8d25",icon:"none",duration:1500})}})}))},e.prototype.addShareMenu=function(e,t){var o=this;void 0===t&&(t="share"),n.PlatformManager.releaseType==n.releaseType.applet_wechat&&(e=e||"",cc.resources.load(t,cc.Asset,function(e,t){wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]}),wx.onShareAppMessage(function(){return{title:o.gameName,imageUrl:t.url}})}))},e.prototype.toMoreGame=function(){n.PlatformManager.releaseType==n.releaseType.applet_wechat&&wx.navigateToMiniProgram({appId:"wxda02fde13d108205",path:"page/index/index?id=123",extraData:{foo:"bar"},envVersion:"develop",success:function(){}})},e.prototype.vibrate=function(){n.PlatformManager.releaseType==n.releaseType.applet_wechat&&wx.vibrateShort({type:"medium"})},e.prototype.addTable=function(){},e.prototype.isAddTable=function(){},e._instance=new e,e}();o.AdManager_WX=a,cc._RF.pop()},{"../manager/PlatformManager":"PlatformManager"}],AdManager_ZJ:[function(e,t,o){"use strict";cc._RF.push(t,"124e3pbqNZPxK62SespMIsm","AdManager_ZJ"),Object.defineProperty(o,"__esModule",{value:!0}),o.AdManager_ZJ=void 0;var n=e("../manager/PlatformManager"),a=function(){function e(){this.app_id="tta582d33f3abc001a02",this.ad_inter_id="2mrqugugp7e9f29c36",this.ad_video_id="9e617go08ho2094lcq",this.ad_banner_id="5qmmte1agjm5fjd50r",this.recorder=null,this.videoPath=null,this.videoTimer=null,this.ad_banner=null,this.ad_video=null}return Object.defineProperty(e,"_ins",{get:function(){return this._instance},enumerable:!1,configurable:!0}),e.prototype.loadAllAd=function(){n.PlatformManager.releaseType==n.releaseType.applet_ziJie&&(this.initBanner(),this.initVideoAd())},e.prototype.initVideoAd=function(){this.ad_video=tt.createRewardedVideoAd({adUnitId:this.ad_video_id}),this.ad_video.onLoad(function(){console.log("\u89c6\u9891\u5e7f\u544a\u52a0\u8f7d\u5b8c\u6210!")}),this.ad_video.load()},e.prototype.initBanner=function(){var e=tt.getSystemInfoSync(),t={left:e.screenWidth,top:e.screenHeight,width:e.screenWidth};this.ad_banner=tt.createBannerAd({adUnitId:this.ad_banner_id,adIntervals:20,style:t})},e.prototype.showBanner=function(){var e=this;n.PlatformManager.releaseType==n.releaseType.applet_ziJie&&(this.ad_banner||this.initBanner(),this.ad_banner.show&&this.ad_banner.show(),this.ad_banner.onLoad(function(){e.ad_banner.show().then(function(){console.log("\u5e7f\u544a\u663e\u793a\u6210\u529f")}).catch(function(t){console.log("\u5e7f\u544a\u7ec4\u4ef6\u51fa\u73b0\u95ee\u9898",t),e.ad_banner=null})}))},e.prototype.hideBanner=function(){n.PlatformManager.releaseType==n.releaseType.applet_ziJie&&this.ad_banner&&this.ad_banner.hide()},e.prototype.showIntersAd=function(){if(n.PlatformManager.releaseType==n.releaseType.applet_ziJie){var e=tt.createInterstitialAd({adUnitId:this.ad_inter_id});e.load().then(function(){e.show().then(function(){console.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u6210\u529f")})}).catch(function(e){console.log(e)}),console.log("showIntersAd")}},e.prototype.showVideoAd=function(e,t){var o=this;n.PlatformManager.releaseType==n.releaseType.applet_ziJie&&(this.videoBack=null,this.errorBack=null,e&&(this.videoBack=e),t&&(this.errorBack=t),this.ad_video||this.initVideoAd(),this.ad_video.show().then(function(){console.log("\u5e7f\u544a\u663e\u793a\u6210\u529f")}).catch(function(e){o.errorVideo(),console.log("\u5e7f\u544a\u7ec4\u4ef6\u51fa\u73b0\u95ee\u9898",e),o.ad_video.load().then(function(){console.log("\u624b\u52a8\u52a0\u8f7d\u6210\u529f"),o.ad_video.show()})}),this.ad_video.onClose(function(e){e.isEnded?(console.log("\u83b7\u53d6\u5956\u52b1"),o.finishVideo()):(console.log("\u6ca1\u6709\u89c2\u770b\u5b8c\u6bd5--"),o.errorVideo(!0)),e.count}))},e.prototype.finishVideo=function(){this.videoBack&&this.videoBack(),this.videoBack=null,this.errorBack=null},e.prototype.errorVideo=function(e){void 0===e&&(e=!1),this.errorBack&&this.errorBack(e),this.videoBack=null,this.errorBack=null},e.prototype.createVideoScreen=function(){if(n.PlatformManager.releaseType==n.releaseType.applet_ziJie){null!==this.videoTimer&&(clearTimeout(this.videoTimer),this.videoTimer=null);var e=this;this.recorder=tt.getGameRecorderManager(),this.recorder.onStart(function(e){console.log("\u5f00\u59cb\u5f55\u5c4f:",e)}),this.recorder.onError(function(e){console.log("\u5f55\u5c4f\u9519\u8bef:",e)}),this.recorder.start({duration:300}),this.videoTimer=setTimeout(function(){e.stopVideoScreen()},28e4)}},e.prototype.stopVideoScreen=function(){if(n.PlatformManager.releaseType==n.releaseType.applet_ziJie){null!==this.videoTimer&&(clearTimeout(this.videoTimer),this.videoTimer=null);var e=this;console.log(this.recorder),this.recorder&&this.recorder.stop&&(this.recorder.onStop(function(t){e.videoPath=t.videoPath}),this.recorder.stop())}},e.prototype.shareScreenVideo=function(e,t){n.PlatformManager.releaseType==n.releaseType.applet_ziJie&&(e=e||["\u5927\u6218\u5c0f\u9ed1"],t=t||"\u6765\u5927\u621825\u4e2a\u56de\u5408~~",tt.shareAppMessage({channel:"video",title:t,imageUrl:"",query:"",extra:{videoPath:this.videoPath,videoTopics:e},success:function(){console.log("\u5206\u4eab\u89c6\u9891\u6210\u529f")},fail:function(e){console.log("\u5206\u4eab\u89c6\u9891\u5931\u8d25"+e)}}),console.log("shareScreenVideo"))},e.prototype.addMoreGame=function(){n.PlatformManager.releaseType==n.releaseType.applet_ziJie&&setTimeout(function(){var e=tt.getSystemInfoSync();console.log(e),tt.showGridGamePanel({query:{"\u82b1\u82b1\u50f5\u5c38":"ttd12aa7974e142ca002"},type:"one",size:"medium",position:{top:e.screenHeight/2-70,left:e.screenWidth-70},fail:function(e){console.log(e)}})},100)},e.prototype.hideMoreGame=function(){n.PlatformManager.releaseType==n.releaseType.applet_ziJie&&tt.hideGridGamePanel()},e.prototype.addTable=function(){n.PlatformManager.releaseType==n.releaseType.applet_ziJie&&tt.addShortcut({success:function(e){console.log("\u6dfb\u52a0\u684c\u9762\u6210\u529f\uff01"+e)},fail:function(e){console.log("\u6dfb\u52a0\u684c\u9762\u5931\u8d25\uff01"+e)}})},e.prototype.isAddTable=function(){n.PlatformManager.releaseType==n.releaseType.applet_ziJie&&tt.checkShortcut({success:function(e){console.log(e.status),e.status.exist&&console.log("\u5df2\u7ecf\u6dfb\u52a0\u684c\u9762\u4e86")},fail:function(){}})},e._instance=new e,e}();o.AdManager_ZJ=a,cc._RF.pop()},{"../manager/PlatformManager":"PlatformManager"}],AdManager:[function(e,t,o){"use strict";cc._RF.push(t,"2a99aiMR2pMnpcfHJUcJzI4","AdManager"),Object.defineProperty(o,"__esModule",{value:!0}),o.AdManager=void 0;var n=e("../manager/PlatformManager"),a=e("./AdManager_H5"),i=e("./AdManager_WX"),r=e("./AdManager_ZJ"),c=function(){function e(){}return e.initAds=function(){},e.loadAds=function(){this.isLoadAd||(n.PlatformManager.releaseType==n.releaseType.applet_ziJie?r.AdManager_ZJ._ins.loadAllAd():n.PlatformManager.releaseType==n.releaseType.applet_wechat&&i.AdManager_WX._ins.loadAllAd(),this.isLoadAd=!0)},e.showBanner=function(){n.PlatformManager.releaseType==n.releaseType.applet_ziJie?r.AdManager_ZJ._ins.showBanner():n.PlatformManager.releaseType==n.releaseType.applet_wechat&&i.AdManager_WX._ins.showBanner()},e.hideBanner=function(){n.PlatformManager.releaseType==n.releaseType.applet_ziJie?r.AdManager_ZJ._ins.hideBanner():n.PlatformManager.releaseType==n.releaseType.applet_wechat&&i.AdManager_WX._ins.hideBanner()},e.showIntersAd=function(){var e=n.PlatformManager.releaseType;e!=n.releaseType.test_TEST&&(e==n.releaseType.h5_weiSan||e==n.releaseType.h5_common?a.AdManager_H5._ins.showIntersAd():e==n.releaseType.applet_ziJie?r.AdManager_ZJ._ins.showIntersAd():n.PlatformManager.releaseType==n.releaseType.applet_wechat&&i.AdManager_WX._ins.showIntersAd())},e.showVideoAd=function(e,t){var o=n.PlatformManager.releaseType;o!=n.releaseType.test_TEST?o==n.releaseType.h5_weiSan||o==n.releaseType.h5_common?a.AdManager_H5._ins.showVideoAd(e,t):o==n.releaseType.applet_ziJie?r.AdManager_ZJ._ins.showVideoAd(e,t):n.PlatformManager.releaseType==n.releaseType.applet_wechat&&i.AdManager_WX._ins.showVideoAd(e,t):e&&e()},e.isLoadAd=!1,e}();o.AdManager=c,cc._RF.pop()},{"../manager/PlatformManager":"PlatformManager","./AdManager_H5":"AdManager_H5","./AdManager_WX":"AdManager_WX","./AdManager_ZJ":"AdManager_ZJ"}],AudioTools:[function(e,t,o){"use strict";cc._RF.push(t,"bc1bcPG03RIK4fB+zDwX088","AudioTools"),Object.defineProperty(o,"__esModule",{value:!0}),o.AudioTools=void 0;var n=e("./LoadTools"),a=e("./Tools"),i=function(){function e(){this.isPlayAudio=!0,this.isPlayBG=!0}return Object.defineProperty(e,"_ins",{get:function(){return this._instance},enumerable:!1,configurable:!0}),e.prototype.playBG=function(e,t){var o=this;void 0===t&&(t=.5),this.isPlayBG&&(this.stopBG(),null!=a.Tools.AudioClipDic.get(e)?this.bgAudio=cc.audioEngine.play(a.Tools.AudioClipDic.get(e),!0,t):n.LoadTools._ins.loadResAny(cc.url.raw("resources/music/"+e+".mp3"),cc.AudioClip,function(e){o.bgAudio=cc.audioEngine.play(e,!0,t)}))},e.prototype.stopBG=function(){this.stopAudio(this.bgAudio)},e.prototype.playAudio=function(e,t,o){if(void 0===t&&(t=.5),void 0===o&&(o=!1),this.isPlayAudio)return null!=a.Tools.AudioClipDic.get(e)?cc.audioEngine.play(a.Tools.AudioClipDic.get(e),o,t):void n.LoadTools._ins.loadResAny(cc.url.raw("resources/music/"+e+".mp3"),cc.AudioClip,function(e){cc.audioEngine.play(e,!0,t)})},e.prototype.stopAudio=function(e){null!=e&&(cc.audioEngine.stop(e),e=null)},e.prototype.playAudioSource=function(e,t,o){var i=this;if(void 0===t&&(t=.5),void 0===o&&(o=!1),this.isPlayAudio)return null!=a.Tools.AudioClipDic.get(e)?this.newAduioSource(a.Tools.AudioClipDic.get(e),t,o):void n.LoadTools._ins.loadResAny(e,cc.AudioClip,function(e){i.newAduioSource(e,t,o)})},e.prototype.newAduioSource=function(e,t,o){void 0===t&&(t=.5),void 0===o&&(o=!1);var n=new cc.Node,a=n.addComponent(cc.AudioSource);return a.clip=e,a.loop=o,a.volume=t,a.play(),0==o&&cc.tween(n).delay(a.getDuration()+.1).removeSelf().union().start(),a},e._instance=new e,e}();o.AudioTools=i,cc._RF.pop()},{"./LoadTools":"LoadTools","./Tools":"Tools"}],ButtonTs:[function(e,t,o){"use strict";cc._RF.push(t,"45730djaFJBrIToaH3Tk5tT","ButtonTs");var n,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r,c=e("../common/AudioTools"),s=e("../common/Tools"),l=e("../ctrl/GameCtrl"),u=e("../game/MainGame"),p=e("../model/GameModel"),d=e("./GameTs"),h=e("./Util"),f=cc._decorator,g=f.ccclass;f.property,function(e){e[e.null=0]="null",e[e.vertical=1]="vertical",e[e.horizontal=2]="horizontal"}(r||(r={}));var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ShengArr=[],t.BroButton=null,t.BroData=null,t.Data=null,t.ChangeData=null,t.MoveData=null,t.IsMove=!1,t.IsFail=!1,t.TouchButton=!1,t.isEnd=!1,t.IsTouchMove=!1,t.isvertical=!1,t.moveState=r.null,t.IsSleep=!1,t.Ying=null,t.isTween=!1,t.isMove=!1,t}var o;return a(t,e),o=t,t.prototype.onLoad=function(){this.node.zIndex=20,this.addTouchEvents(),this.Ying=this.node.getChildByName("ying"),this.Ying.setParent(this.node.parent),this.Ying.setPosition(this.node.getPosition()),this.Ying.zIndex=this.node.zIndex-1,this.Ying.width=this.node.width,this.Ying.height=this.node.height,this.Ying.scale=this.node.scale,h.default.InitTween(this.Ying)},t.prototype.start=function(){var e=this;this.rigidBody=this.node.getComponent(cc.RigidBody),this.setScale(.5),s.Tools.setSpriteFrame(this.node.getChildByName("Light"),"g"+this.ButtonNum+"_2"),this.node.getChildByName("Light"),this.scheduleOnce(function(){e.Rigsleep(!1)},5)},t.prototype.Rigsleep=function(e){this.rigidBody.awake=e;for(var t=0;t<this.ShengArr.length;t++)this.ShengArr[t].getComponent(cc.RigidBody).awake=e},t.prototype.addTouchEvents=function(){cc.macro.ENABLE_MULTI_TOUCH=!1,this.node.on(cc.Node.EventType.TOUCH_START,this.touchStartBack,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMoveBack,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEndBack,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchEndBack,this)},t.prototype.touchStartBack=function(e){var t=this;if(!p.GameModel._ins.mainGame.isOver&&l.GameCtrl._ins.boolTouch)if(this.isEnd){if(c.AudioTools._ins.playAudioSource("touchStart"),!this.isTween){this.isTween=!0;var o=this.node.scale;cc.tween(this.node).sequence(cc.scaleTo(.05,o+.1),cc.scaleTo(.05,o),cc.callFunc(function(){t.isTween=!1})).start()}}else if(!this.IsTouchMove&&!this.TouchButton){p.GameModel._ins.mainGame.ShouZhi.active&&(p.GameModel._ins.mainGame.ShouZhi.active=!1),c.AudioTools._ins.playAudioSource("touchStart"),p.GameModel._ins.mainGame.IsShow=!1,p.GameModel._ins.mainGame.TouchTime=6,cc.Tween.stopAllByTag(10),this.BroButton.opacity=255;for(var n=0,a=this.ShengArr;n<a.length;n++)a[n].opacity=255;this.GetCanMove(),p.GameModel._ins.GameTs.AllButtonTouch(!0),this.IsTouchMove=!0,this.up_posX=e.getLocationX(),this.up_posY=e.getLocationY(),this.targetX=this.node.x,this.targetY=this.node.y,p.GameModel._ins.GameTs.ButtonFadeOut(this.node,this.BroButton),this.getData(),this.IsSleep=!1,this.SleepTime=2,this.Rigsleep(!0)}},t.prototype.touchMoveBack=function(e){p.GameModel._ins.mainGame.isOver||l.GameCtrl._ins.boolTouch&&(this.isEnd||this.IsTouchMove&&(this.isMove||(this.isMove=!0),p.GameModel._ins.mainGame.TouchTime=6,this.SetShengMove(),this.targetX=this.targetX+(e.getLocationX()-this.up_posX),this.targetY=this.targetY+(e.getLocationY()-this.up_posY),this.up_posX=e.getLocationX(),this.up_posY=e.getLocationY()))},t.prototype.touchEndBack=function(){p.GameModel._ins.mainGame.isOver||l.GameCtrl._ins.boolTouch&&(this.isEnd||this.IsTouchMove&&(c.AudioTools._ins.playAudioSource("touchOver"),p.GameModel._ins.mainGame.TouchTime=6,this.IsTouchMove=!1,this.isMove=!1,this.moveState=r.null,this.rigidBody.linearVelocity=cc.v2(0,0),cc.Tween.stopAllByTag(10),p.GameModel._ins.GameTs.ButtonFadeIn(this.node,this.BroButton),this.node.opacity=255,p.GameModel._ins.GameTs.Sp.active&&(this.IsMove=!0,this.MovePos=p.GameModel._ins.GameTs.Sp.getPosition()),this.IsSleep=!0))},t.prototype.update=function(e){this.Ying.setPosition(cc.v2(this.node.x,this.node.y-5)),this.IsSleep&&(this.SleepTime-=e,this.SleepTime<=0&&(this.Rigsleep(!1),this.IsSleep=!1,this.SleepTime=2)),this.TouchMove(),this.IsMove&&this.lVMove(e,200)},t.prototype.TouchMove=function(){if(this.IsTouchMove){this.MoveData=p.GameModel._ins.GameTs.GetMapData(this.Data,this.DataArr),this.ChangeData=p.GameModel._ins.GameTs.ChangeData;var e=cc.v2(15*(this.targetX-this.node.x),15*(this.targetY-this.node.y));if(s.Tools.getDistance(cc.v2(this.targetX,this.targetY),cc.v2(this.node.position))<=10)this.rigidBody.linearVelocity=cc.v2(0,0);else{var t=e.normalize(),o=Math.abs(t.x),n=Math.abs(t.y);if(this.moveState=o>n?r.horizontal:r.vertical,this.moveState==r.horizontal){if(this.node.x<p.GameModel._ins.GameTs.DataMap[0][0].Frame.x-10&&t.x<0||this.node.x>p.GameModel._ins.GameTs.DataMap[0][p.GameModel._ins.GameTs.DataMap[0].length-1].Frame.x+10&&t.x>0)return void(this.rigidBody.linearVelocity=cc.v2(0,0));if(t.x>0&&this.node.x>this.BroButton.x&&!this.BroButtonDis())return void(this.rigidBody.linearVelocity=cc.v2(0,0));if(t.x<0&&this.node.x<this.BroButton.x&&!this.BroButtonDis())return void(this.rigidBody.linearVelocity=cc.v2(0,0));if(this.MoveData&&!this.MoveData.CanMove){if(t.x>0&&this.node.x<this.MoveData.Frame.x&&!this.ChangeDataDis())return void(this.rigidBody.linearVelocity=cc.v2(0,0));if(t.x<0&&this.node.x>this.MoveData.Frame.x&&!this.ChangeDataDis())return void(this.rigidBody.linearVelocity=cc.v2(0,0))}this.rigidBody.linearVelocity=cc.v2(e.x,0)}else if(this.moveState==r.vertical){if(this.node.y<p.GameModel._ins.GameTs.DataMap[0][0].Frame.y-10&&t.y<0||this.node.y>p.GameModel._ins.GameTs.DataMap[p.GameModel._ins.GameTs.DataMap.length-1][p.GameModel._ins.GameTs.DataMap[0].length-1].Frame.y+10&&t.y>0)return void(this.rigidBody.linearVelocity=cc.v2(0,0));if(t.y>0&&this.node.y>this.BroButton.y&&!this.BroButtonDis())return void(this.rigidBody.linearVelocity=cc.v2(0,0));if(t.y<0&&this.node.y<this.BroButton.y&&!this.BroButtonDis())return void(this.rigidBody.linearVelocity=cc.v2(0,0));if(this.MoveData&&!this.MoveData.CanMove){if(t.y>0&&this.node.y<this.MoveData.Frame.y&&!this.ChangeDataDis())return void(this.rigidBody.linearVelocity=cc.v2(0,0));if(t.y<0&&this.node.y>this.MoveData.Frame.y&&!this.ChangeDataDis())return void(this.rigidBody.linearVelocity=cc.v2(0,0))}this.rigidBody.linearVelocity=cc.v2(0,e.y)}}}},t.prototype.lVMove=function(e,t){this.MovePos=cc.v2(p.GameModel._ins.GameTs.Sp.x,p.GameModel._ins.GameTs.Sp.y);var n=h.default.getNormalizeVectorPos(this.node.getPosition(),this.MovePos);if(s.Tools.getDistance(this.node.getPosition(),this.MovePos)<5)return this.node.getComponent(cc.RigidBody).linearVelocity=cc.v2(0,0),this.node.setPosition(this.MovePos),this.IsMove=!1,p.GameModel._ins.GameTs.AllButtonTouch(!1),p.GameModel._ins.GameTs.Sp.active=!1,this.ChangeData==this.Data?void this.SetSheng():(this.ChangeData.Button=this.node,this.ChangeData.CanMove=!1,this.Data.Button=null,this.Data.IsSheng?this.Data.CanMove=!1:this.Data.CanMove=!0,this.Data=this.ChangeData,this.BroButton.getComponent(o).BroData=this.ChangeData,this.SetSheng(),void p.GameModel._ins.GameTs.checkOver1());this.node.getComponent(cc.RigidBody).linearVelocity=cc.v2(n.x*t,n.y*t)},t.prototype.TouchButtonMove=function(){null!=this.MoveData&&this.MoveData.Button},t.prototype.setScale=function(e){this.node.scale=e*p.GameModel._ins.Scale},t.prototype.getScale=function(){return this.node.scale},t.prototype.GetSize=function(){return this.node.scale*this.node.height},t.prototype.SetDigDis=function(){this.node.getComponent(cc.RopeJoint).apply()},t.prototype.SetDigRig=function(e){this.node.getComponent(cc.RopeJoint).connectedBody=e.getComponent(cc.RigidBody),this.node.getComponent(cc.RopeJoint).apply()},t.prototype.SetShengStop=function(){this.isEnd=!0,this.BroButton.getComponent(o).isEnd=!0,p.GameModel._ins.GameTs.InitStar(10,this.ButtonNum,this.node,250,1),c.AudioTools._ins.playAudioSource("touch1"),this.buttonShow(this.BroButton,!0),this.buttonShow(this.node,!0),h.default.InitTween(this.node.getChildByName("Light")),h.default.InitTween(this.BroButton.getChildByName("Light"));var e=!1;this.node.getComponent(cc.RopeJoint).connectedBody.node==this.ShengArr[0]&&(e=!0);var t=[],n=h.default.getNormalizeVectorPos(this.node.getPosition(),this.BroButton.getPosition()),a=h.default.vectorToAngle(n);if(e)for(var i=0;i<this.ShengArr.length;i++){var r=s.Tools.getPosForAngleLen(a,5*i,this.node.getPosition());t.push(r)}else for(i=this.ShengArr.length-1;i>=0;i--)r=s.Tools.getPosForAngleLen(a,5*i,this.node.getPosition()),t.push(r);for(i=0;i<t.length;i++)this.ShengArr[i].getComponent(cc.RigidBody).type=cc.RigidBodyType.Static,cc.tween(this.ShengArr[i]).then(cc.moveTo(.25,t[i])).start(),cc.tween(this.ShengArr[i].children[0]).delay(.25).sequence(cc.fadeIn(.25),cc.fadeOut(.25)).start();var l=this.BroData.X-this.Data.X,u=this.BroData.Y-this.Data.Y;if(l<0&&0==u)for(i=0;i>-this.ButtonNum;--i){var d=this.Data.X+i;p.GameModel._ins.GameTs.DataMap[this.Data.Y][d].CanMove=!1,p.GameModel._ins.GameTs.DataMap[this.Data.Y][d].IsSheng=!0}else if(l>0&&0==u)for(i=0;i<this.ButtonNum;++i)d=this.Data.X+i,p.GameModel._ins.GameTs.DataMap[this.Data.Y][d].CanMove=!1,p.GameModel._ins.GameTs.DataMap[this.Data.Y][d].IsSheng=!0;else if(0==l&&u>0)for(i=0;i<this.ButtonNum;++i){var f=this.Data.Y+i;p.GameModel._ins.GameTs.DataMap[f][this.Data.X].CanMove=!1,p.GameModel._ins.GameTs.DataMap[f][this.Data.X].IsSheng=!0}else if(0==l&&u<0)for(i=0;i>-this.ButtonNum;--i)f=this.Data.Y+i,p.GameModel._ins.GameTs.DataMap[f][this.Data.X].CanMove=!1,p.GameModel._ins.GameTs.DataMap[f][this.Data.X].IsSheng=!0;p.GameModel._ins.GameTs.Win()},t.prototype.SetShengMove=function(){for(var e=0;e<this.ShengArr.length;e++)this.ShengArr[e].getComponent(cc.RigidBody).type=cc.RigidBodyType.Dynamic},t.prototype.buttonShow=function(e,t){void 0===t&&(t=!1);var o=0;t&&(o=150),cc.tween(e.children[0]).delay(.25).sequence(cc.fadeIn(.25),cc.fadeTo(.25,o)).start()},t.prototype.GetNextData=function(){var e=this.Data.Y,t=this.Data.X;switch(this.Type){case u.DirState.UP:if(e+1>p.GameModel._ins.GameTs.DataMap.length-1)return;var o=[1,0];break;case u.DirState.DOWN:if(e-1<0)return;o=[-1,0];break;case u.DirState.LEFT:if(t-1<0)return;o=[0,-1];break;case u.DirState.RIGHT:if(t+1>p.GameModel._ins.GameTs.DataMap[0].length-1)return;o=[0,1]}var n=e+o[0],a=t+o[1];return p.GameModel._ins.GameTs.DataMap[n][a]},t.prototype.SetSheng=function(){for(var e=[this.ButtonNum,-this.ButtonNum,0,0],t=[0,0,this.ButtonNum,-this.ButtonNum],o=0;o<e.length;o++){var n=this.Data.Y+e[o],a=this.Data.X+t[o];if(!(n<0||n>=p.GameModel._ins.GameTs.DataMap.length||a<0||a>=p.GameModel._ins.GameTs.DataMap[0].length)&&p.GameModel._ins.GameTs.DataMap[n][a]==this.BroData)return void this.SetShengStop()}this.SetShengMove()},t.prototype.BroButtonDis=function(){return!(s.Tools.getDistance(this.node.getPosition(),this.BroButton.getPosition())>this.Data.Frame.width*this.ButtonNum)},t.prototype.ChangeDataDis=function(){return!!this.MoveData.CanMove||s.Tools.getDistance(this.node.getPosition(),this.MoveData.Frame.getPosition())>this.GetSize()},t.prototype.getData=function(){this.DataArr=[];var e=new d.Point;if(e.X=this.BroData.X,e.Y=this.BroData.Y,e.Type=this.ButtonNum-1,p.GameModel._ins.GameTs.DataMap[e.Y][e.X].Button==this.BroData.Button){var t=new Set;this.Find(e,e.Y,e.X,t),this.DataArr=Array.from(t)}},t.prototype.Find=function(e,t,o,n){if(!(t<0||o<0||t>p.GameModel._ins.GameTs.Rows-1||o>p.GameModel._ins.GameTs.Cols-1))for(var a=[1,-1,0,0],i=[0,0,-1,1],r=0;r<a.length;++r){var c=t+a[r],s=o+i[r];c<0||s<0||c>p.GameModel._ins.GameTs.Rows-1||s>p.GameModel._ins.GameTs.Cols-1||3==e.Type&&(c==e.Y+3&&s==e.X+3||c==e.Y+3&&s==e.X-3||c==e.Y-3&&s==e.X+3||c==e.Y-3&&s==e.X-3)||((c==e.Y&&s==e.X+e.Type+1||s==e.X&&c==e.Y+e.Type+1||c==e.Y&&s==e.X-e.Type-1||s==e.X&&c==e.Y-e.Type-1)&&(n.has(p.GameModel._ins.GameTs.DataMap[c][s])||(n.add(p.GameModel._ins.GameTs.DataMap[c][s]),this.Find(e,c,s,n))),c>e.Y+e.Type||s>e.X+e.Type||c<e.Y-e.Type||s<e.X-e.Type||n.has(p.GameModel._ins.GameTs.DataMap[c][s])||(n.add(p.GameModel._ins.GameTs.DataMap[c][s]),this.Find(e,c,s,n)))}},t.prototype.OverFind=function(e,t,n,a){if(!(t<0||n<0||t>p.GameModel._ins.GameTs.Rows-1||n>p.GameModel._ins.GameTs.Cols-1))for(var i=[1,-1,0,0],r=[0,0,-1,1],c=0;c<i.length;++c){var s=t+i[c],l=n+r[c];if(!(s<0||l<0||s>p.GameModel._ins.GameTs.Rows-1||l>p.GameModel._ins.GameTs.Cols-1)){var u=p.GameModel._ins.GameTs.DataMap[s][l];!u.CanMove&&(u.IsSheng||null!=u.Button&&u.Button.getComponent(o).isEnd)||a.has(p.GameModel._ins.GameTs.DataMap[s][l])||(a.add(p.GameModel._ins.GameTs.DataMap[s][l]),this.OverFind(e,s,l,a))}}},t.prototype.GetCanMove=function(){var e=new d.Point;e.X=this.Data.X,e.Y=this.Data.Y;for(var t=[1,-1,0,0],n=[0,0,-1,1],a=[],i=0;i<t.length;++i){var r=e.Y+t[i],c=e.X+n[i];if(!(r<0||c<0||r>p.GameModel._ins.GameTs.Rows-1||c>p.GameModel._ins.GameTs.Cols-1)){var l=p.GameModel._ins.GameTs.DataMap[r][c];s.Tools.getDistance(l.Frame.getPosition(),this.BroButton.getPosition())>this.Data.Frame.width*this.ButtonNum||!l.CanMove&&(l.IsSheng||null!=l.Button&&l.Button.getComponent(o).isEnd)||a.push(l)}}return 0==a.length},t.prototype.GameOver=function(){this.DataArr=[];var e=new d.Point;e.X=this.Data.X,e.Y=this.Data.Y,e.Type=1;var t=new Set;return t.add(p.GameModel._ins.GameTs.DataMap[e.Y][e.X]),this.OverFind(e,e.Y,e.X,t),t},o=i([g],t)}(cc.Component);o.default=m,cc._RF.pop()},{"../common/AudioTools":"AudioTools","../common/Tools":"Tools","../ctrl/GameCtrl":"GameCtrl","../game/MainGame":"MainGame","../model/GameModel":"GameModel","./GameTs":"GameTs","./Util":"Util"}],ChickTs:[function(e,t,o){"use strict";cc._RF.push(t,"986d4Dn70BAUJy/kxlJOSkY","ChickTs");var n,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../common/Tools"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.PointArr=[],t.Polygon=[],t}return a(t,e),t.prototype.start=function(){cc.Intersection.polygonPolygon(this.Polygon,[])?cc.log("\u76f8\u4ea4"):cc.log("\u4e0d\u76f8\u4ea4")},t.prototype.GetPointPos=function(){var e=this;this.PointArr.forEach(function(t){e.Polygon.push(cc.v2(r.Tools.getToWorldPosAR(t)))})},i([l(cc.Node)],t.prototype,"PointArr",void 0),i([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../common/Tools":"Tools"}],ColorTs:[function(e,t,o){"use strict";cc._RF.push(t,"ae1ae95r9tCFb63FJCVFHGH","ColorTs");var n,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,s=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.text="hello",t}return a(t,e),t.prototype.start=function(){this.ColorMove()},t.prototype.ColorMove=function(){for(var e=this.node.children.map(function(e){return e.getPosition()}),t=0;t<this.node.children.length;t++)this.colorMoveTween(t+1,e,this.node.children[t])},t.prototype.colorMoveTween=function(e,t,o){var n=this;void 0===t&&(t=[]),e==t.length&&(e=0,o.setPosition(t[0]));var a=t[e];cc.tween(o).sequence(cc.moveTo(.15,a),cc.callFunc(function(){n.colorMoveTween(e+1,t,o)})).start()},i([s(cc.Label)],t.prototype,"label",void 0),i([s],t.prototype,"text",void 0),i([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],EventManager:[function(e,t,o){"use strict";cc._RF.push(t,"133eazTY8lPDrziDak8SK9u","EventManager"),Object.defineProperty(o,"__esModule",{value:!0}),o.EventData=o.EventManager=void 0;var n=function(){function e(){}return e.addListener=function(e,t,o){cc.director.on(e,t,o)},e.removeListener=function(e,t,o){cc.director.off(e,t,o)},e.dispachEvent=function(e,t,o,n,a,i){cc.director.emit(e,t,o,n,a,i)},e.removeListenerForTarget=function(e){cc.director.targetOff(e)},e}();o.EventManager=n,function(e){e.START_GAME="START_GAME",e.SHOW_GLOD="SHOW_GLOD",e.REIVE_GAME="REIVE_GAME"}(o.EventData||(o.EventData={})),cc._RF.pop()},{}],FrameTs:[function(e,t,o){"use strict";cc._RF.push(t,"e26dbn1C+lF4p8Zp/zBPU/Z","FrameTs");var n,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,s=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.onLoad=function(){},t.prototype.GetSize=function(){return this.node.width*this.node.scale},i([c],t)}(cc.Component));o.default=s,cc._RF.pop()},{}],GameCtrl:[function(e,t,o){"use strict";cc._RF.push(t,"a1d7eXYRpRDM7lzYxYf5Tki","GameCtrl"),Object.defineProperty(o,"__esModule",{value:!0}),o.GameState=o.GameCtrl=void 0;var n,a=e("../manager/PoolManager"),i=e("../model/GameModel"),r=function(){function e(){this.boolTouch=!1}return Object.defineProperty(e,"_ins",{get:function(){return this._instance},enumerable:!1,configurable:!0}),e.prototype.initGame=function(){this.gameState=n.Defualt,i.GameModel._ins.gameScore=0,this.boolTouch=!1},e.prototype.overGame=function(){this.gameState=n.Over,this.boolTouch=!1,a.PoolManager.clearAllPool()},e._instance=new e,e}();o.GameCtrl=r,function(e){e[e.Defualt=0]="Defualt",e[e.Start=1]="Start",e[e.Pause=2]="Pause",e[e.Over=3]="Over"}(n=o.GameState||(o.GameState={})),cc._RF.pop()},{"../manager/PoolManager":"PoolManager","../model/GameModel":"GameModel"}],GameModel:[function(e,t,o){"use strict";cc._RF.push(t,"a8f362i/MJKRKQHQCpCjKll","GameModel"),Object.defineProperty(o,"__esModule",{value:!0}),o.GameModel=void 0;var n=function(){function e(){this.mianScene="MainGame",this.mainGame=null,this.GameTs=null,this.FristTouch=!0,this.changeData=null,this.CanTouchData=[],this.gameScore=1,this.standScore=80,this.gameMaxScore=200}return Object.defineProperty(e,"_ins",{get:function(){return this._instance},enumerable:!1,configurable:!0}),e._instance=new e,e}();o.GameModel=n,cc._RF.pop()},{}],GameTs:[function(e,t,o){"use strict";cc._RF.push(t,"dc737IXHcdGZpIklrGYpjzl","GameTs");var n,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.Point=o.MapData=void 0;var r,c=e("../common/AudioTools"),s=e("../common/Tools"),l=e("../manager/PlatformManager"),u=e("../model/GameModel"),p=e("./ButtonTs"),d=e("./FrameTs"),h=e("./ShengTs"),f=e("./Util"),g=e("./caidaiTS"),m=cc._decorator,v=m.ccclass,y=m.property,T=function(){this.X=null,this.Y=null,this.Frame=null,this.Button=null,this.CanMove=!0,this.IsSheng=!1};o.MapData=T,function(e){e[e.Red=2]="Red",e[e.Yellow=3]="Yellow",e[e.Green=4]="Green"}(r||(r={}));var _=function(){this.Y=null,this.X=null,this.Type=null};o.Point=_;var M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.AllButton=[],t.BroButtonArr=[],t.Score=null,t.Cols=7,t.Rows=10,t.Scale=1,t.FrameNum=0,t.InitTime=.2,t.InitNum=10,t.DataMap=[],t.ChangeData=null,t}return a(t,e),t.prototype.onLoad=function(){u.GameModel._ins.GameTs=this,this.GameLocalData(!1)},t.prototype.start=function(){var e=this;this.GameLevel(),this.InitMap(),this.InitFrame(),this.scheduleOnce(function(){if(1!=e.localData.level&&3!=e.localData.level&&5!=e.localData.level){if(e.localData.CanShuaXin)for(e.localData.TypeArr=[];e.InitNum>0&&(e.getData(),!(e.FrameNum<=8)););else e.FailInit();e.localData.CanShuaXin=!0,e.GameLocalData(!0)}},this.InitTime)},t.prototype.InitLevel=function(){u.GameModel._ins.gameScore=this.localData.level,u.GameModel._ins.mainGame.SetScore()},t.prototype.GameLevel=function(){var e=this;this.InitLevel(),this.InitNum=this.localData.level+3,this.InitNum>25&&(this.InitNum=25),1==this.localData.level?(this.Cols=3,this.Rows=1,this.scheduleOnce(function(){e.initButton(e.DataMap[0][0],e.DataMap[0][1],r.Red),u.GameModel._ins.mainGame.ShouZhiTween(e.DataMap[0][1].Frame.getPosition(),e.DataMap[0][2].Frame.getPosition())},this.InitTime)):2==this.localData.level?(this.Cols=5,this.Rows=3):3==this.localData.level?(this.Cols=5,this.Rows=3,this.scheduleOnce(function(){e.initButton(e.DataMap[0][0],e.DataMap[0][1],r.Yellow),e.initButton(e.DataMap[1][0],e.DataMap[1][1],r.Red)},this.InitTime)):this.localData.level>3&&this.localData.level<5?(this.Cols=5,this.Rows=5):5==this.localData.level?(this.Cols=5,this.Rows=5,this.scheduleOnce(function(){e.initButton(e.DataMap[0][0],e.DataMap[2][3],r.Green),e.initButton(e.DataMap[2][0],e.DataMap[2][2],r.Yellow),e.initButton(e.DataMap[1][0],e.DataMap[1][1],r.Red)},this.InitTime)):this.localData.level>5&&this.localData.level<=10?(this.Cols=7,this.Rows=7):this.localData.level>10&&this.localData.level<=15?(this.Cols=7,this.Rows=9):this.localData.level>15&&this.localData.level<=20?(this.Cols=8,this.Rows=10,this.Scale=.95):this.localData.level>20&&(this.Cols=8,this.Rows=12,this.Scale=.95),this.FrameNum=this.Cols*this.Rows},t.prototype.GameLocalData=function(e){e?l.PlatformManager.setStorage("SbLc1",this.localData,!0):(this.localData=l.PlatformManager.getStorage("SbLc1",!0),null==this.localData&&(this.localData={level:1,TypeArr:[],CanShuaXin:!0},l.PlatformManager.setStorage("SbLc1",this.localData,!0)))},t.prototype.getData=function(){var e=new _;if(e.X=s.Tools.random(0,this.Cols-1),e.Y=s.Tools.random(0,this.Rows-1),e.Type=2==this.localData.level?r.Red-1:this.localData.level>3&&this.localData.level<5?s.Tools.random(r.Red,r.Yellow)-1:s.Tools.random(r.Red,r.Green)-1,!this.DataMap[e.Y][e.X].Button){this.FrameNum-=e.Type+2;var t=new Set;this.Find(e,e.Y,e.X,t),t.forEach(function(e){e.Button&&t.delete(e)}),t.has(this.DataMap[e.Y][e.X])&&t.delete(this.DataMap[e.Y][e.X]);var o=Array.from(t)[s.Tools.random(0,t.size-1)];this.initButton(this.DataMap[e.Y][e.X],o,e.Type+1),this.InitNum--}},t.prototype.Find=function(e,t,o,n){if(!(t<0||o<0||t>this.Rows-1||o>this.Cols-1))for(var a=[1,-1,0,0],i=[0,0,-1,1],c=0;c<a.length;++c){var s=t+a[c],l=o+i[c];s<0||l<0||s>this.Rows-1||l>this.Cols-1||s>e.Y+e.Type||l>e.X+e.Type||s<e.Y-e.Type||l<e.X-e.Type||e.Type==r.Green-1&&(s==e.Y+3&&l==e.X+3||s==e.Y+3&&l==e.X-3||s==e.Y-3&&l==e.X+3||s==e.Y-3&&l==e.X-3)||n.has(this.DataMap[s][l])||(n.add(this.DataMap[s][l]),this.Find(e,s,l,n))}},t.prototype.InitMap=function(){for(var e=0;e<this.Rows;++e){this.DataMap.push([]);for(var t=0;t<this.Cols;++t){var o=new T;o.X=t,o.Y=e,this.DataMap[e][t]=o}}},t.prototype.InitFrame=function(){for(var e=0,t=this.DataMap[0].length/2,o=this.DataMap.length/2,n=0;n<this.DataMap.length;++n){this.Rows%2==0&&(n%2==0?e++:e--);for(var a=0;a<this.DataMap[n].length;++a){var i=s.Tools.newPrefab("frame");i.setParent(this.node);var r=cc.v2(i.width*this.Scale*u.GameModel._ins.Scale*(a-t+.5),i.height*this.Scale*u.GameModel._ins.Scale*(.85*-o+n));i.setPosition(r),i.scale*=this.Scale*u.GameModel._ins.Scale,this.DataMap[n][a].Frame=i,this.SetFrameSp(i,e),i.zIndex=-1*n,i.getComponent(d.default).Data=this.DataMap[n][a];var c=s.Tools.newSprite("y2",this.node);c.setParent(this.node),c.setPosition(cc.v2(i.x,i.y-5)),c.zIndex=i.zIndex-1,c.width=i.width,c.height=i.height,c.scale=i.scale,e++}}},t.prototype.SetFrameSp=function(e,t){t%2==0?s.Tools.setSpriteFrame(e,"z1"):s.Tools.setSpriteFrame(e,"z2")},t.prototype.FailInit=function(){for(var e=0;e<this.localData.TypeArr.length;++e){var t=this.localData.TypeArr[e],o=this.DataMap[t[0].Y][t[0].X],n=this.DataMap[t[1].Y][t[1].X];this.initButton(o,n,t[0].Type)}},t.prototype.initButton=function(e,t,o){if(this.localData.CanShuaXin){var n=[],a=new _;a.X=e.X,a.Y=e.Y,a.Type=o;var i=new _;i.X=t.X,i.Y=t.Y,i.Type=o,n.push(a),n.push(i),this.localData.TypeArr.push(n)}var r=s.Tools.newPrefab("Button");r.setParent(this.node),r.setPosition(cc.v2(e.Frame.x,e.Frame.y+5)),e.Button=r,e.CanMove=!1,r.getComponent(p.default).Data=e;var c=s.Tools.newPrefab("Button");c.setParent(this.node),c.setPosition(cc.v2(t.Frame.x,t.Frame.y+5)),t.Button=c,t.CanMove=!1,c.getComponent(p.default).Data=t,r.getComponent(p.default).BroData=c.getComponent(p.default).Data,c.getComponent(p.default).BroData=r.getComponent(p.default).Data,s.Tools.setSpriteFrame(c,o.toString()),s.Tools.setSpriteFrame(r,o.toString());var l=o,u=s.Tools.getDistance(e.Frame.getPosition(),t.Frame.getPosition()),d=[];d.push(r),d.push(c),this.BroButtonArr.push(d);for(var h=0;h<d.length;h++)d[h].getComponent(cc.RopeJoint).apply(),d[h].getComponent(p.default).ButtonNum=l,d[h].getComponent(p.default).distance=u,d[h].zIndex=20,f.default.InitTween(d[h]),this.AllButton.push(d[h]);this.InitSheng(d,o)},t.prototype.InitSheng=function(e,t){for(var o=Math.floor(e[0].getComponent(p.default).ButtonNum*e[0].getComponent(p.default).Data.Frame.width/(12.5/3)*(5/6)),n=f.default.vectorToAngle(f.default.getNormalizeVector(e[0],e[1])),a=[],i=0;i<o;++i){var r=s.Tools.newPrefab("shengzi",this.node),c=s.Tools.getPosForAngleLen(n,12.5/3*i,e[0].getPosition());r.setPosition(c),r.zIndex=15,r.scale=.25,s.Tools.setSpriteFrame(r.children[0],"G"+t+"_1"),a.length>0&&(a[a.length-1].getComponent(cc.RopeJoint).connectedBody=r.getComponent(cc.RigidBody),r.getComponent(h.default).TagNode=a[a.length-1]),a.push(r),f.default.InitTween(r),s.Tools.setSpriteFrame(r,t+"_1")}for(var l=0;l<e.length;++l)0==l?(e[l].getComponent(cc.RopeJoint).connectedBody=a[0].getComponent(cc.RigidBody),a[0].getComponent(h.default).TagNode=e[l],e[l].getComponent(p.default).BroButton=e[l+1],e[l].getComponent(cc.RigidBody).type=cc.RigidBodyType.Kinematic):(e[l].getComponent(cc.RopeJoint).connectedBody=a[a.length-1].getComponent(cc.RigidBody),e[l].getComponent(p.default).BroButton=e[l-1],e[l].getComponent(cc.RigidBody).gravityScale=0),e[l].getComponent(cc.RigidBody).type=cc.RigidBodyType.Kinematic,e[l].getComponent(p.default).ShengArr=a,s.Tools.setSpriteFrame(e[l].children[0],"h"+t)},t.prototype.ShowFrame=function(){this.DataMap.forEach(function(e){e.forEach(function(e){e.Frame.opacity=255})})},t.prototype.GetMapData=function(e,t){for(var o=0;o<this.DataMap.length;++o)for(var n=0;n<this.DataMap[o].length;++n)for(var a=0;a<t.length;a++)if(this.DataMap[o][n]==t[a]){var i=this.DataMap[o][n].Frame;if(s.Tools.getDistance(i.getPosition(),e.Button.getPosition())<i.getComponent(d.default).GetSize()/3+e.Button.getComponent(p.default).GetSize()/3)return 0==this.DataMap[o][n].CanMove&&this.DataMap[o][n]!=e?this.DataMap[o][n]:(this.ChangeData=this.DataMap[o][n],this.SetSp(e.Button,i),null)}},t.prototype.SetSp=function(e,t){null==this.Sp&&(this.Sp=new cc.Node,this.Sp.addComponent(cc.Sprite)),this.Sp.getComponent(cc.Sprite).spriteFrame=e.getComponent(cc.Sprite).spriteFrame,this.Sp.setParent(this.node),this.Sp.setPosition(cc.v2(t.x,t.y+5)),this.Sp.zIndex=e.zIndex-1,this.Sp.scale=e.scale,this.Sp.opacity=150,this.Sp.active=!0},t.prototype.ButtonFadeOut=function(e,t){this.AllButton.forEach(function(o){e!=o&&t!=o&&(cc.tween(o).then(cc.fadeTo(.1,100)).start(),o.getComponent(p.default).ShengArr.forEach(function(e){cc.tween(e).then(cc.fadeTo(.1,100)).start()}))})},t.prototype.ButtonFadeIn=function(e,t){this.AllButton.forEach(function(o){e!=o&&t!=o&&(cc.tween(o).then(cc.fadeIn(.1)).start(),o.getComponent(p.default).ShengArr.forEach(function(e){cc.tween(e).then(cc.fadeIn(.1)).start()}))})},t.prototype.Win=function(){for(var e=0;e<this.AllButton.length;e++)if(!this.AllButton[e].getComponent(p.default).isEnd)return!1;for(e=0;e<this.DataMap.length;++e)for(var t=0;t<this.DataMap[e].length;++t)this.DataMap[e][t].Button&&cc.tween(this.DataMap[e][t].Button.children[0]).sequence(cc.delayTime(.1*e+.1*t),cc.fadeIn(1)).start();var o=.1*this.DataMap.length+.1*this.DataMap[0].length;this.scheduleOnce(function(){c.AudioTools._ins.playAudioSource("Nice"),c.AudioTools._ins.playAudioSource("\u7206\u70b8");for(var e=0;e<300;++e){var t=s.Tools.newPrefab("C1");t.setParent(u.GameModel._ins.mainGame.node),t.setPosition(cc.v2(0,0)),t.zIndex=1e4,t.getComponent(g.default).CaiDai(cc.v2(0,-u.GameModel._ins.mainGame.gameHeight/2),cc.v2(0,-u.GameModel._ins.mainGame.gameHeight/2),20)}},o),this.scheduleOnce(function(){u.GameModel._ins.mainGame.GameNext()},o+1)},t.prototype.Over=function(){u.GameModel._ins.mainGame.isOver=!0,this.scheduleOnce(function(){c.AudioTools._ins.playAudioSource("Fail")},2),this.scheduleOnce(function(){u.GameModel._ins.mainGame.gameEnd()},3.5)},t.prototype.checkOver1=function(){for(var e=function(e){var o=t.BroButtonArr[e][0];if(o.getComponent(p.default).isEnd)return"continue";var n=t.BroButtonArr[e][1],a=o.getComponent(p.default).GameOver(),i=n.getComponent(p.default).GameOver();f.default.compareSets(a,i)?t.OverFind(a,i,o.getComponent(p.default).ButtonNum):t.OverFind1(a,i,o.getComponent(p.default).ButtonNum);var r=o.getComponent(p.default).GetCanMove(),c=n.getComponent(p.default).GetCanMove();return r&&c?(f.default.RadTween(o.getComponent(p.default).Data.Frame),f.default.RadTween(n.getComponent(p.default).Data.Frame),t.scheduleOnce(function(){s.Tools.setSpriteState(o,1),s.Tools.setSpriteState(n,1);for(var e=0,t=o.getComponent(p.default).ShengArr;e<t.length;e++){var a=t[e];s.Tools.setSpriteState(a,1)}},2),t.Over(),{value:void 0}):void 0},t=this,o=0;o<this.BroButtonArr.length;o++){var n=e(o);if("object"==typeof n)return n.value}},t.prototype.OverFind=function(e,t,o){for(var n=this,a=!0,i=[],r=0;r<this.DataMap.length;r++){i[r]=[];for(var c=0;c<this.DataMap[r].length;c++)i[r][c]=null}if(e.forEach(function(e){var t=e.Y,o=e.X;i[t][o]=e,e.CanMove&&(a=!1)}),a)return e.forEach(function(e){f.default.RadTween(e.Frame),e.Button&&n.scheduleOnce(function(){s.Tools.setSpriteState(e.Button,1);for(var t=0,o=e.Button.getComponent(p.default).ShengArr;t<o.length;t++){var n=o[t];s.Tools.setSpriteState(n,1)}},2)}),this.Over(),!0;for(var l=[],u=0;u<i.length;++u)for(var d=0,h=!1,g=0;g<i[u].length;++g)null!=i[u][g]&&(h&&(h=!1,d=0),d++,(g+1>i[u].length-1||null==i[u][g+1])&&(l.push(d),h=!0));for(var m=[],v=0;v<this.DataMap[0].length;++v)for(var y=0,T=(h=!1,0);T<this.DataMap.length;++T)null!=i[T][v]&&(h&&(h=!1,y=0),y++,(T+1>this.DataMap.length-1||null==i[T+1][v])&&(m.push(y),h=!0));var _=0==m.length?0:Math.max.apply(Math,m);return(0==l.length?0:Math.max.apply(Math,l))<o+1&&_<o+1&&(e.forEach(function(e){f.default.RadTween(e.Frame),e.Button&&n.scheduleOnce(function(){s.Tools.setSpriteState(e.Button,1);for(var t=0,o=e.Button.getComponent(p.default).ShengArr;t<o.length;t++){var n=o[t];s.Tools.setSpriteState(n,1)}},2)}),this.Over(),!0)},t.prototype.OverFind1=function(e,t,o){var n=this,a=[o,-o,0,0],i=[0,0,-o,o],r=[];e.forEach(function(e){for(var t=0;t<a.length;t++){var o=a[t]+e.Y,c=i[t]+e.X;o<0||c<0||o>n.Rows-1||c>n.Cols-1||r.push(n.DataMap[o][c])}});for(var c=0,l=r;c<l.length;c++){var u=l[c];if(t.has(u))return!1}return e.forEach(function(e){f.default.RadTween(e.Frame),e.Button&&n.scheduleOnce(function(){s.Tools.setSpriteState(e.Button,1);for(var t=0,o=e.Button.getComponent(p.default).ShengArr;t<o.length;t++){var n=o[t];s.Tools.setSpriteState(n,1)}},2)}),t.forEach(function(e){f.default.RadTween(e.Frame),e.Button&&n.scheduleOnce(function(){s.Tools.setSpriteState(e.Button,1);for(var t=0,o=e.Button.getComponent(p.default).ShengArr;t<o.length;t++){var n=o[t];s.Tools.setSpriteState(n,1)}},2)}),this.Over(),!0},t.prototype.AllButtonTouch=function(e){this.AllButton.forEach(function(t){t.getComponent(p.default).TouchButton=e})},t.prototype.InitStar=function(e,t,o,n,a){for(var i,r,c=o.getComponent(p.default).BroButton,l=s.Tools.getToNodePosForNode(o,cc.director.getScene()),d=s.Tools.getToNodePosForNode(c,cc.director.getScene()),h=s.Tools.getDistance(l,d)/2,g=f.default.GetMidPoint(l,d),m=o.getComponent(p.default).Data.X-c.getComponent(p.default).Data.X,v=o.getComponent(p.default).Data.Y-c.getComponent(p.default).Data.Y,y=0;y<e;y++){var T=s.Tools.newSprite("g"+t+"_2");if(T.scale*=.5*u.GameModel._ins.Scale,T.setParent(cc.director.getScene()),y%2==0)if(i=Math.PI/2/(e/2-1)*y,0!=m&&0==v)var _=cc.v2(g.x+h,l.y);else 0==m&&0!=v&&(_=cc.v2(l.x,g.y-h));else i*=-1,0!=m&&0==v?_=cc.v2(g.x-h,l.y):0==m&&0!=v&&(_=cc.v2(l.x,g.y+h));if(r=f.default.radToVec(i),T.setPosition(_),0!=m&&0==v)var M=s.Tools.getPosForAngleLen(f.default.vectorToAngle(r),150*u.GameModel._ins.Scale,_);else 0==m&&0!=v&&(M=s.Tools.getPosForAngleLen(f.default.vectorsToDegress(r),150*u.GameModel._ins.Scale,_));cc.tween(T).parallel(cc.tween().then(cc.rotateBy(a,360)),cc.tween().sequence(cc.delayTime(a/2),cc.fadeOut(a/2)),cc.moveTo(a,cc.v2(M)).easing(cc.easeCubicActionOut())).start()}},i([y(cc.Node)],t.prototype,"Score",void 0),i([v],t)}(cc.Component);o.default=M,cc._RF.pop()},{"../common/AudioTools":"AudioTools","../common/Tools":"Tools","../manager/PlatformManager":"PlatformManager","../model/GameModel":"GameModel","./ButtonTs":"ButtonTs","./FrameTs":"FrameTs","./ShengTs":"ShengTs","./Util":"Util","./caidaiTS":"caidaiTS"}],InitGame:[function(e,t,o){"use strict";cc._RF.push(t,"11d57xkx8xC/bpnzMOQ9DT5","InitGame");var n,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../common/weiSanTools"),c=e("../manager/PlatformManager"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resNodeArr=[],t.rType=c.releaseType.test_TEST,t.storageKey="demo_Game",t}return a(t,e),t.prototype.onLoad=function(){this.rType==c.releaseType.h5_weiSan&&(this.rType=c.releaseType.h5_common),c.PlatformManager.releaseType=this.rType,c.PlatformManager.storageKey=this.storageKey,c.PlatformManager.initPlatform(),this.initResNode(),this.initScreen(),r.weiSan.initLog()},t.prototype.initResNode=function(){for(var e=0;e<this.resNodeArr.length;e++){var t=cc.instantiate(this.resNodeArr[e]);this.node.addChild(t)}},t.prototype.initScreen=function(){r.weiSan.log("\u7cfb\u7edfOS: "+cc.sys.os);var e=cc.find("Canvas").getComponent(cc.Canvas);cc.sys.os==cc.sys.OS_ANDROID||cc.sys.os==cc.sys.OS_IOS?(e.fitWidth=!0,e.fitHeight=!1):(e.fitWidth=!0,e.fitHeight=!0)},i([u([cc.Prefab])],t.prototype,"resNodeArr",void 0),i([u({type:cc.Enum(c.releaseType)})],t.prototype,"rType",void 0),i([u],t.prototype,"storageKey",void 0),i([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../common/weiSanTools":"weiSanTools","../manager/PlatformManager":"PlatformManager"}],LevelControl:[function(e,t,o){"use strict";cc._RF.push(t,"ae3ebYvilxFeq4zM10/LLHQ","LevelControl"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.GetLevel=function(){return this.Level},e.prototype.SetLevel=function(e){this.Level=e},e.prototype.GetScale=function(){return this.Scale},e.prototype.SetScale=function(e){this.Scale=e},e.prototype.GetHeight=function(){return this.Height},e.prototype.SetHeight=function(e){this.Height=e},e.prototype.GetWidth=function(){return this.Width},e.prototype.SetWidth=function(e){this.Width=e},e.prototype.GetButtonNum=function(){return this.ButtonNum},e.prototype.SetButtonNum=function(e){this.ButtonNum=e},e}();o.default=n,cc._RF.pop()},{}],LoadTools:[function(e,t,o){"use strict";cc._RF.push(t,"b96adtj6ztJp5Q4tD5LbQij","LoadTools"),Object.defineProperty(o,"__esModule",{value:!0}),o.LoadTools=void 0;var n=e("./Tools"),a=e("./weiSanTools"),i=function(){function e(){}return Object.defineProperty(e,"_ins",{get:function(){return this._instance},enumerable:!1,configurable:!0}),e.prototype.loadScene=function(e,t,o){void 0===o&&(o=!0),o&&n.Tools.clearResDic(),cc.director.preloadScene(e,function(){cc.director.loadScene(e,t)})},e.prototype.loadResPrefab=function(e,t,o,n,a){void 0===a&&(a=0),this.loadResAny(e,cc.Prefab,function(e){var i=cc.instantiate(e);o&&o.addChild(i,a),n&&(i.position=cc.v3(n.x,n.y,0)),null!=t&&t(i)})},e.prototype.loadResSpriteFrame=function(e,t,o,n,i,r){void 0===i&&(i=0),cc.loader.loadRes(e,cc.SpriteFrame,function(e,c){e?a.weiSan.error(e):(t.getComponent(cc.Sprite).spriteFrame=c,o&&o.addChild(t,i),n&&(t.position=cc.v3(n.x,n.y,0)),null!=r&&r(t))})},e.prototype.loadResAny=function(e,t,o){cc.loader.loadRes(e,t,function(e,t){e?a.weiSan.error(e):null!=o&&o(t)})},e.prototype.loadBundleScene=function(e,t,o,n){void 0===n&&(n=!0),cc.assetManager.loadBundle(e,function(e,a){if(e)console.log(e);else{if(!n)return;a.loadScene(t,function(e,t){o&&o(),cc.director.runScene(t)})}})},e._instance=new e,e}();o.LoadTools=i,cc._RF.pop()},{"./Tools":"Tools","./weiSanTools":"weiSanTools"}],MainGame:[function(e,t,o){"use strict";cc._RF.push(t,"ef932zNAq1A1IMD8IZjy4f7","MainGame");var n,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.DirState=void 0;var r=e("../TS/ButtonTs"),c=e("../TS/GameTs"),s=e("../TS/Util"),l=e("../common/Tools"),u=e("../ctrl/GameCtrl"),p=e("../manager/EventManager"),d=e("../manager/UIManager"),h=e("../model/GameModel"),f=cc._decorator,g=f.ccclass,m=f.property;(function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT"})(o.DirState||(o.DirState={}));var v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.color=null,t.maskGraphics=null,t.Score=null,t.ShouZhi=null,t.isOver=!1,t.IsShow=!1,t.TouchTime=6,t.ring=null,t.dot=null,t.MoveDir=cc.v2(0,0),t.isTouch=!1,t}return a(t,e),t.prototype.onLoad=function(){this.gameWidth=cc.view.getVisibleSize().width,this.gameHeight=cc.view.getVisibleSize().height,h.GameModel._ins.mainGame=this,this.addInitListener();var e=this.gameWidth/this.gameHeight;h.GameModel._ins.Scale=.5625/e>1?1:.5625/e,cc.director.getPhysicsManager().enabled=!0,cc.PhysicsManager.VELOCITY_ITERATIONS=100,cc.PhysicsManager.POSITION_ITERATIONS=1e3,cc.game.setFrameRate(61),this.addTouchEvents()},t.prototype.ShouZhiTween=function(e,t){var o=this;this.ShouZhi.setPosition(cc.v2(e.x+30*h.GameModel._ins.Scale,e.y-25*h.GameModel._ins.Scale)),this.ShouZhi.angle=-30,cc.tween(this.ShouZhi).sequence(cc.fadeIn(.15),cc.rotateTo(.5,-30),cc.moveTo(.5,cc.v2(t.x+30*h.GameModel._ins.Scale,t.y-25*h.GameModel._ins.Scale)),cc.rotateTo(.5,30),cc.fadeOut(.15),cc.callFunc(function(){o.ShouZhiTween(e,t)})).start()},t.prototype.SetScore=function(){var e=this;cc.tween(this.Score).sequence(cc.scaleTo(.15,0),cc.callFunc(function(){var t=e.Score.getComponent(cc.Label),o=h.GameModel._ins.gameScore;t.string=o.toString()}),cc.scaleTo(1.2,1.2*h.GameModel._ins.Scale).easing(cc.easeBackOut())).start()},t.prototype.update=function(e){if(1!=h.GameModel._ins.GameTs.localData.level&&!this.isOver&&(this.TouchTime-=e,this.TouchTime<=0&&(this.TouchTime=0,!this.IsShow))){this.IsShow=!0;for(var t=0;t<h.GameModel._ins.GameTs.AllButton.length;++t)if(0==h.GameModel._ins.GameTs.AllButton[t].getComponent(r.default).isEnd&&!h.GameModel._ins.GameTs.AllButton[t].getComponent(r.default).GetCanMove()){s.default.ShowTween(h.GameModel._ins.GameTs.AllButton[t]),s.default.ShowTween(h.GameModel._ins.GameTs.AllButton[t].getComponent(r.default).BroButton);for(var o=0,n=h.GameModel._ins.GameTs.AllButton[t].getComponent(r.default).ShengArr;o<n.length;o++){var a=n[o];s.default.ShowTween(a)}return}}},t.prototype.addTouchEvents=function(){cc.macro.ENABLE_MULTI_TOUCH=!1,this.node.on(cc.Node.EventType.TOUCH_START,this.touchStartBack,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMoveBack,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEndBack,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchEndBack,this)},t.prototype.touchStartBack=function(e){this.toushStartPos=l.Tools.getToNodePosForWorld(e.getLocation(),this.node)},t.prototype.touchMoveBack=function(){},t.prototype.touchEndBack=function(){},t.prototype.start=function(){this.initGame()},t.prototype.ColorMove=function(){for(var e=this.color.children.map(function(e){return e.getPosition()}),t=0;t<this.color.children.length;t++)this.colorMoveTween(t+1,e,this.color.children[t])},t.prototype.colorMoveTween=function(e,t,o){var n=this;void 0===t&&(t=[]),e==t.length&&(e=0,o.setPosition(t[0]));var a=t[e];cc.tween(o).sequence(cc.moveTo(.15,a),cc.callFunc(function(){n.colorMoveTween(e+1,t,o)})).start()},t.prototype.GameNext=function(){h.GameModel._ins.GameTs.localData.level++,h.GameModel._ins.GameTs.GameLocalData(!0),h.GameModel._ins.GameTs.node.destroy(),l.Tools.newPrefab("MyGame",this.node,cc.v2(this.gameWidth,0),1,function(e){e.getComponent(c.default).InitTime=1,cc.tween(e).then(cc.moveTo(1,cc.v2(0,0)).easing(cc.easeBackOut())).start()})},t.prototype.initGame=function(){u.GameCtrl._ins.initGame(),u.GameCtrl._ins.boolTouch=!0},t.prototype.startGame=function(){},t.prototype.gameEnd=function(){this.Score.active=!1,u.GameCtrl._ins.gameState!=u.GameState.Over&&(u.GameCtrl._ins.overGame(),h.GameModel._ins.GameTs.localData.CanShuaXin=!1,h.GameModel._ins.GameTs.GameLocalData(!0),this.scheduleOnce(function(){d.UIManager.OpenUI("OverUI")},.5))},t.prototype.addInitListener=function(){p.EventManager.addListener(p.EventData.START_GAME,this.startGame.bind(this),this.node)},t.prototype.onDestroy=function(){p.EventManager.removeListenerForTarget(this.node)},i([m(cc.Node)],t.prototype,"color",void 0),i([m(cc.Graphics)],t.prototype,"maskGraphics",void 0),i([m(cc.Node)],t.prototype,"Score",void 0),i([m(cc.Node)],t.prototype,"ShouZhi",void 0),i([m(cc.Node)],t.prototype,"ring",void 0),i([m(cc.Node)],t.prototype,"dot",void 0),i([g],t)}(cc.Component);o.default=v,cc._RF.pop()},{"../TS/ButtonTs":"ButtonTs","../TS/GameTs":"GameTs","../TS/Util":"Util","../common/Tools":"Tools","../ctrl/GameCtrl":"GameCtrl","../manager/EventManager":"EventManager","../manager/UIManager":"UIManager","../model/GameModel":"GameModel"}],MapControl:[function(e,t,o){"use strict";cc._RF.push(t,"01996AbLH1JCqcRJqfOlqBj","MapControl");var n,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,s=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.text="hello",t}return a(t,e),t.prototype.start=function(){},i([s(cc.Label)],t.prototype,"label",void 0),i([s],t.prototype,"text",void 0),i([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],NetworkManager:[function(e,t,o){"use strict";cc._RF.push(t,"7368bvx8K9EabyOcKON6XK5","NetworkManager"),Object.defineProperty(o,"__esModule",{value:!0}),o.msgHttpUrl=o.NetworkManager=void 0;var n=e("../common/weiSanTools"),a=e("./PlatformManager"),i=function(){function e(){}return e.initNetwork=function(){a.PlatformManager.releaseType==a.releaseType.h5_common||a.PlatformManager.releaseType==a.releaseType.h5_weiSan?this.initNet_H5():a.PlatformManager.releaseType==a.releaseType.test_TEST&&(this.moreGameUrl="http://m.i8box.com/",n.weiSan.log("\u53d1\u9001:---\u6e38\u620f\u52a0\u8f7d\u6210\u529f!"))},e.initNet_H5=function(){this.getHttpGameId(),this.sendLoadGame()},e.getHttpGameId=function(){var e=document.URL,t=0;if(a.PlatformManager.releaseType==a.releaseType.h5_common){var i=window.location.href,r=i.substring(0,i.lastIndexOf("//")+2),c=window.location.host,s=(e=document.URL).lastIndexOf("/"),l=e.substring(0,s);s=l.lastIndexOf("/"),t=parseInt(l.substring(s+1,l.length)),this.gameHttpId=t;var u=r+c,p=u.lastIndexOf("//"),d=u.substring(p+2,u.indexOf("//")+4);if("g."==d){var h=u.replace(d,"");u=h}this.moreGameUrl=u,o.msgHttpUrl.gamePv_commonH5=r+c+"/Service/GamePv/index",o.msgHttpUrl.score_commonH5=r+c+"/Service/Score/index"}else{var f=e.substring(e.lastIndexOf("/game/")+1,e.length).split("/");f.length>=2&&(t=parseInt(f[1])),this.moreGameUrl="http://m.i8box.com/"}this.gameHttpId=t,n.weiSan.log("gameId:",t,this.moreGameUrl)},e.sendLoadGame=function(){a.PlatformManager.releaseType==a.releaseType.h5_weiSan?this.sendMsg(o.msgHttpUrl.gamePv_weiSanH5,"gameID="+this.gameHttpId.toString(),this.loadGameBack):a.PlatformManager.releaseType==a.releaseType.h5_common&&this.sendMsg(o.msgHttpUrl.gamePv_commonH5,"gameId="+this.gameHttpId.toString(),this.loadGameBack)},e.loadGameBack=function(){n.weiSan.log("gamePv\u52a0\u8f7d\u6210\u529f")},e.sendGameScore=function(e,t){a.PlatformManager.releaseType==a.releaseType.h5_weiSan?this.sendMsg(o.msgHttpUrl.score_weiSanH5,"gameScore="+e+"&gameId="+this.gameHttpId+"&gameType="+t,this.sendScoreBack):a.PlatformManager.releaseType==a.releaseType.h5_common&&this.sendMsg(o.msgHttpUrl.score_commonH5,"gameScore="+e+"&gameId="+this.gameHttpId+"&gameType="+t,this.sendScoreBack)},e.sendScoreBack=function(e){n.weiSan.log("---\u63d0\u4ea4\u5206\u6570\u6210\u529f!"+e),null!=e.currentTarget.response&&""!=e.currentTarget.response&&JSON.parse(e.currentTarget.response)},e.sendMsg=function(e,t,o){var n=cc.loader.getXMLHttpRequest();n.onreadystatechange=o,n.open("POST",e),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send(t)},e.gameHttpId=0,e}();o.NetworkManager=i,window.NetworkManager=i,o.msgHttpUrl={gamePv_weiSanH5:"http://www.i8box.com/admin.php/Activityshow/gamelogo",score_weiSanH5:"http://www.i8box.com/admin.php/Gamescore/saveGamescore",gamePv_commonH5:"",score_commonH5:""},cc._RF.pop()},{"../common/weiSanTools":"weiSanTools","./PlatformManager":"PlatformManager"}],OtherModel:[function(e,t,o){"use strict";cc._RF.push(t,"a7d991QTY1Bt7JTY7l9t4I2","OtherModel"),Object.defineProperty(o,"__esModule",{value:!0}),o.interTag=o.groupAll=o.zIndexAll=void 0,function(e){e[e.player_Z=10]="player_Z",e[e.bg_Z=1]="bg_Z"}(o.zIndexAll||(o.zIndexAll={})),function(e){e[e.default=0]="default",e[e.UI=2]="UI"}(o.groupAll||(o.groupAll={})),function(e){e[e.enemy_Tag=1]="enemy_Tag",e[e.player_Tag=3]="player_Tag"}(o.interTag||(o.interTag={})),cc._RF.pop()},{}],OverUI:[function(e,t,o){"use strict";cc._RF.push(t,"eef84sRpGtEYKFhq3Zv4xGF","OverUI");var n,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../ads/AdManager"),c=e("../common/Tools"),s=e("../common/weiSanTools"),l=e("../manager/NetworkManager"),u=e("../manager/PlatformManager"),p=e("../manager/UIManager"),d=e("../model/GameModel"),h=e("../model/WordsModel"),f=cc._decorator,g=f.ccclass,m=f.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bgSpr=null,t.viewNode=null,t.scoreLab=null,t.maxScoreLab=null,t.infoText=null,t.moreBtn=null,t.aginBtn=null,t.isClick=!1,t}return a(t,e),t.prototype.onLoad=function(){this.bgSpr.opacity=0,this.viewNode.y+=1e3,this.aginBtn.scale=0,this.initShowInfo(),this.addBtnEvent(),l.NetworkManager.sendGameScore(d.GameModel._ins.gameScore,1),r.AdManager.showIntersAd(),u.PlatformManager.osType!=u.osType.h5&&(this.moreBtn.active=!1)},t.prototype.initShowInfo=function(){this.scoreLab.string=d.GameModel._ins.gameScore.toString();var e=this.getBeatItScore(d.GameModel._ins.gameScore,d.GameModel._ins.standScore,d.GameModel._ins.gameMaxScore);this.infoText.string=this.getBeatItStr(d.GameModel._ins.gameScore,e,!0);var t=c.Tools.getStorage("gameOverMaxScore");if((!t||t<=d.GameModel._ins.gameScore)&&(t=d.GameModel._ins.gameScore,c.Tools.setStorage("gameOverMaxScore",d.GameModel._ins.gameScore)),this.maxScoreLab.string=t.toString(),u.PlatformManager.osType==u.osType.h5&&("CN"==c.Tools.getLanguageType()||"CHT"==c.Tools.getLanguageType()?document.title=h.WordsModel.getStrForLanguage("overTitle_1","CN")+"<"+h.WordsModel.getStrForLanguage("gameName","CN")+">"+h.WordsModel.getStrForLanguage("overTitle_2","CN")+this.getBeatItStr(d.GameModel._ins.gameScore,e,!1):document.title=h.WordsModel.getStrForLanguage("overTitle_1","EN")+"<"+h.WordsModel.getStrForLanguage("gameName","EN")+">"+h.WordsModel.getStrForLanguage("overTitle_2","EN")+this.getBeatItStr(d.GameModel._ins.gameScore,e,!1),console.log(document.title),"EN"==c.Tools.getLanguageType())){var o=this.moreBtn.children[0];c.Tools.setSpriteFrame(o,"EN")}},t.prototype.addBtnEvent=function(){var e=this;this.aginBtn.on("click",function(){e.isClick&&e.aginGame()}),this.moreBtn.on("click",function(){e.isClick&&(u.PlatformManager.releaseType!=u.releaseType.test_TEST?window.location.href=l.NetworkManager.moreGameUrl:s.weiSan.log("\u6d4b\u8bd5\u6a21\u5f0f \u66f4\u591a\u6e38\u620fUrl: "+l.NetworkManager.moreGameUrl))})},t.prototype.aginGame=function(){this.isClick=!1,p.UIManager.CloseUI("OverUI"),this.scheduleOnce(function(){cc.director.preloadScene(d.GameModel._ins.mianScene,function(){cc.director.loadScene(d.GameModel._ins.mianScene)})},.2)},t.prototype.getBeatItStr=function(e,t,o){void 0===o&&(o=!0);var n=h.WordsModel.getStrForLanguage("overScoreInfo_0");return e>0&&(n=h.WordsModel.getStrForLanguage("overScoreInfo_1")+t+"%"+h.WordsModel.getStrForLanguage("overScoreInfo_2")),n},t.prototype.getBeatItScore=function(e,t,o){if(e>=o)return 100;if(e<=t){var n=e/t*80+c.Tools.random(-3,3);return Math.max(Math.floor(n),5)}return n=80+(e-t)/(o-t)*20+c.Tools.random(-3,3),Math.min(Math.floor(n),99)},t.prototype.openUI=function(){var e=this;this.bgSpr.runAction(cc.fadeTo(.3,100)),this.viewNode.runAction(cc.sequence(cc.moveBy(.3,cc.v2(0,-1e3)).easing(cc.easeBackOut()),cc.callFunc(function(){e.isClick=!0,e.aginBtn.runAction(cc.scaleTo(.3,1).easing(cc.easeBackOut()))})))},t.prototype.closeUI=function(){this.bgSpr.runAction(cc.fadeOut(.3)),this.viewNode.runAction(cc.moveBy(.3,cc.v2(0,1e3)).easing(cc.easeBackIn()))},i([m(cc.Node)],t.prototype,"bgSpr",void 0),i([m(cc.Node)],t.prototype,"viewNode",void 0),i([m(cc.Label)],t.prototype,"scoreLab",void 0),i([m(cc.Label)],t.prototype,"maxScoreLab",void 0),i([m(cc.Label)],t.prototype,"infoText",void 0),i([m(cc.Node)],t.prototype,"moreBtn",void 0),i([m(cc.Node)],t.prototype,"aginBtn",void 0),i([g],t)}(p.UIManager);o.default=v,cc._RF.pop()},{"../ads/AdManager":"AdManager","../common/Tools":"Tools","../common/weiSanTools":"weiSanTools","../manager/NetworkManager":"NetworkManager","../manager/PlatformManager":"PlatformManager","../manager/UIManager":"UIManager","../model/GameModel":"GameModel","../model/WordsModel":"WordsModel"}],PassTs:[function(e,t,o){"use strict";cc._RF.push(t,"19493Xqm2FKiJVrWh6RL/Dq","PassTs");var n,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../script/common/Tools"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Pig=null,t.balloonSpArr=[],t.BalloonArr=[],t}return a(t,e),t.prototype.start=function(){this.gameWidth=cc.view.getVisibleSize().width,this.gameHeight=cc.view.getVisibleSize().height,this.InitBalloon(),this.Play()},t.prototype.InitBalloon=function(){for(var e=0;e<60;e++){var t=new cc.Node;t.parent=this.node,t.active=!1,t.addComponent(cc.Sprite),t.getComponent(cc.Sprite).spriteFrame=this.balloonSpArr[r.Tools.random(0,this.balloonSpArr.length-1)],t.zIndex=0,this.BalloonArr.push(t),t.scale*=.35}},t.prototype.BalloonMove=function(){for(var e=0;e<this.BalloonArr.length;e++){var t=this.BalloonArr[e];t.active=!0,t.setPosition(cc.v2(r.Tools.random(-(this.gameWidth/2-t.width/2*t.scale),this.gameWidth/2-t.width/2*t.scale),r.Tools.random(-(this.gameHeight/2+t.height/2*t.scale),-(this.gameHeight/2+3e3))));var o=Math.abs(0-t.y)/800;cc.tween(t).sequence(cc.moveTo(o,cc.v2(t.x,0)),cc.moveBy(2.5,cc.v2(0,2e3))).start()}},t.prototype.PigTween=function(){var e=this;this.Pig.active=!0,this.Pig.y=-2e3,this.Pig.zIndex=1,cc.tween(this.Pig).sequence(cc.moveTo(2,0,0).easing(cc.easeCubicActionOut()),cc.moveBy(2,0,2e3).easing(cc.easeCircleActionIn()),cc.callFunc(function(){e.Pig.active=!1,cc.Tween.stopAllByTag(10)})).start(),cc.tween(this.Pig.getChildByName("shengzi")).tag(10).sequence(cc.rotateTo(1,5).easing(cc.easeSineIn()),cc.rotateTo(1,-5).easing(cc.easeSineIn())).repeatForever().start()},t.prototype.Play=function(){this.PigTween(),this.BalloonMove()},i([l(cc.Node)],t.prototype,"Pig",void 0),i([l(cc.SpriteFrame)],t.prototype,"balloonSpArr",void 0),i([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../../script/common/Tools":"Tools"}],PlatformManager:[function(e,t,o){"use strict";cc._RF.push(t,"526f4NSDmdHDqwXmWoL2A3b","PlatformManager"),Object.defineProperty(o,"__esModule",{value:!0}),o.osType=o.releaseType=o.PlatformManager=void 0;var n,a=e("../ads/AdManager"),i=e("./NetworkManager"),r=function(){function e(){}return e.initPlatform=function(){this.loadGameBool||(this.initOsType(),i.NetworkManager.initNetwork(),e.releaseType!=o.releaseType.h5_weiSan&&e.releaseType!=o.releaseType.h5_common||("NaN"==i.NetworkManager.toString()&&(e.releaseType==o.releaseType.h5_weiSan?window.location.href=i.NetworkManager.moreGameUrl:window.location.href="http://www.i8box.com/"),loadInScene&&loadInScene(),cc.view.enableAutoFullScreen(!1)),e.releaseType!=o.releaseType.applet_ziJie&&(window.AdManager=a.AdManager),this.loadGameBool=!0)},e.initOsType=function(){this.releaseType==o.releaseType.APP_google?this.osType=n.android:this.releaseType==o.releaseType.APP_ios?this.osType=n.ios:this.releaseType==o.releaseType.applet_ziJie?this.osType=n.applet:this.osType=n.h5},e.setStorage=function(t,n,a){if(void 0===a&&(a=!1),t=this.storageKey+t,e.releaseType===o.releaseType.applet_ziJie)return tt.setStorageSync(t,n);a&&(n=JSON.stringify(n)),cc.sys.localStorage.setItem(t,n)},e.getStorage=function(t,n){void 0===n&&(n=!1),t=this.storageKey+t;var a=null;return e.releaseType===o.releaseType.applet_ziJie?""==(a=tt.getStorageSync(t))&&(a=null):(a=cc.sys.localStorage.getItem(t))&&"NaN"!=a.toString()&&"null"!=a.toString()?n?a=JSON.parse(a):isNaN(a)||(a=parseInt(a)):a=null,a},e.storageKey="demo_Game_",e.loadGameBool=!1,e}();o.PlatformManager=r,window.PlatformManager=r,o.releaseType=cc.Enum({test_TEST:1,h5_weiSan:2,h5_common:3,applet_ziJie:4,applet_wechat:5,APP_google:10,APP_ios:11}),function(e){e[e.h5=1]="h5",e[e.android=2]="android",e[e.ios=3]="ios",e[e.applet=4]="applet"}(n=o.osType||(o.osType={})),cc._RF.pop()},{"../ads/AdManager":"AdManager","./NetworkManager":"NetworkManager"}],PoolManager:[function(e,t,o){"use strict";cc._RF.push(t,"6d71a4IRmhHHqQ3Zkrz3M5U","PoolManager"),Object.defineProperty(o,"__esModule",{value:!0}),o.PoolManager=void 0;var n=e("../common/Tools"),a=e("../common/weiSanTools"),i=function(){function e(){}return e.addPoolObj=function(e){null==this.PoolDic[e.name]&&(this.PoolDic[e.name]=new cc.NodePool(e.name)),this.PoolDic[e.name].put(e)},e.getPoolObj=function(e){return null==this.PoolDic[e]?(a.weiSan.warn("\u6ca1\u6709\u6dfb\u52a0\u5bf9\u8c61\u6c60\uff1a",e),this.PoolDic[e]=new cc.NodePool(e),n.Tools.newPrefab(e)):this.PoolDic[e].size()>1?this.PoolDic[e].get():n.Tools.newPrefab(e)},e.clearPool=function(e){if(null!=this.PoolDic[e])return this.PoolDic[e].clear();a.weiSan.warn("\u6ca1\u6709\u6dfb\u52a0\u5bf9\u8c61\u6c60\uff1a",e)},e.clearAllPool=function(){for(var e in this.PoolDic)Object.prototype.hasOwnProperty.call(this.PoolDic,e)&&this.clearPool(e)},e.PoolDic=new Map,e}();o.PoolManager=i,cc._RF.pop()},{"../common/Tools":"Tools","../common/weiSanTools":"weiSanTools"}],ResArr:[function(e,t,o){"use strict";cc._RF.push(t,"56af2D00XFDX6lyw8ZO/zKX","ResArr");var n,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../common/Tools"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.SpriteFrameArr=[],t.PrefabArr=[],t.audiosArr=[],t}return a(t,e),t.prototype.onLoad=function(){this.addAudio(),this.addPrefabs(),this.addSpriteFrame()},t.prototype.addAudio=function(){for(var e=0;e<this.audiosArr.length;e++)if(this.audiosArr[e]){var t=this.audiosArr[e];r.Tools.AudioClipDic.set(t.name,t)}},t.prototype.addSpriteFrame=function(){for(var e=0;e<this.SpriteFrameArr.length;e++)if(this.SpriteFrameArr[e]){var t=this.SpriteFrameArr[e];r.Tools.SpriteFrameDic.set(t.name,t)}},t.prototype.addPrefabs=function(){for(var e=0;e<this.PrefabArr.length;e++)if(this.PrefabArr[e]){var t=this.PrefabArr[e];r.Tools.PrefabDic.set(t.data.name,t)}},i([l([cc.SpriteFrame])],t.prototype,"SpriteFrameArr",void 0),i([l([cc.Prefab])],t.prototype,"PrefabArr",void 0),i([l([cc.AudioClip])],t.prototype,"audiosArr",void 0),i([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../common/Tools":"Tools"}],ShengTs:[function(e,t,o){"use strict";cc._RF.push(t,"2a841QmUUBKqpu1qMyUZ+bE","ShengTs");var n,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./Util"),c=cc._decorator,s=c.ccclass,l=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.start=function(){},t.prototype.update=function(){var e=r.default.getNormalizeVectorPos(this.node.getPosition(),this.TagNode.getPosition()),t=r.default.vectorToAngle(e);this.node.angle=t},i([s],t)}(cc.Component));o.default=l,cc._RF.pop()},{"./Util":"Util"}],Tools:[function(e,t,o){"use strict";cc._RF.push(t,"1cabc0YRwVLlaPoVAuI9R3d","Tools"),Object.defineProperty(o,"__esModule",{value:!0}),o.Tools=void 0;var n=e("../manager/PlatformManager"),a=e("./LoadTools"),i=function(){function e(){}return e.clearResDic=function(){this.AudioClipDic.clear(),this.SpriteFrameDic.clear(),this.PrefabDic.clear()},e.setStorage=function(e,t,o){void 0===o&&(o=!1),n.PlatformManager.setStorage(e,t,o)},e.getStorage=function(e,t){return void 0===t&&(t=!1),n.PlatformManager.getStorage(e,t)},e.newPrefab=function(e,t,o,n,a){return void 0===n&&(n=0),r._ins.newPrefab(e,a,t,o,n)},e.newSprite=function(e,t,o,n,a){return void 0===n&&(n=0),r._ins.newSprite(e,a,t,o,n)},e.setSpriteFrame=function(e,t){r._ins.setSpriteFrame(e,t)},e.setNodeGroupIndex=function(e,t){r._ins.setNodeGroupIndex(e,t)},e.setBtnClickSpr=function(e,t,o){r._ins.setBtnClickSpr(e,t,o)},e.setSpriteState=function(e,t){r._ins.setSpriteState(e,t)},e.setNodeParent=function(e,t){r._ins.setNodeParent(e,t)},e.random=function(e,t,o){return void 0===o&&(o=!0),c._ins.random(e,t,o)},e.chooseRandom=function(e){return c._ins.chooseRandom(e)},e.refractionY=function(e){return c._ins.refractionY(e)},e.refractionX=function(e){return c._ins.refractionX(e)},e.aginSortArr=function(e){c._ins.aginSortArr(e)},e.sortArrForObject=function(e,t,o){void 0===o&&(o=!1),c._ins.sortArrForObject(e,t,o)},e.getDiffNumRandom=function(e,t,o){return c._ins.getDiffNumRandom(e,t,o)},e.getAngleForPos=function(e,t,o){return void 0===o&&(o=!1),s._ins.getAngleForPos(this.getV2ForV3(e),this.getV2ForV3(t),o)},e.getDistance=function(e,t){return s._ins.getDistance(this.getV2ForV3(e),this.getV2ForV3(t))},e.getV2ForV3=function(e){return cc.v2(e.x,e.y)},e.getPosForAngleLen=function(e,t,o){return void 0===o&&(o=cc.v2(0,0)),s._ins.getPosForAngleLen(e,t,o)},e.getToNodePosForNode=function(e,t){return s._ins.getToNodePosForNode(e,t)},e.getToWorldPosAR=function(e){return s._ins.getToWorldPosAR(e)},e.getToNodePosForWorld=function(e,t){return s._ins.getToNodePosForWorld(e,t)},e.removeArrForValue=function(e,t){return e.splice(e.indexOf(t),1)},e.addArrNoValue=function(e,t){return e.indexOf(t)<0&&(e.push(t),!0)},e.addArrIndex=function(e,t,o){return e.splice(t,0,o)},e.insertStrForIndex=function(e,t,o){return e.slice(0,t)+o+e.slice(t)},e.prefixInteger=function(e,t){return void 0===t&&(t=2),(Array(t).join("0")+e).slice(-t)},e.getLanguageType=function(){var e="EN";return cc.sys.language==cc.sys.LANGUAGE_CHINESE?e=-1!=cc.sys.languageCode.toLowerCase().indexOf("zh-cn")||-1!=cc.sys.languageCode.toLowerCase().indexOf("zh_cn")?"CN":"CHT":cc.sys.language==cc.sys.LANGUAGE_KOREAN?e="KOR":cc.sys.language==cc.sys.LANGUAGE_JAPANESE?e="JP":"th-TH"==window.navigator.language&&(e="TH"),e},e.SpriteFrameDic=new Map,e.PrefabDic=new Map,e.AudioClipDic=new Map,e}();o.Tools=i;var r=function(){function e(){}return Object.defineProperty(e,"_ins",{get:function(){return this._instance},enumerable:!1,configurable:!0}),e.prototype.newPrefab=function(e,t,o,n,r){void 0===r&&(r=0);var c=i.PrefabDic.get(e),s=null;return null!=c?(s=cc.instantiate(c),o&&o.addChild(s,r),n&&(s.position=cc.v3(n.x,n.y,0)),null!=t&&t(s)):a.LoadTools._ins.loadResPrefab(e,t,o,n,r),s},e.prototype.newSprite=function(e,t,o,n,r){void 0===r&&(r=0);var c=new cc.Node;return c.name=e,null!=i.SpriteFrameDic.get(e)?(c.addComponent(cc.Sprite).spriteFrame=i.SpriteFrameDic.get(e),o&&o.addChild(c,r),n&&(c.position=cc.v3(n.x,n.y,0)),null!=t&&t(c)):(c.addComponent(cc.Sprite),a.LoadTools._ins.loadResSpriteFrame(e,c,o,n,r,t)),c},e.prototype.setSpriteFrame=function(e,t){i.SpriteFrameDic.get(t)?e.getComponent(cc.Sprite).spriteFrame=i.SpriteFrameDic.get(t):a.LoadTools._ins.loadResAny(t,cc.SpriteFrame,function(t){e.getComponent(cc.Sprite).spriteFrame=t})},e.prototype.setNodeGroupIndex=function(e,t){e.groupIndex=t;for(var o=0;o<e.children.length;o++)e.children[o].groupIndex=t},e.prototype.setBtnClickSpr=function(e,t,o){i.SpriteFrameDic.get(t)?(e.getComponent(cc.Button).normalSprite=i.SpriteFrameDic.get(t),e.getComponent(cc.Button).hoverSprite=i.SpriteFrameDic.get(t),e.getComponent(cc.Button).pressedSprite=i.SpriteFrameDic.get(o)):(a.LoadTools._ins.loadResAny(t,cc.SpriteFrame,function(t){e.getComponent(cc.Button).normalSprite=t,e.getComponent(cc.Button).hoverSprite=t}),a.LoadTools._ins.loadResAny(o,cc.SpriteFrame,function(t){e.getComponent(cc.Button).pressedSprite=t}))},e.prototype.setSpriteState=function(e,t){var o=0==t?"builtin-2d-sprite":"builtin-2d-gray-sprite";cc.loader.loadRes("materials/"+o,cc.Material,function(t,o){t?cc.error(t):e.getComponent(cc.Sprite).setMaterial(0,o)})},e.prototype.setNodeParent=function(e,t){var o=s._ins.getToNodePosForNode(e,t);e.parent=t,e.position=cc.v3(o.x,o.y)},e._instance=new e,e}(),c=function(){function e(){}return Object.defineProperty(e,"_ins",{get:function(){return this._instance},enumerable:!1,configurable:!0}),e.prototype.random=function(e,t,o){return void 0===o&&(o=!0),o?e+Math.floor(Math.random()*(t-e+1)):Math.random()*(t-e)+e},e.prototype.chooseRandom=function(e){for(var t=0,o=0;o<e.length;o++)t+=e[o];var n=this.random(0,t,!1);for(o=0;o<e.length;o++){if(n<e[o]&&e[o]>0)return o;n-=e[o]}return e.length-1},e.prototype.refractionY=function(e){return Math.atan2(Math.sin(e),-Math.cos(e))},e.prototype.refractionX=function(e){return Math.atan2(-Math.sin(e),Math.cos(e))},e.prototype.aginSortArr=function(e){for(var t=0;t<e.length;t++){var o=i.random(0,e.length-1);if(o!=t){var n=e[t];e[t]=e[o],e[o]=n}}},e.prototype.sortArrForObject=function(e,t,o){void 0===o&&(o=!1),o?e.sort(function(e,o){return o[t]-e[t]}):e.sort(function(e,o){return e[t]-o[t]})},e.prototype.getDiffNumRandom=function(e,t,o){for(var n=[],a=e;a<=t;a++)n.push(a);var r=n.length-o;for(a=0;a<r;a++){var c=i.random(0,n.length-1);n.splice(c,1)}return n},e._instance=new e,e}(),s=function(){function e(){}return Object.defineProperty(e,"_ins",{get:function(){return this._instance},enumerable:!1,configurable:!0}),e.prototype.getAngleForPos=function(e,t,o){void 0===o&&(o=!1);var n;return n=o?-Math.atan2(t.x-e.x,t.y-e.y):Math.atan2(t.y-e.y,t.x-e.x),cc.misc.radiansToDegrees(n)},e.prototype.getDistance=function(e,t){return e.sub(t).mag()},e.prototype.getPosForAngleLen=function(e,t,o){void 0===o&&(o=cc.v2(0,0));var n=cc.misc.degreesToRadians(e);return cc.v3(o.x+Math.cos(n)*t,o.y+Math.sin(n)*t)},e.prototype.getToNodePosForNode=function(e,t){var o=e.parent.convertToWorldSpaceAR(e.position),n=t.convertToNodeSpaceAR(o);return cc.v2(n.x,n.y)},e.prototype.getToWorldPosAR=function(e){return e.parent.convertToWorldSpaceAR(e.position)},e.prototype.getToNodePosForWorld=function(e,t){return t.convertToNodeSpaceAR(e)},e._instance=new e,e}();cc._RF.pop()},{"../manager/PlatformManager":"PlatformManager","./LoadTools":"LoadTools"}],Tree:[function(e,t,o){"use strict";cc._RF.push(t,"5b536h2kmdMsJ4ooOMWsxuQ","Tree"),Object.defineProperty(o,"__esModule",{value:!0}),o.IntervalTree=o.TreeNode=o.Interval=void 0;o.Interval=function(e,t){this.low=e,this.high=t};var n=function(e){this.interval=e,this.max=e.high,this.left=null,this.right=null};o.TreeNode=n;var a=function(){function e(){this.root=null}return e.prototype.insertTreeNode=function(e,t){t.interval.low<e.interval.low?null===e.left?e.left=t:this.insertTreeNode(e.left,t):null===e.right?e.right=t:this.insertTreeNode(e.right,t),t.interval.high>e.max&&(e.max=t.interval.high)},e.prototype.insert=function(e){var t=new n(e);null===this.root?this.root=t:this.insertTreeNode(this.root,t)},e.prototype.searchOverlap=function(e,t){var o=[];return null===e?o:(e.interval.low<=t.high&&e.interval.high>=t.low&&o.push(e.interval),null!==e.left&&e.left.max>=t.low&&o.push.apply(o,this.searchOverlap(e.left,t)),null!==e.right&&e.interval.low<=t.high&&o.push.apply(o,this.searchOverlap(e.right,t)),o)},e.prototype.search=function(e){return this.searchOverlap(this.root,e)},e.prototype.findMinTreeNode=function(e){for(var t=e;null!==t.left;)t=t.left;return t},e.prototype.deleteTreeNode=function(e,t){if(null===e)return e;if(t.low<e.interval.low)e.left=this.deleteTreeNode(e.left,t);else if(t.low>e.interval.low)e.right=this.deleteTreeNode(e.right,t);else{if(null===e.left){var o=e.right;return e=null,o}if(null===e.right){var n=e.left;return e=null,n}var a=this.findMinTreeNode(e.right);e.interval=a.interval,e.right=this.deleteTreeNode(e.right,a.interval)}return null===e?e:(e.max=Math.max(this.getMax(e.left),this.getMax(e.right),e.interval.high),e)},e.prototype.getMax=function(e){return null===e?Number.MIN_VALUE:e.max},e.prototype.delete=function(e){this.root=this.deleteTreeNode(this.root,e)},e}();o.IntervalTree=a,cc._RF.pop()},{}],UIManager:[function(e,t,o){"use strict";cc._RF.push(t,"2db57i1B6xAH6TGmydefCWN","UIManager");var n,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=Array(e),a=0;for(t=0;t<o;t++)for(var i=arguments[t],r=0,c=i.length;r<c;r++,a++)n[a]=i[r];return n};Object.defineProperty(o,"__esModule",{value:!0}),o.UIManager=void 0;var r=e("../common/Tools"),c=e("../common/weiSanTools"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.OpenUI=function(e,t){void 0===t&&(t=!1);for(var o,n=[],a=2;a<arguments.length;a++)n[a-2]=arguments[a];if(l[e]&&(o=l[e]),null==o)return c.weiSan.error("\u672a\u627e\u5230\u8be5UI\u7684\u914d\u7f6e\u4fe1\u606f:"+e),null;this.UIDic.has(e)?c.weiSan.warn("\u5df2\u7ecf\u6253\u5f00\u8fc7UI:"+e):(1==t&&this.removeAllUI(),this.CreateUI.apply(this,i([o],n)))},t.CloseUI=function(e){for(var t,o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];if(t=this.UIDic.get(e)){if(this.UIDic.delete(e),""==t.name)return;var a=t.getComponent(t.config.com);a&&a.closeUI&&a.closeUI.apply(a,o)}else c.weiSan.warn("\u5df2\u7ecf\u5173\u95ed\u8fc7UI:"+e)},t.GetUI=function(e){var t=this.UIDic.get(e);return null!=t?t:(c.weiSan.log("\u6ca1\u6709\u6253\u5f00UI:"+e),null)},t.GetUIForComponent=function(e){var t=this.UIDic.get(e);return null!=t?t.getComponent(t.config.com):(c.weiSan.warn("\u6ca1\u6709\u6253\u5f00UI:"+e),null)},t.CreateUI=function(e){for(var t=this,o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];if(null==this.UIDic.get(e.name)){var a=cc.director.getScene().getChildByName("Canvas");r.Tools.newPrefab(e.resUrl,a,null,e.zIndex,function(n){n.config=e;var a=n.getComponent(e.com);a&&a.openUI&&(a.openUI.apply(a,o),a.uiName=e.name),t.UIDic.set(e.name,n)})}},t.removeAllUI=function(){var e=this;this.UIDic.forEach(function(t,o){e.CloseUI(o.toString())})},t.removeUIDic=function(){this.UIDic.clear()},t.prototype.onDestroy=function(){t.UIDic.delete(this.uiName)},t.UIDic=new Map,t}(cc.Component);o.UIManager=s;var l={OverUI:{name:"OverUI",resUrl:"OverUI",com:"OverUI",zIndex:99},ReviveUI:{name:"ReviveUI",resUrl:"ReviveUI",com:"ReviveUI",zIndex:99},MatchingUI:{name:"MatchingUI",resUrl:"MatchingUI",com:"MatchingUI",zIndex:99},SkinUI:{name:"SkinUI",resUrl:"SkinUI",com:"SkinUI",zIndex:99},PackUI:{name:"PackUI",resUrl:"PackUI",com:"PackUI",zIndex:99},LuckUI:{name:"LuckUI",resUrl:"LuckUI",com:"LuckUI",zIndex:99},StartUseUI:{name:"StartUseUI",resUrl:"startUseUI",com:"StartUseUI",zIndex:99},PersonUI:{name:"PersonUI",resUrl:"PersonUI",com:"PersonUI",zIndex:100},LoadUI:{name:"LoadUI",resUrl:"LoadUI",com:"LoadUI",zIndex:100}};cc._RF.pop()},{"../common/Tools":"Tools","../common/weiSanTools":"weiSanTools"}],Util:[function(e,t,o){"use strict";cc._RF.push(t,"dca46u1pkNGe4qpxHsnFpCG","Util");var n,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=Array(e),a=0;for(t=0;t<o;t++)for(var i=arguments[t],r=0,c=i.length;r<c;r++,a++)n[a]=i[r];return n};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../common/Tools"),s=cc._decorator,l=s.ccclass,u=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return a(t,e),o=t,t.getNormalizeVector=function(e,t){var o=t.convertToWorldSpaceAR(t.position),n=e.convertToWorldSpaceAR(e.position);return o.sub(n).normalize()},t.getNormalizeVectorPos=function(e,t){return t.sub(e).normalize()},t.getDistance=function(e,t){var o=t.convertToWorldSpaceAR(t.position),n=e.convertToWorldSpaceAR(e.position);return o.sub(n).len()},t.vectorsToDegress=function(e,t){void 0===t&&(t=cc.v2(0,1));var o=t,n=cc.v2(e.x,e.y).signAngle(o);return cc.misc.radiansToDegrees(-n)},t.degreesToVectors=function(e,t){void 0===t&&(t=cc.v2(0,1));var o=cc.misc.degreesToRadians(e);return t.rotate(o)},t.radToVec=function(e,t){return void 0===t&&(t=cc.v2(0,1)),t.rotate(-e)},t.vectorToAngle=function(e){return Math.atan2(e.y,e.x)*(180/Math.PI)},t.isPointInPolygon=function(e,t){for(var o=t.length,n=!1,a=0,i=o-1;a<o;i=a++){var r=t[a],c=t[i];r.y>e.y!=c.y>e.y&&e.x<(c.x-r.x)*(e.y-r.y)/(c.y-r.y)+r.x&&(n=!n)}return n},t.GetposofAnglelen=function(e,t,o){var n=cc.misc.degreesToRadians(t);return cc.v2(e.x+Math.cos(n)*o,e.y+Math.sin(n)*o)},t.RemoveDuplicates=function(e){return e.filter(function(t,o){return e.indexOf(t)===o})},t.ArrDeduplication=function(e,t){c.Tools.aginSortArr(e);for(var o=new Set,n=0,a=e;n<a.length;n++){var i=a[n];o.add(i)}for(var r=0,s=t;r<s.length;r++){var l=s[r];o.delete(l)}return Array.from(o).shift()},t.GetMoveTime=function(e){return e/1e3},t.DeleelEmentsofArr=function(e,t){var o=t.indexOf(e);t.splice(o,1)},t.InitLabel=function(e,t){var o;e.getChildByName("Label")?(o=e.getChildByName("Label")).getComponent(cc.Label).string=t.toString():((o=new cc.Node).name="Label",o.setParent(e),o.setPosition(cc.v2(0,0)),o.addComponent(cc.Label),o.getComponent(cc.Label).string=t.toString(),o.color=cc.color(0,0,0)),o.scale=1},t.mergeAndSortArrays=function(e,t,o){var n=r(e,t);return this.ArrSort(n,o),n},t.ArrSort=function(e,t){t?e.sort(function(e,t){return e-t}):e.sort(function(e,t){return t-e})},t.quickSort=function(e,t){if(e.length<=1)return e;t++;for(var n=Math.floor(e.length/2),a=e.splice(n,1)[0],i=[],c=[],s=0;s<e.length;s++)e[s].id<a?i.push(e[s]):c.push(e[s]);var l=o.quickSort(i,t),u=o.quickSort(c,t);return r(l,[a],u)},t.InitWall=function(e,t,o){for(var n=0;n<4;++n){var a=new cc.Node;a.addComponent(cc.RigidBody),a.addComponent(cc.PhysicsBoxCollider),a.getComponent(cc.RigidBody).type=cc.RigidBodyType.Static,a.parent=e,0==n?(a.position=cc.v3(0,o/2),a.getComponent(cc.PhysicsBoxCollider).size.width=t,a.getComponent(cc.PhysicsBoxCollider).size.height=15):1==n?(a.position=cc.v3(0,-o/2),a.getComponent(cc.PhysicsBoxCollider).size.width=t,a.getComponent(cc.PhysicsBoxCollider).size.height=15):2==n?(a.position=cc.v3(t/2,0),a.getComponent(cc.PhysicsBoxCollider).size.width=15,a.getComponent(cc.PhysicsBoxCollider).size.height=o):3==n&&(a.position=cc.v3(-t/2,0),a.getComponent(cc.PhysicsBoxCollider).size.width=15,a.getComponent(cc.PhysicsBoxCollider).size.height=o),a.getComponent(cc.PhysicsBoxCollider).apply()}},t.InitTween=function(e){e.opacity=0,cc.tween(e).delay(.25).then(cc.fadeIn(.25)).start()},t.ShowTween=function(e){e.opacity=0,cc.tween(e).tag(10).sequence(cc.fadeIn(.5),cc.fadeOut(.5)).repeatForever().start()},t.RadTween=function(e){cc.tween(e).tag(10).sequence(cc.tintTo(.5,255,0,0),cc.tintTo(.5,255,255,255)).repeat(2).start()},t.compareSets=function(e,t){if(e.size!==t.size)return!1;var o=!0;return e.forEach(function(e){t.has(e)||(o=!1)}),o},t.runBezierAct=function(e,t,o,n,a,i,r){r?(e.setPosition(o),cc.tween(e).bezierTo(t,o,n,i).start()):(e.setPosition(o),cc.tween(e).bezierTo(t,n,a,i).start())},t.GetMidPoint=function(e,t){return cc.v2((e.x+t.x)/2,(e.y+t.y)/2)},o=i([l],t)}(cc.Component));o.default=u,cc._RF.pop()},{"../common/Tools":"Tools"}],WordsModel:[function(e,t,o){"use strict";cc._RF.push(t,"2ece89cEWRIPr2lAofwJh4H","WordsModel"),Object.defineProperty(o,"__esModule",{value:!0}),o.WordsModel=void 0;var n=e("../common/Tools"),a=e("../common/weiSanTools");o.WordsModel={gameName:{CN:"\u62c9\u76f4\u7ef3\u5b50",CHT:"\u62c9\u76f4\u7ef3\u5b50",EN:"Untie the knot",KOR:"\ub9e4\ub4ed\uc744 \ud480\ub2e4",JP:"\u7d50\u3073\u76ee\u3092\u89e3\u304f",TH:"\u0e41\u0e01\u0e49\u0e1b\u0e21"},overScoreInfo_0:{CN:"\u53ea\u5f970\u5206\uff0c\u5168\u7403\u72ec\u4e00\u4e2a\uff01",CHT:"\u53ea\u5f970\u5206\uff0c\u5168\u7403\u7368\u4e00\u500b\uff01",EN:"Only 0, the only one in the world!",KOR:"0\uc810\ubc16\uc5d0 \uc548 \ub3fc, \uc804 \uc138\uacc4\uc5d0\uc11c \ud558\ub098\uc57c!",JP:"0\u70b9\u3057\u304b\u53d6\u308c\u307e\u305b\u3093\u3002\u4e16\u754c\u3067\u552f\u4e00\u3067\u3059",TH:"\u0e21\u0e35\u0e40\u0e1e\u0e35\u0e22\u0e07 <NU>0 \u0e08\u0e38\u0e14\u0e2b\u0e19\u0e36\u0e48\u0e07\u0e43\u0e19\u0e42\u0e25\u0e01"},overScoreInfo_1:{CN:"\u51fb\u8d25\u4e86\u5168\u7403",CHT:"\u64ca\u6557\u4e86\u5168\u7403",EN:"Handy: beat the world ",KOR:"\uaca9\ud30c",JP:"\u6253\u3061\u8ca0\u304b\u3059",TH:"\u0e17\u0e33\u0e43\u0e2b\u0e49\u0e1e\u0e48\u0e32\u0e22\u0e41\u0e1e\u0e49"},overScoreInfo_2:{CN:"\u7684\u73a9\u5bb6\uff01",CHT:"\u7684\u73a9\u5bb6\uff01",EN:" of the players!",KOR:"\uc720\uc800!",JP:"\u306e\u30d7\u30ec\u30a4\u30e4\u30fc\uff01",TH:"\u0e1c\u0e39\u0e49\u0e40\u0e25\u0e48\u0e19\u0e02\u0e2d\u0e07"},overTitle_1:{CN:"\u6211\u771f\u662f\u592a\u5389\u5bb3\u4e86\uff0c\u6211\u5728",CHT:"\u6211\u771f\u662f\u592a\u53b2\u5bb3\u4e86\uff0c\u6211\u5728",EN:"I'm really great.  I'm in "},overTitle_2:{CN:"\u4e2d,",CHT:"\u4e2d,",EN:". "},getStrForLanguage:function(e,t){if(t=t||n.Tools.getLanguageType(),this[e])return this[e][t]?this[e][t]:this[e].EN;a.weiSan.log("\u6ca1\u6709\u7ffb\u8bd1:"+e)}},cc._RF.pop()},{"../common/Tools":"Tools","../common/weiSanTools":"weiSanTools"}],caidaiTS:[function(e,t,o){"use strict";cc._RF.push(t,"b825aTSm7lAba6tUuhe+cXi","caidaiTS");var n,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,s=(r.property,e("../common/Tools")),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.start=function(){},t.prototype.CaiDai=function(e,t){var o=this,n="C"+s.Tools.random(1,5),a=(s.Tools.setSpriteFrame(this.node,n),!0);this.node.scale=.6*Math.random()+.3,Math.random()<.5?this.node.setPosition(e):(a=!1,this.node.setPosition(t)),this.node.scale;var i=.5*Math.random()+.01,r=90;a?r-=60*Math.random():r+=60*Math.random();var c=cc.v2(Math.cos(r*Math.PI/180),Math.sin(r*Math.PI/180));c.mulSelf(1280*Math.random()+250);var l=cc.spawn(cc.moveBy(i+.05,c.x,c.y).easing(cc.easeQuadraticActionOut()),cc.moveBy(10,cc.v2(300+500*Math.random()-200,400*Math.random()-1500-200))),u=cc.spawn(cc.moveBy(i+.05,c.x,c.y).easing(cc.easeQuadraticActionOut()),cc.moveBy(10,cc.v2(500*Math.random()-300-200,400*Math.random()-1500-200)));a?cc.tween(this.node).then(l).start():cc.tween(this.node).then(u).start();var p=40*Math.random()+15;if(cc.tween(this.node).repeatForever(cc.tween().by(.1,{angle:p})).start(),Math.random()<.8){var d=this.node.scaleX;cc.tween(this.node).delay(i).to(2*i,{scaleX:-d}).start()}cc.tween(this.node).delay(.2*Math.random()+1).to(2*i,{opacity:0}).call(function(){o.node.destroy()}).start()},i([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{"../common/Tools":"Tools"}],weiSanTools:[function(e,t,o){"use strict";cc._RF.push(t,"ff39aoXMlBNuoJpIycuGqrL","weiSanTools");var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=Array(e),a=0;for(t=0;t<o;t++)for(var i=arguments[t],r=0,c=i.length;r<c;r++,a++)n[a]=i[r];return n};Object.defineProperty(o,"__esModule",{value:!0}),o.weiSan=void 0;var a=function(){function e(){}return e.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.isLog&&console.log.apply(console,n([this.logName],e))},e.logTrace=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.isLog&&console.trace.apply(console,n([this.logName],e))},e.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.isLog&&console.error.apply(console,n([this.logName],e))},e.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.isLog&&console.warn.apply(console,n([this.logName],e))},e.initLog=function(){console.log(this.logInfo)},e.isLog=!0,e.logName="\u5fae\u4f1e\u6e38\u620fLog:",e.logInfo="\u672c\u6e38\u620f\u5305\u542b\u7684\u6240\u6709\u5185\u5bb9\uff08\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\uff1a\u4ee3\u7801\u3001\u56fe\u7247\u3001\u89c6\u50cf\u53ca\u58f0\u97f3\u5185\u5bb9\u3001\u540d\u79f0\uff09\u7684\u6240\u6709\u6743\u5f52\u5317\u4eac\u7c73\u515c\u79d1\u6280\u6709\u9650\u516c\u53f8\u6240\u6709\u3002\u4efb\u4f55\u5355\u4f4d\u6216\u4e2a\u4eba\u5c06\u672c\u6e38\u620f\u63d0\u4f9b\u7684\u5185\u5bb9\u4e0e\u670d\u52a1\u7528\u4e8e\u5546\u4e1a\u3001\u76c8\u5229\u3001\u5e7f\u544a\u6027\u7b49\u76ee\u7684\u65f6\uff0c\u9700\u5f81\u5f97\u5317\u4eac\u7c73\u515c\u79d1\u6280\u6709\u9650\u516c\u53f8\u76f8\u5173\u6743\u5229\u4eba\u7684\u4e66\u9762\u8bb8\u53ef\uff1b\u5c06\u672c\u7f51\u7ad9\u63d0\u4f9b\u7684\u5185\u5bb9\u4e0e\u670d\u52a1\u7528\u4e8e\u975e\u5546\u4e1a\u7528\u9014\u65f6\uff0c\u5e94\u9075\u5b88\u8457\u4f5c\u6743\u6cd5\u4ee5\u53ca\u5176\u4ed6\u76f8\u5173\u6cd5\u5f8b\u7684\u89c4\u5b9a\uff0c\u4e0d\u5f97\u4fb5\u72af\u6e38\u620f\u6240\u6709\u8005\u53ca\u76f8\u5173\u6743\u5229\u4eba\u7684\u6743\u76ca\u3002",e}();o.weiSan=a,cc._RF.pop()},{}]},{},["LevelControl","MapControl","ButtonTs","ChickTs","FrameTs","GameTs","ShengTs","Tree","Util","caidaiTS","AdManager","AdManager_H5","AdManager_WX","AdManager_ZJ","ActionTools","AudioTools","LoadTools","Tools","weiSanTools","GameCtrl","InitGame","MainGame","ResArr","EventManager","NetworkManager","PlatformManager","PoolManager","UIManager","GameModel","OtherModel","WordsModel","OverUI","ColorTs","PassTs"]);