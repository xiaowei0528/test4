window.__require=function e(t,a,n){function r(i,c){if(!a[i]){if(!t[i]){var s=i.split("/");if(s=s[s.length-1],!t[s]){var l="function"==typeof __require&&__require;if(!c&&l)return l(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+i+"'")}i=s}var h=a[i]={exports:{}};t[i][0].call(h.exports,function(e){return r(t[i][1][e]||e)},h,h.exports,e,t,a,n)}return a[i].exports}for(var o="function"==typeof __require&&__require,i=0;i<n.length;i++)r(n[i]);return r}({AStar:[function(e,t,a){"use strict";cc._RF.push(t,"7929funNkpGXpo1uZMzR1dF","AStar"),Object.defineProperty(a,"__esModule",{value:!0}),a.AStar={_mapW:0,_mapH:0,cubeArr:null,pathArr:[],openArr:[],closeArr:[],findPath:function(e,t,a){return null==e||null==t?null:(this.startCube=e,this.endCube=t,this.pathArr=[],this.openArr=[],this.closeArr=[],this.targetX=t.column,this.targetY=t.row,this.openArr.push(e),e._G=0,this.setCubeH(e),this.getPathOpen(a),0!=this.pathArr?this.pathArr:(console.log("\u65e0\u6cd5\u5bfb\u8def"),null))},getPathOpen:function(e){if(this.openArr.length>0){var t=this.openArr[this.openArr.length-1];return this.openArr.splice(this.openArr.length-1,1),this.closeArr.push(t),this.getMapBgMinF(t,e)}return this.pathArr=null,!1},isWalkCube:function(e){return!(null!=e.have||this.closeArr.indexOf(e)>-1)},getCubeForXY:function(e,t){return e<0||e>this.cubeArr.length-1?null:t<0||t>this.cubeArr[e].length-1?null:this.cubeArr[e][t]},getAroundForMap:function(e){var t=e.column,a=e.row,n=[],r=this.getCubeForXY(t,a+1);return null!=r&&this.isWalkCube(r)&&(this.setCubeH(r),n.push(r)),null!=(r=this.getCubeForXY(t+1,a))&&this.isWalkCube(r)&&(this.setCubeH(r),n.push(r)),null!=(r=this.getCubeForXY(t,a-1))&&this.isWalkCube(r)&&(this.setCubeH(r),n.push(r)),null!=(r=this.getCubeForXY(t-1,a))&&this.isWalkCube(r)&&(this.setCubeH(r),n.push(r)),n},getMapBgMinF:function(e,t){var a=this.getAroundForMap(e),n=null;if(a.length>0){var r=this.isOpenHaveArr(a);if(n=a[0],0!=r&&r._G+r._H<e._G+e._H&&!t)return this.closeArr.push(e),this.closeArr.push(r),this.openArr.splice(this.openArr.indexOf(r),1),this.getMapBgMinF(r,t)}for(var o=0;o<a.length;o++){var i=a[o];i._H<n._H&&(n=i),i._G=e._G+1,i._P=e}return a.length>0?(a.splice(a.indexOf(n),1),this.closeArr.push(n),n._P=e,this.addOpenArr(a,e),n==this.endCube?(this.addPathArr(n,this.pathArr),this.pathArr.reverse(),!0):void this.getMapBgMinF(n,t)):this.getPathOpen()},isOpenHaveArr:function(e){for(var t=0;t<e.length;t++)if(this.openArr.indexOf(e[t])>-1)return e[t];return!1},addPathArr:function(e,t){e==this.startCube?t.push(e):null!=e._P&&(t.push(e),this.addPathArr(e._P,t))},addOpenArr:function(e,t){for(var a=0;a<e.length;a++){var n=e[a];this.openArr.push(n)}},setCubeH:function(e){var t=this.endCube.position.sub(e.position).mag();e._H=t},generatePath:function(e){for(this.pathArr.push(e);e._P;)e=e._P,this.pathArr.push(e);this.pathArr.reverse()},findPath2:function(e,t){this.pathArr=[],this.openArr=[],this.closeArr=[];for(var a=0;a<this._mapW;a++)for(var n=0;n<this._mapH;n++)this.cubeArr[a][n]._F=0,this.cubeArr[a][n]._G=0,this.cubeArr[a][n]._H=0,this.cubeArr[a][n]._P=null;this.openArr.push(e);for(var r=this.openArr[0];this.openArr.length>0&&r!==t;){if((r=this.openArr[0])===t)return cc.log("Find path success."),this.generatePath(r),this.pathArr;for(a=-1;a<=1;a++)for(n=-1;n<=1;n++)if(0!=a||0!=n){var o=r.column+a,i=r.row+n;if(o>=0&&i>=0&&o<this._mapW&&i<this._mapH&&0==this.cubeArr[o][i].type&&this.closeArr.indexOf(this.cubeArr[o][i])<0){if(Math.abs(a)==Math.abs(n))continue;var c=r._G+Math.sqrt(Math.pow(10*a,2)+Math.pow(10*n,2));(0==this.cubeArr[o][i]._G||this.cubeArr[o][i]._G>c)&&(this.cubeArr[o][i]._G=c,this.cubeArr[o][i]._P=r),this.cubeArr[o][i]._H=Math.abs(t.column-o)+Math.abs(t.row-i),this.cubeArr[o][i]._F=this.cubeArr[o][i]._G+this.cubeArr[o][i]._H,this.openArr.indexOf(this.cubeArr[o][i])<0&&this.openArr.push(this.cubeArr[o][i])}}this.closeArr.push(r),this.openArr.splice(this.openArr.indexOf(r),1),this.openArr.length<=0&&cc.log("Find path failed."),this.openArr.sort(this._sortFunc)}},_sortFunc:function(e,t){return e.f-t.f}},cc._RF.pop()},{}],AniTools:[function(e,t,a){"use strict";cc._RF.push(t,"e6159dpEOhBwogHHMk0hhTE","AniTools");var n={doLabStrAni:function(e,t,a){e.node.stopAllActions(),e.string="";var n=t.split(""),r=0,o=a/n.length;e.node.runAction(cc.sequence(cc.callFunc(function(){e.string=e.string+n[r],r++}),cc.delayTime(o)).repeat(n.length))},gunNumLabAni:function(e,t){var a=parseInt(e.string);if(t!=a){var n=0,r=t-a>=50?50:t-a;e.node.runAction(cc.sequence(cc.callFunc(function(){n>=r-1?e.string=t:(a++,e.string=a),n++}),cc.delayTime(.02)).repeat(r))}},openUIAni:function(e,t,a,n){e.opacity=0,t.scale=0,e.runAction(cc.fadeTo(a,100)),t.runAction(cc.sequence(cc.scaleTo(a,1).easing(cc.easeBackOut()),cc.callFunc(n)))},closeUIAni:function(e,t,a,n){e.runAction(cc.fadeOut(a)),t.runAction(cc.sequence(cc.scaleTo(a,0).easing(cc.easeBackIn()),cc.callFunc(n)))},fireColorArr:["#F5CD4D","#F77986","#D0F057","#7ACCE8","#E365EE"],fireworksAni:function(e,t,a,n){for(var r=0;r<t;r++){var o=ToolsJs.newSprite("fire"+this.returnRanNum(1,4));o.scale=.3+.5*Math.random(),o.position=a,o.color=cc.color(this.fireColorArr[this.returnRanNum(0,this.fireColorArr.length-1)]),e.addChild(o,88);var i=this.returnRanNum(n-15,n+15),c=this.returnRanNum(300,1e3);this.fireObjAni(o,i,c,350,.005*r)}},fireObjAni:function(e,t,a,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=.1+.5*Math.random();e.runAction(cc.rotateBy(o,this.returnRanNum(-360,360)).repeatForever());var i=cc.misc.degreesToRadians(t),c=cc.v2(Math.cos(i)*a,Math.sin(i)*a),s=a/n;e.runAction(cc.sequence(cc.delayTime(r),cc.jumpBy(s,cc.v2(1.5*c.x,0),a,1),cc.removeSelf(!0)))},bombObjAni:function(e,t,a,n,r,o){t=t||this.returnRanNum(-180,180);var i=cc.misc.degreesToRadians(t),c=cc.v2(Math.cos(i)*a,Math.sin(i)*a),s=a/n,l=r?0:e.scale,h=o?0:255;e.runAction(cc.sequence(cc.spawn(cc.scaleTo(s+.1,l),cc.moveBy(s,c).easing(cc.easeQuadraticActionOut()),cc.fadeTo(s+.1,h)),cc.fadeOut(.1),cc.removeSelf(!0)))},playAni:function(e,t){e.getComponent(cc.Animation).play(t)},stopAni:function(e,t){e.getComponent(cc.Animation).stop(t)},addNodeAni:function(e,t,a,n,r,o,i){for(var c=e.getComponent(cc.Animation),s=[],l=n;l<=r;l++){var h=new cc.SpriteFrame(cc.url.raw("resources/"+t+l+".png"));s.push(h)}var u=cc.AnimationClip.createWithSpriteFrames(s,5);u.name=a,u.speed=i,u.wrapMode=o?cc.WrapMode.Loop:cc.WrapMode.Normal,c.addClip(u)},returnRanNum:function(e,t){return e+Math.floor(Math.random()*(t-e+1))}};window.AniTools=n,cc._RF.pop()},{}],Animal:[function(e,t,a){"use strict";cc._RF.push(t,"f98f8PITz9PHKEgxjPyBL1u","Animal");var n=this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,a,n){var r,o=arguments.length,i=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(o<3?r(i):o>3?r(t,a,i):r(t,a))||i);return o>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var o=e("../CoreScript/MapManager"),i=cc._decorator,c=i.ccclass,s=i.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cubeBgOffset=cc.v2(0,0),t.shadowOffset=cc.v2(0,0),t._type=0,t._angle=45,t._pointCount=1,t._popHeartCD=.2,t._lineType=0,t._isUnlock=!1,t._isStandBy=!0,t._isActivate=!1,t._isFail=!1,t._canPopHeart=!1,t.heartPathArr=[],t._shadow=null,t._other=null,t._armature=null,t._armatureDisplay=null,t}return n(t,e),t.prototype.onLoad=function(){this._armatureDisplay=this.getComponent(dragonBones.ArmatureDisplay),this._armature=this._armatureDisplay.armature(),this._armatureDisplay.addEventListener(dragonBones.EventObject.FADE_IN_COMPLETE,this.animationEventHandler,this),this._armatureDisplay.addEventListener(dragonBones.EventObject.FADE_OUT_COMPLETE,this.animationEventHandler,this)},t.prototype.start=function(){},t.prototype.init=function(e){this._type=e},t.prototype.initHeartPath=function(e,t){var a=[];if(t)for(var n=e.length-1;n>-1;n--)a.push(e[n]);else a=e;this.heartPathArr.push(a[0]),a.length>2?(this.heartPathArr.push(a[1]),this.addCurvePath(a[1],a[2],a[0]),this.heartPathArr.push(a[2]),this.heartPathArr.push(a[3])):this.heartPathArr.push(a[1])},t.prototype.addCurvePath=function(e,t,a){var n=cc.v2(e.x,t.y);a.x==e.x&&(n=cc.v2(t.x,e.y));var r=Math.abs(e.y-t.y);if(e.x>t.x)if(e.y>t.y)if(a.x==e.x)for(var o=1;o<=this._pointCount;o++){(i=cc.v2(0,0)).x=n.x+r*Math.cos(cc.misc.degreesToRadians(0-o*this._angle)),i.y=n.y+r*Math.sin(cc.misc.degreesToRadians(0-o*this._angle)),this.heartPathArr.push(i)}else for(o=1;o<=this._pointCount;o++){(i=cc.v2(0,0)).x=n.x+r*Math.cos(cc.misc.degreesToRadians(90+o*this._angle)),i.y=n.y+r*Math.sin(cc.misc.degreesToRadians(90+o*this._angle)),this.heartPathArr.push(i)}else if(a.x==e.x)for(o=1;o<=this._pointCount;o++){(i=cc.v2(0,0)).x=n.x+r*Math.cos(cc.misc.degreesToRadians(0+o*this._angle)),i.y=n.y+r*Math.sin(cc.misc.degreesToRadians(0+o*this._angle)),this.heartPathArr.push(i)}else for(o=1;o<=this._pointCount;o++){(i=cc.v2(0,0)).x=n.x+r*Math.cos(cc.misc.degreesToRadians(270-o*this._angle)),i.y=n.y+r*Math.sin(cc.misc.degreesToRadians(270-o*this._angle)),this.heartPathArr.push(i)}else if(e.y>t.y)if(a.x==e.x)for(o=1;o<=this._pointCount;o++){(i=cc.v2(0,0)).x=n.x+r*Math.cos(cc.misc.degreesToRadians(180+o*this._angle)),i.y=n.y+r*Math.sin(cc.misc.degreesToRadians(180+o*this._angle)),this.heartPathArr.push(i)}else for(o=1;o<=this._pointCount;o++){(i=cc.v2(0,0)).x=n.x+r*Math.cos(cc.misc.degreesToRadians(90-o*this._angle)),i.y=n.y+r*Math.sin(cc.misc.degreesToRadians(90-o*this._angle)),this.heartPathArr.push(i)}else if(a.x==e.x)for(o=1;o<=this._pointCount;o++){(i=cc.v2(0,0)).x=n.x+r*Math.cos(cc.misc.degreesToRadians(180-o*this._angle)),i.y=n.y+r*Math.sin(cc.misc.degreesToRadians(180-o*this._angle)),this.heartPathArr.push(i)}else for(o=1;o<=this._pointCount;o++){var i;(i=cc.v2(0,0)).x=n.x+r*Math.cos(cc.misc.degreesToRadians(270+o*this._angle)),i.y=n.y+r*Math.sin(cc.misc.degreesToRadians(270+o*this._angle)),this.heartPathArr.push(i)}},t.prototype.collCall=function(){var e=this.node.scaleX;cc.tween(this.node).to(.06,{scale:e+.2}).to(.12,{scale:e}).start()},t.prototype.activation=function(){if(!this._isActivate&&!this._isFail)if(this._isStandBy=!1,this._isActivate=!0,this._canPopHeart||(this._canPopHeart=!0),this.unLock(),this._updateAnimation(),this._other.getComponent("Animal").unLock(),3==this._type){var e=this._shadow.scaleX;cc.tween(this._shadow).to(.3,{scale:e+.1}).to(.3,{scale:e}).to(.3,{scale:e+.1}).to(.3,{scale:e}).start()}else if(6==this._type){e=this._shadow.scaleX;cc.tween(this._shadow).by(.3,{position:cc.v2(-5,0)}).delay(1).by(.3,{position:cc.v2(5,0)}).start(),cc.tween(this._shadow).to(.3,{scale:e+.1}).delay(1).to(.3,{scale:e}).start()}else if(4==this._type){e=this._shadow.scaleX;cc.tween(this._shadow).by(.3,{position:cc.v2(-3,0)}).delay(.7).by(.3,{position:cc.v2(3,0)}).start(),cc.tween(this._shadow).to(.3,{scale:e+.1}).delay(.7).to(.3,{scale:e}).start()}else if(5==this._type){e=this._shadow.scaleX;cc.tween(this._shadow).to(.3,{scale:e+.1}).delay(1).to(.3,{scale:e}).start()}},t.prototype.unLock=function(){this._isUnlock||(this._isUnlock=!0,cc.tween(this.node).to(.3,{color:new cc.Color(255,255,255)}).start())},t.prototype.standBy=function(){this._isStandBy||(this._isActivate=!1,this._isStandBy=!0,this._updateAnimation())},t.prototype.fail=function(){this._isFail||(this._isFail=!0,this._isActivate=!1,this._updateAnimation(),cc.tween(this.node).delay(1).to(.5,{color:new cc.Color(100,100,100)}).start())},t.prototype.animationEventHandler=function(e){e.type==dragonBones.EventObject.FADE_IN_COMPLETE?"jihuo"===e.animationState.name&&(this._isActivate=!1):(e.type,dragonBones.EventObject.FADE_OUT_COMPLETE)},t.prototype._updateAnimation=function(){this._isActivate?this._armature.animation.fadeIn("jihuo",0,1,0,"normal").resetToPose=!1:this._isFail?this._armature.animation.fadeIn("shibai",0,0,0,"normal").resetToPose=!1:this._isStandBy&&(this._armature.animation.fadeIn("daiji",0,0,0,"normal").resetToPose=!1)},t.prototype.shootHeart=function(){o.default.Instance.createHeart(this.heartPathArr,this._other,this._lineType)},t.prototype.update=function(e){this._canPopHeart&&(this._popHeartCD-=e,this._popHeartCD<=0&&(this._popHeartCD=.2,o.default.Instance.createSuccessHeart(cc.v2(this.node.x,this.node.y+this.node.height*this.node.scaleY-30),this._lineType)))},r([s(cc.Vec2)],t.prototype,"cubeBgOffset",void 0),r([s(cc.Vec2)],t.prototype,"shadowOffset",void 0),t=r([c],t)}(cc.Component);a.default=l,cc._RF.pop()},{"../CoreScript/MapManager":"MapManager"}],ArrayTools:[function(e,t,a){"use strict";cc._RF.push(t,"d3dc6utBwNBxIqdWiQijfMR","ArrayTools"),Object.defineProperty(a,"__esModule",{value:!0});a.ArrayTools={removeDuplicates:function(e){var t=e.length;if(0===t)return 0;for(var a=1,n=1;a<t;)e[a]!==e[a-1]&&(e[n]=e[a],++n),++a;return n},indexOfArrayVec2:function(e,t){if(0===t.length)return-1;for(var a=0;a<t.length;a++)if(t[a].x===e.x&&t[a].y===e.y)return a;return-1},isArray:function(e){return e.constructor.toString().indexOf("Array")>-1},rotate:function(e,t){var a=e.length;0!==a&&0!==t&&1!==a&&(t%=a,e.reverse(),this.reverse(e,0,t-1),this.reverse(e,t,a-1))},reverse:function(e,t,a){for(;t<a;){var n=e[t];e[t++]=e[a],e[a--]=n}},intersect:function(e,t){e.sort(function(e,t){return e-t}),t.sort(function(e,t){return e-t});for(var a=[],n=0,r=0;n<e.length&&r<t.length;)e[n]==t[r]?(a.push(e[n]),n++,r++):e[n]>t[r]?r++:n++;return a},intersectMap:function(e,t){for(var a={},n=[],r=0,o=e;r<o.length;r++){var i=o[r];a[i]?a[i]++:a[i]=1}for(var c=0,s=t;c<s.length;c++){var l=s[c];a[l]>0&&(n.push(l),a[l]--)}return n},plusOne:function(e){for(var t=e.length-1;t>-1;t--)if(e[t]++,e[t]%=10,0!=e[t])return e;return[1].concat(e)},moveZeroes:function(e){if(null!=e&&0!=e.length){for(var t=0,a=0;a<e.length;a++)0!=e[a]&&(e[t++]=e[a]);for(;t<e.length;)e[t++]=0}},twoSum:function(e,t){var a=new Map,n=[];e.map(function(e,t){a.set(e,t)});for(var r=0;r<e.length-1;r++)if(a.has(t-e[r])&&a.get(t-e[r])!=r)return n.push(r,a.get(t-e[r])),n},isValidSudoku:function(e){for(var t=new Array(9).fill(null).map(function(){return new Set}),a=new Array(9).fill(null).map(function(){return new Set}),n=new Array(9).fill(null).map(function(){return new Set}),r=0;r<9;++r)for(var o=0;o<9;++o)if("."!==e[r][o]){var i=e[r][o],c=this.getBlockIndex(r,o);if(a[r].has(i)||t[o].has(i)||n[c].has(i))return!1;a[r].add(i),t[o].add(i),n[c].add(i)}return!0},getBlockIndex:function(e,t){return 3*Math.floor(e/3)+Math.floor(t/3)}},cc._RF.pop()},{}],DataManager:[function(e,t,a){"use strict";cc._RF.push(t,"6d5e9avRG5Ne6dIp9HaS/Cn","DataManager");var n=this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,a,n){var r,o=arguments.length,i=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(o<3?r(i):o>3?r(t,a,i):r(t,a))||i);return o>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,c=o.property,s=function(){return function(){this.playNum=0,this.isFinishGuide=!1,this.score=0,this.highScore=0,this.playLevel=1,this.mapData=null}}(),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gameName="DefaultName",t.playerData=null,t}var a;return n(t,e),a=t,t.prototype.onLoad=function(){null!=a.Instance&&a.Instance.isValid&&a.Instance.destroy(),a.Instance=this,a.Instance.playerData=JSON.parse(cc.sys.localStorage.getItem(this.gameName+"playerData")),null==this.playerData&&(this.playerData=new s,a.Save())},t.GetPlayerData=function(){return a.Instance.playerData},t.SetLevel=function(e){a.Instance.playerData.playLevel=e,a.Save()},t.GetLevel=function(){return a.Instance.playerData.playLevel},t.SetPlayNum=function(e){a.Instance.playerData.playNum=e,a.Save()},t.GetPlayNum=function(){return a.Instance.playerData.playNum},t.SetPlayerScore=function(e){a.Instance.playerData.score=e,a.Save()},t.GetPlayerScore=function(){return a.Instance.playerData.score},t.SetPlayerHighScore=function(e){a.Instance.playerData.highScore=e,a.Save()},t.GetPlayerHighScore=function(){return a.Instance.playerData.highScore},t.SetMapData=function(e){a.Instance.playerData.mapData=e,a.Save()},t.GetMapData=function(){return a.Instance.playerData.mapData},t.Load=function(){a.Instance.playerData=JSON.parse(cc.sys.localStorage.getItem(a.Instance.gameName+"playerData"))},t.Save=function(){cc.sys.localStorage.setItem(a.Instance.gameName+"playerData",JSON.stringify(a.Instance.playerData))},t.Instance=null,r([c(cc.String)],t.prototype,"gameName",void 0),t=a=r([i],t)}(cc.Component);a.default=l,cc._RF.pop()},{}],FloatScore:[function(e,t,a){"use strict";cc._RF.push(t,"2f3b7KWUHFPKaAtPdK0kv4m","FloatScore");var n=this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,a,n){var r,o=arguments.length,i=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(o<3?r(i):o>3?r(t,a,i):r(t,a))||i);return o>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,c=o.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.add=null,t.word=null,t.score=null,t.wordSpriteFrame=[],t.ding=null,t.colorArr=[],t}return n(t,e),t.prototype.onLoad=function(){this.wordSprite=this.word.getComponent(cc.Sprite),this.colorArr=[new cc.Color(0,0,255),new cc.Color(255,0,255),new cc.Color(255,255,0)]},t.prototype.start=function(){},t.prototype.init=function(e){cc.audioEngine.play(this.ding,!1,.5),10==e?(this.wordSprite.spriteFrame=this.wordSpriteFrame[0],this.add.color=this.colorArr[0],this.score.node.color=this.colorArr[0]):30==e?(this.wordSprite.spriteFrame=this.wordSpriteFrame[1],this.add.color=this.colorArr[1],this.score.node.color=this.colorArr[1]):50==e&&(this.wordSprite.spriteFrame=this.wordSpriteFrame[2],this.add.color=this.colorArr[2],this.score.node.color=this.colorArr[2]),this.score.string=e.toString(),this.anim(e),this.node.setScale(2)},t.prototype.anim=function(e){this.node.runAction(cc.sequence(cc.spawn(cc.scaleTo(.3,.7),cc.fadeIn(.3)),cc.scaleTo(.5,1),cc.scaleTo(.5,.7),cc.scaleTo(.5,1),cc.scaleTo(.5,.7),cc.callFunc(function(){this.MainGame.gainScore(e)},this),cc.fadeOut(.3),cc.callFunc(function(){this.MapCon.floatScorePool.put(this.node)},this)))},r([c(cc.Node)],t.prototype,"add",void 0),r([c(cc.Node)],t.prototype,"word",void 0),r([c(cc.Label)],t.prototype,"score",void 0),r([c(cc.SpriteFrame)],t.prototype,"wordSpriteFrame",void 0),r([c({type:cc.AudioClip})],t.prototype,"ding",void 0),t=r([i],t)}(cc.Component);a.default=s,cc._RF.pop()},{}],FrameAnimManager:[function(e,t,a){"use strict";cc._RF.push(t,"42ac2oufkFAMrO+O49bAzzj","FrameAnimManager");var n=this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,a,n){var r,o=arguments.length,i=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(o<3?r(i):o>3?r(t,a,i):r(t,a))||i);return o>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,c=(o.property,function(){return function(){this.sprite=null,this.animName=null,this.spriteFrameArr=[],this.isLoop=!1,this.canPlay=!1,this.autoDestroy=!1,this.playTime=0,this.duration=0}}()),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._canPlayAnim=!1,t.currentFrameAnimList=[],t}var a;return n(t,e),a=t,t.prototype.onLoad=function(){null!=a.Instance&&a.Instance.destroy(),a.Instance=this},t.prototype.start=function(){},t.prototype.addFrameAnim=function(e,t,a,n,r,o){var i=new c;return i.sprite=e,i.animName=t,i.spriteFrameArr=a,i.isLoop=n,i.autoDestroy=r,i.duration=o,this.currentFrameAnimList.push(i),this.currentFrameAnimList.indexOf(i)},t.prototype.startPlayAnim=function(e){this._canPlayAnim||(this._canPlayAnim=!0),e<=this.currentFrameAnimList.length-1&&e>=0&&(this.currentFrameAnimList[e].canPlay=!0)},t.prototype.playFrameAnim=function(e,t){var a=this.currentFrameAnimList[e];a.playTime+=t;var n=Math.floor(a.playTime/a.duration);if(a.isLoop){for(;n>=a.spriteFrameArr.length;)n-=a.spriteFrameArr.length,a.playTime-=a.duration*a.spriteFrameArr.length;a.sprite.spriteFrame=a.spriteFrameArr[n]}else{if(n>=a.spriteFrameArr.length)return a.autoDestroy?(a.canPlay=!1,a.playTime=0,void this.currentFrameAnimList.splice(e,1)):(a.sprite.spriteFrame=a.spriteFrameArr[a.spriteFrameArr.length-1],a.canPlay=!1,void(a.playTime=0));a.sprite.spriteFrame=a.spriteFrameArr[n]}},t.prototype.stopFrameAnim=function(e){var t=this.currentFrameAnimList[e];t.sprite.spriteFrame=t.spriteFrameArr[0],t.canPlay=!1,t.playTime=0},t.prototype.update=function(e){if(this._canPlayAnim)for(var t=0;t<this.currentFrameAnimList.length;t++)this.currentFrameAnimList[t].canPlay&&this.playFrameAnim(t,e)},t.Instance=null,t=a=r([i],t)}(cc.Component);a.default=s,cc._RF.pop()},{}],GameConfig:[function(e,t,a){"use strict";cc._RF.push(t,"f0663sWtfNKCKOL+Hvnt0cI","GameConfig");var n={GameClubButton:null,GameScene:null,launchScene:null,Bros:null,caS:null,MAIN_MENU_NUM:"Classic",gameScore:0,standScore:16,GAME_OVER_BOOL:!0,gameMaxScore:0,canPlayMusic:!0,firstInGame:!0,publicGameBool:!1,mapDataConfig:[{_mapW:3,_mapH:3,_cubeWidth:240,_spacing:0,_mapOffsetY:0,_curScale:.8,animalsPosArr:[cc.v2(1,0),cc.v2(1,2)],animalsTypeArr:[1,1]},{_mapW:3,_mapH:3,_cubeWidth:240,_spacing:0,_mapOffsetY:0,_curScale:.8,animalsPosArr:[cc.v2(1,0),cc.v2(1,2),cc.v2(0,1),cc.v2(2,1)],animalsTypeArr:[1,1,2,2]},{_mapW:4,_mapH:4,_cubeWidth:180,_spacing:0,_mapOffsetY:0,_curScale:.7,animalsPosArr:[cc.v2(0,2),cc.v2(3,2),cc.v2(1,0),cc.v2(1,3),cc.v2(2,0),cc.v2(2,3)],animalsTypeArr:[1,1,2,2,3,3]},{_mapW:4,_mapH:4,_cubeWidth:180,_spacing:0,_mapOffsetY:0,_curScale:.7,animalsPosArr:[cc.v2(0,2),cc.v2(3,1),cc.v2(1,0),cc.v2(1,3),cc.v2(2,0),cc.v2(3,2)],animalsTypeArr:[1,1,2,2,3,3]},{_mapW:4,_mapH:4,_cubeWidth:180,_spacing:0,_mapOffsetY:0,_curScale:.7,animalsPosArr:[cc.v2(0,1),cc.v2(3,1),cc.v2(1,0),cc.v2(1,3),cc.v2(2,0),cc.v2(0,2)],animalsTypeArr:[1,1,2,2,3,3]},{_mapW:4,_mapH:4,_cubeWidth:180,_spacing:0,_mapOffsetY:0,_curScale:.7,animalsPosArr:[cc.v2(1,3),cc.v2(3,1),cc.v2(0,2),cc.v2(3,3),cc.v2(2,0),cc.v2(2,3)],animalsTypeArr:[1,1,2,2,3,3]},{_mapW:4,_mapH:4,_cubeWidth:180,_spacing:0,_mapOffsetY:0,_curScale:.7,animalsPosArr:[cc.v2(0,0),cc.v2(2,3),cc.v2(0,2),cc.v2(3,3),cc.v2(1,3),cc.v2(3,1)],animalsTypeArr:[1,1,2,2,3,3]},{_mapW:4,_mapH:4,_cubeWidth:180,_spacing:0,_mapOffsetY:0,_curScale:.7,animalsPosArr:[cc.v2(0,2),cc.v2(3,3),cc.v2(0,1),cc.v2(3,1),cc.v2(0,0),cc.v2(2,3)],animalsTypeArr:[1,1,2,2,3,3]},{_mapW:4,_mapH:4,_cubeWidth:180,_spacing:0,_mapOffsetY:0,_curScale:.7,animalsPosArr:[cc.v2(0,0),cc.v2(2,3),cc.v2(0,2),cc.v2(3,3),cc.v2(0,1),cc.v2(1,3)],animalsTypeArr:[1,1,2,2,3,3]},{_mapW:4,_mapH:4,_cubeWidth:180,_spacing:0,_mapOffsetY:0,_curScale:.7,animalsPosArr:[cc.v2(0,0),cc.v2(1,3),cc.v2(0,2),cc.v2(3,1),cc.v2(2,0),cc.v2(3,2)],animalsTypeArr:[1,1,2,2,3,3]},{_mapW:4,_mapH:4,_cubeWidth:180,_spacing:0,_mapOffsetY:0,_curScale:.7,animalsPosArr:[cc.v2(1,0),cc.v2(3,3),cc.v2(2,0),cc.v2(0,2),cc.v2(0,1),cc.v2(3,1)],animalsTypeArr:[1,1,2,2,3,3]},{_mapW:4,_mapH:4,_cubeWidth:180,_spacing:0,_mapOffsetY:0,_curScale:.7,animalsPosArr:[cc.v2(0,0),cc.v2(1,3),cc.v2(0,2),cc.v2(3,3),cc.v2(0,1),cc.v2(3,0)],animalsTypeArr:[1,1,2,2,3,3]},{_mapW:4,_mapH:4,_cubeWidth:180,_spacing:0,_mapOffsetY:0,_curScale:.7,animalsPosArr:[cc.v2(0,2),cc.v2(3,1),cc.v2(2,0),cc.v2(3,2),cc.v2(1,0),cc.v2(2,3)],animalsTypeArr:[1,1,2,2,3,3]},{_mapW:4,_mapH:4,_cubeWidth:180,_spacing:0,_mapOffsetY:0,_curScale:.7,animalsPosArr:[cc.v2(1,0),cc.v2(2,3),cc.v2(0,1),cc.v2(3,0),cc.v2(2,0),cc.v2(0,2)],animalsTypeArr:[1,1,2,2,3,3]},{_mapW:4,_mapH:4,_cubeWidth:180,_spacing:0,_mapOffsetY:0,_curScale:.7,animalsPosArr:[cc.v2(0,1),cc.v2(3,0),cc.v2(0,2),cc.v2(3,3),cc.v2(0,0),cc.v2(2,3)],animalsTypeArr:[1,1,2,2,3,3]},{_mapW:4,_mapH:4,_cubeWidth:180,_spacing:0,_mapOffsetY:0,_curScale:.7,animalsPosArr:[cc.v2(0,0),cc.v2(2,3),cc.v2(0,1),cc.v2(1,3),cc.v2(0,2),cc.v2(3,0)],animalsTypeArr:[1,1,2,2,3,3]},{_mapW:4,_mapH:4,_cubeWidth:180,_spacing:0,_mapOffsetY:0,_curScale:.7,animalsPosArr:[cc.v2(0,3),cc.v2(3,1),cc.v2(2,0),cc.v2(3,3),cc.v2(0,0),cc.v2(1,3)],animalsTypeArr:[1,1,2,2,3,3]},{_mapW:4,_mapH:4,_cubeWidth:180,_spacing:0,_mapOffsetY:0,_curScale:.7,animalsPosArr:[cc.v2(0,2),cc.v2(3,2),cc.v2(0,1),cc.v2(3,1),cc.v2(1,0),cc.v2(1,3),cc.v2(2,0),cc.v2(2,3)],animalsTypeArr:[1,1,2,2,3,3,4,4]},{_mapW:4,_mapH:4,_cubeWidth:180,_spacing:0,_mapOffsetY:0,_curScale:.7,animalsPosArr:[cc.v2(0,3),cc.v2(3,2),cc.v2(0,0),cc.v2(1,3),cc.v2(0,1),cc.v2(3,0),cc.v2(2,0),cc.v2(3,3)],animalsTypeArr:[1,1,2,2,3,3,4,4]},{_mapW:4,_mapH:5,_cubeWidth:180,_spacing:0,_mapOffsetY:0,_curScale:.7,animalsPosArr:[cc.v2(0,0),cc.v2(1,4),cc.v2(0,3),cc.v2(3,3),cc.v2(2,1),cc.v2(3,4),cc.v2(0,2),cc.v2(3,2)],animalsTypeArr:[1,1,2,2,3,3,4,4]}],ranLinkData:null,recGameData:null,InfoData:null,endShow0:null,endShow1:null,endShow2:null,endShow3:null,infoGameName:null,showText:null,startText:null,moreGameText:null,playAgainText:null,playNum:0,noTouchBool:!0,returnRanNum:function(e,t){return e+Math.floor(Math.random()*(t-e+1))}};t.exports=n,cc._RF.pop()},{}],GameData:[function(e,t,a){"use strict";cc._RF.push(t,"aff05VcW7lIjZOYTq3erU7E","GameData");var n={isOnline:!1,getData:function(){if(!this.isOnline){var e=cc.sys.localStorage.getItem("MaskDefenseBattle_1");return null==e||""==e?{gameBeginnerGuide:!0,gameMaxScore:0}:JSON.parse(e)}},setData:function(e,t){if(!this.isOnline){var a={gameBeginnerGuide:e,gameMaxScore:t};cc.sys.localStorage.setItem("MaskDefenseBattle_1",JSON.stringify(a))}}};t.exports=n,cc._RF.pop()},{}],GameTools:[function(e,t,a){"use strict";cc._RF.push(t,"9e4e7c2meZG2L0zrZOXU2Q0","GameTools");var n={localConvertWorldPointAR:function(e){return e?e.convertToWorldSpaceAR(cc.v2(0,0)):null},localConvertWorldPoint:function(e){return e?e.convertToWorldSpace(cc.v2(0,0)):null},worldConvertLocalPointAR:function(e,t){return e?e.convertToNodeSpaceAR(t):null},worldConvertLocalPoint:function(e,t){return e?e.convertToNodeSpace(t):null},convetOtherNodeSpaceAR:function(e,t){if(!e||!t)return null;var a=this.localConvertWorldPointAR(e);return this.worldConvertLocalPointAR(t,a)},convetOtherNodeSpace:function(e,t){if(!e||!t)return null;var a=this.localConvertWorldPoint(e);return this.worldConvertLocalPoint(t,a)},LocalCoordinatesToTheWorldAR:function(e,t){return e?e.convertToWorldSpaceAR(t):null},LocalCoordinatesToTheWorld:function(e,t){return e?e.convertToWorldSpace(t):null},vecEquals:function(e,t){return e.x==t.x&&e.y==t.y},PlayBgm:function(e,t){var a=this.bgmId;cc.loader.loadRes(this.loadMusicPath+e,cc.AudioClip,function(e,n){e?cc.error(e.message||e):a.id=cc.audioEngine.play(n,!0,t)})},getRndInteger:function(e,t,a){return a?Math.floor(Math.random()*(t-e+1))+e:Math.random()*(t-e)+e}};t.exports=n,cc._RF.pop()},{}],GameUiTools:[function(e,t,a){"use strict";cc._RF.push(t,"b21e8tF461OFalpptyeuAE2","GameUiTools");e("GameConfig");var n={newSprite:function(e,t){var a=new cc.Node;return t?(e=e.split(".")[0],a.addComponent(cc.Sprite).spriteFrame=GameTools.love2048FrameCache.getSpriteFrame(e)):a.addComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame("res/raw-assets/resources/"+e),a},setNodeSpriteFrame:function(e,t){e.getComponent(cc.Sprite).spriteFrame=GameTools.love2048FrameCache.getSpriteFrame(t)},setButtonClickEvents:function(e,t,a,n,r){var o=new Array;void 0==t.length?o[0]=t:o=t;for(var i=0;i<o.length;i++){var c=new cc.Component.EventHandler;c.target=e.node,c.component=e.node.name,c.handler=a,void 0==t.length?c.customEventData=n:c.customEventData=i;var s=o[i].addComponent(cc.Button);s.clickEvents.push(c),(void 0==r||r)&&(s.transition=cc.Button.Transition.SCALE,s.duration=.1,s.zoomScale=1.2)}},scheduleOnce:function(e,t,a){e.runAction(cc.sequence(cc.delayTime(a),cc.callFunc(t,e)))},loadingScene:function(e,t){t?cc.loader.loadRes("panel/LoadingLayer",function(t,a){var n=cc.instantiate(a);cc.director.getScene().children[0].addChild(n),cc.director.preloadScene(e,function(){cc.director.loadScene(e)})}):cc.director.preloadScene(e,function(){cc.director.loadScene(e)})},loadingLayer:function(e){cc.loader.loadRes(e,function(e,t){if(!e){var a=cc.instantiate(t);cc.director.getScene().children[0].addChild(a,100)}})}};t.exports=n,cc._RF.pop()},{GameConfig:"GameConfig"}],Heart:[function(e,t,a){"use strict";cc._RF.push(t,"ea94dfVQ15PV7a+I/HpW2ev","Heart");var n=this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,a,n){var r,o=arguments.length,i=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(o<3?r(i):o>3?r(t,a,i):r(t,a))||i);return o>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var o=e("../CoreScript/MapManager"),i=cc._decorator,c=i.ccclass,s=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._moveSpeed=500,t._streakCD=0,t._type=0,t._canMove=!1,t._canSuccess=!1,t._canColl=!0,t._dead=!1,t._canNodePlayBrokenAnim=!0,t._callNode=null,t.pathArr=[],t}return n(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.onCollisionEnter=function(e,t){this._dead||o.default.Instance._canSuccess||(o.default.Instance.createImpact(this.node.getPosition()),this._canNodePlayBrokenAnim=!1,e.node.getComponent("Heart")._canNodePlayBrokenAnim=!1,this.node.opacity=0,e.node.opacity=0,o.default.Instance.createBrokenHeart(this.node.position,this.node.angle),o.default.Instance.createBrokenHeart(e.node.position,e.node.angle),o.default.Instance.gameEnd())},t.prototype.remove=function(){var e=this;cc.tween(this.node).to(.06,{scale:1.2*this.node.scaleX},{easing:"sineOut"}).to(.12,{scale:0},{easing:"sineIn"}).call(function(){o.default.Instance.removeHeart(e.node)}).removeSelf().start()},t.prototype.generatePath=function(e){},t.prototype.setSpeed=function(){if(this.pathArr.length>1){for(var e=this.pathArr[0].sub(this.node.getPosition()).mag(),t=1;t<this.pathArr.length;t++)e+=this.pathArr[t].sub(this.pathArr[t-1]).mag();this._moveSpeed=Math.floor(e)}else this._moveSpeed=Math.floor(this.pathArr[0].sub(this.node.getPosition()).mag())},t.prototype.update=function(e){var t=this;if(!this._dead&&(this._streakCD-=e,this._streakCD<=0&&(this._streakCD=.05,o.default.Instance.createPoint(this.node.getPosition(),this._type)),this._canMove))if(0!=this.pathArr.length){this._canMove=!1;var a=this.pathArr[0],n=a.sub(this.node.position),r=n.mag()>20?n.mag()/this._moveSpeed:n.mag()/(10*this._moveSpeed);this.node.angle=cc.misc.radiansToDegrees(Math.atan2(n.y,n.x))-90,cc.tween(this.node).to(r,{position:a}).call(function(){t.pathArr.shift(),t._canMove=!0}).start()}else{if(this._canMove=!1,o.default.Instance._canCall)cc.tween(this.node).call(function(){o.default.Instance.createHeartBoom(t.node.getPosition(),t._type),t._callNode.getComponent("Animal").collCall()}).to(.06,{scale:1.2*this.node.scaleX},{easing:"sineOut"}).to(.12,{scale:0},{easing:"sineIn"}).call(function(){t._callNode.getComponent("Animal").activation()}).delay(.3).call(function(){t._callNode.getComponent("Animal").shootHeart(),o.default.Instance.removeHeart(t.node)}).removeSelf().start();else o.default.Instance.createHeartBoom(this.node.getPosition(),this._type),this._callNode.getComponent("Animal").collCall(),this.remove()}},t=r([c],t)}(cc.Component));a.default=s,cc._RF.pop()},{"../CoreScript/MapManager":"MapManager"}],HttpManagerJs:[function(e,t,a){"use strict";var n;function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}cc._RF.push(t,"197e1hfNnxIcJx73V3VhUxY","HttpManagerJs");var o=e("GameConfig"),i=(r(n={URL:"http://g.i8box.com/Service/Share/index",cacheList:null,isBusy:null,req:null,perform:null,retGameId:0},"cacheList",[]),r(n,"ctor",function(){}),r(n,"checkHave",function(){this.isBusy||this.sendOne()}),r(n,"httpInitUrl",function(e){var t=window.location.href,a=t.substring(0,t.lastIndexOf("//")+2)+window.location.host+"/Service/Share/index";this.URL=a,console.log("data",this.URL),this.retGameId=e}),r(n,"send",function(e,t,a,n){this.cacheList.push({type:e,data:t,func:a,target:n}),this.isBusy||this.sendOne()}),r(n,"sendOne",function(){if(0!=this.cacheList.length){this.isBusy=!0,this.perform=this.cacheList.shift(),this.req=cc.loader.getXMLHttpRequest(),this.req.onreadystatechange=this.onDataHandler.bind(this),this.req.onerror=this.onErrorHandler.bind(this),this.req.ontimeout=this.onTimeoutHandler.bind(this),this.req.timeout=2e3,cc.log("pos",this.URL),this.req.open("POST",this.URL),this.req.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");var e=this.returnLanguage();console.log("gameIdid",this.retGameId);var t=this.retGameId,a={type:this.perform.type,gid:t,mid:null,data:this.perform.data,languageType:e},n="send="+JSON.stringify(a);this.req.send(n)}}),r(n,"onDataHandler",function(){if(404!=this.req.status){if(4==this.req.readyState&&this.req.status>=200&&this.req.status<=207&&this.req.responseText){var e=JSON.parse(this.req.responseText);this.isBusy=!1,this.perform.target?this.perform.func.call(this.perform.target,e.error,e.data,e.commendGame,e.gameInfo):this.perform.func(e)}}else{var t=o.launchScene,a=o.Bros;o.caS;cc.director.loadScene(t,null,function(){if(a){"";var e=document.getElementById("GameDiv");e&&(e.style.backgroundImage="")}cc.loader.onProgress=null,console.log("Success to load scene: "+t)})}}),r(n,"returnLanguage",function(){return(""+window.navigator.language).toLocaleLowerCase()}),r(n,"onErrorHandler",function(){cc.log("\u7f51\u7edc\u9519\u8bef"),this.isBusy=!1,this.perform.target?this.perform.func.call(this.perform.target,-1):this.perform.func(-1)}),r(n,"onTimeoutHandler",function(){cc.log("\u8bf7\u6c42\u8d85\u65f6"),this.isBusy=!1,this.perform.target?this.perform.func.call(this.perform.target,-1):this.perform.func(-1)}),r(n,"clearAll",function(){for(var e=this.cacheList.length,t=0;t<e;t++){var a=this.cacheList[t];a&&(a.target?a.func.call(a.target,-1):a.func(-1))}this.cacheList.length=0}),n);t.exports=i,cc._RF.pop()},{GameConfig:"GameConfig"}],LanguageSetJs:[function(e,t,a){"use strict";cc._RF.push(t,"4754e8KuPZJCqklCNyKpG29","LanguageSetJs");t.exports={language_1:{game_name:"\u300c\u5fc3\u8fde\u5fc3\u300d",game_name1:"\u5fc3\u8fde\u5fc3",game_info:"\u9010\u6b65\u70b9\u4eae\u52a8\u7269\uff0c\u53d1\u5c04\u5fc3\uff0c\u6ce8\u610f\u4e0d\u8981\u8ba9\u5fc3\u649e\u5230\u4e00\u8d77\u3002",txtStart:"\u5f00\u59cb",txtMore:"\u66f4\u591a\u6e38\u620f",txtAgain:"\u518d\u73a9\u4e00\u6b21",txtShare1:"\u5728\u6e38\u620f\u4e2d ",txtShare2:"\u5f97\u5206\u4e86\uff0c\u597d\u554a!\u4f60\u548c\u6211\u4e00\u8d77\u6765\u6bd4\u8d5b!",bgRgb:"#3698C5",gameT1:"\u5173\u6ce8\u6211\u4eec",gameT2:"\u7eb8\u724c\u63a5\u9f99",gameT3:"\u9526\u4e0a\u6dfb\u82b1",gameUrl1:"http://g.regogame.com/game/9/",gameUrl2:"http://g.regogame.com/game/3/",gameT11:"\u5173\u6ce8\u5fae\u4fe1",gameT12:"\u5173\u6ce8Kakao",gameT13:"\u5173\u6ce8Line",gameEndL:"\u6e38 \u620f \u7ed3 \u675f",gameEndL1:"\u7a0d \u5019 \u67e5 \u770b \u5206 \u6570"},language_2:{game_name:"\u300cHeart To Heart\u300d",game_name1:"Heart To Heart",game_info:"Gradually light up the animals, launch their hearts, and be careful not to let the hearts collide.",txtStart:"Start",txtMore:"More Game",txtAgain:"Play Again",txtShare1:"In Game ",txtShare2:" Let's play together!",bgRgb:"#3698C5",gameT1:"Follow Us",gameT2:"Thousand Flower",gameT3:"Eliminate Star",gameUrl1:"http://g.fromgame.com/game/53",gameUrl2:"http://g.fromgame.com/game/13",gameT11:"Focus WeChat",gameT12:"Focus Kakao",gameT13:"Focus Line",gameEndL:"Game OVer",gameEndL1:"View the score later"}},cc._RF.pop()},{}],LoadSceneJs:[function(e,t,a){"use strict";cc._RF.push(t,"3ef908fwfNIwJsOjET8tCh2","LoadSceneJs");var n={goToCover:function(e,t,a,n,r){var o=e;o=null==o||void 0==o||e,console.log("LoadBoolBeforeLoadS",o),this.needShow=!1,o&&o?(this.needShow=!0,showMyAds()):this.needShow=!1,this.needShow?(void 0==preloader&&this.startGoToGame(a,n,r),resCompleteFlag=!0,adCompleteFlag&&resCompleteFlag&&this.startGoToGame(a,n,r)):this.startGoToGame(a,n,r)},startGoToGame:function(e,t,a){console.log("goToScene"),noAdGoToScene()}};t.exports=n,cc._RF.pop()},{}],MainCamera:[function(e,t,a){"use strict";cc._RF.push(t,"a57fao1i6NBBK8xvlX1q/NC","MainCamera");var n=this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,a,n){var r,o=arguments.length,i=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(o<3?r(i):o>3?r(t,a,i):r(t,a))||i);return o>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var o=e("../commonJs/GameConfig"),i=cc._decorator,c=i.ccclass,s=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.MainGame=null,t}var a;return n(t,e),a=t,t.prototype.onLoad=function(){null!=a.Instance&&a.Instance.destroy(),a.Instance=this,this.MainGame=cc.find("Canvas").getComponent("MainGameJS")},t.prototype.start=function(){},Object.defineProperty(t.prototype,"borderTop",{get:function(){return this.node.y+this.MainGame.gameHeight/2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"borderBottom",{get:function(){return this.node.y-this.MainGame.gameHeight/2},enumerable:!0,configurable:!0}),t.prototype.addTouchEvents=function(){this.node.on(cc.Node.EventType.TOUCH_START,function(e){o.GAME_OVER_BOOL&&o.noTouchBool&&cc.log("---=====touchStart=====---")},this)},t.prototype.reMoveTouchEvents=function(){this.node.off(cc.Node.EventType.TOUCH_START)},t.prototype.shake=function(){var e=this.node.getPosition();this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.moveBy(.03,cc.v2(8,7)),cc.moveBy(.03,cc.v2(-9,7)),cc.moveBy(.03,cc.v2(-13,3)),cc.moveBy(.03,cc.v2(10,-6)),cc.moveBy(.03,cc.v2(-5,5)),cc.moveBy(.03,cc.v2(13,-8)),cc.moveBy(.03,cc.v2(-14,-10)),cc.moveBy(.03,cc.v2(3,10)),cc.moveTo(.03,e)))},t.prototype.update=function(e){},t.Instance=null,t=a=r([c],t)}(cc.Component));a.default=s,cc._RF.pop()},{"../commonJs/GameConfig":"GameConfig"}],MainGameJS:[function(e,t,a){"use strict";cc._RF.push(t,"0e7a8SkMLxEY7nCB1Bqi8WZ","MainGameJS");var n=e("GameConfig"),r=e("GameUiTools"),o=e("MainManage"),i=e("GameData");e("GameTools");cc.Class({extends:cc.Component,properties:{UIManager:cc.Node,MapManager:cc.Node,bgLayer:cc.Node,sceneScore:cc.Label,mute:{type:cc.AudioClip,default:null},over:{type:cc.AudioClip,default:null}},onLoad:function(){this.platFromNum=1,this.judgeCurPlatform(),this.adapterScreen(),this.UICon=this.UIManager.getComponent("UIManager"),this.MapCon=this.MapManager.getComponent("MapManager"),this.CollisionFun(),this.gameWidth=cc.winSize.width,this.gameHeight=cc.winSize.height,this.sceneScore.node.y=this.gameHeight/2-90,this.bgLayer.height=this.gameHeight,this.bgLayer.children[0].y=-this.gameHeight/2,r.loadingLayer("panel/LinkIconSpr"),cc.audioEngine.play(this.mute,!1,0)},CollisionFun:function(){cc.director.getPhysicsManager().enabled=!0,this.manager=cc.director.getCollisionManager(),this.manager.enabled=!0,this.manager.enabledDebugDraw=!0,cc.director.getPhysicsManager().debugDrawFlags=cc.PhysicsManager.DrawBits.e_aabbBit|cc.PhysicsManager.DrawBits.e_pairBit|cc.PhysicsManager.DrawBits.e_centerOfMassBit|cc.PhysicsManager.DrawBits.e_jointBit|cc.PhysicsManager.DrawBits.e_shapeBit,cc.director.getPhysicsManager().debugDrawFlags=0,cc.director.getCollisionManager().enabledDebugDraw=!1},judgeCurPlatform:function(){console.log(navigator.userAgent);var e=function(){var e=navigator.userAgent,t=/(?:Windows Phone)/.test(e),a=/(?:SymbianOS)/.test(e)||t,n=/(?:Android)/.test(e),r=/(?:Firefox)/.test(e),o=(/(?:Chrome|CriOS)/.test(e),/(?:iPad|PlayBook)/.test(e)||n&&!/(?:Mobile)/.test(e)||r&&/(?:Tablet)/.test(e)),i=/(?:iPhone)/.test(e)&&!o;return{isTablet:o,isPhone:i,isAndroid:n,isPc:!i&&!n&&!a}}();e.isAndroid||e.isPhone?this.platFromNum=1:e.isTablet?this.platFromNum=2:e.isPc&&(this.platFromNum=3)},adapterScreen:function(){var e=cc.find("Canvas").getComponent(cc.Canvas);2==this.platFromNum||3==this.platFromNum?(e.fitWidth=!0,e.fitHeight=!0):(e.fitWidth=!0,e.fitHeight=!1)},init:function(){this.addTouchEvents(),this.gameOver=!1,this.touchId=null},PlayBgm:function(e,t){var a=this;cc.loader.loadRes("music/"+e,cc.AudioClip,function(e,n){if(e)cc.error(e.message||e);else{var r=cc.audioEngine.play(n,!0,t);a.bgm=r}})},addTouchEvents:function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_START,function(t){if(n.GAME_OVER_BOOL&&n.noTouchBool)return e.touchId=t.touch._id,e.MapCon.setTouchStartCube(t.getLocation()),!0},this),this.node.on(cc.Node.EventType.TOUCH_END,this.on_touch_end,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.on_touch_cancel,this)},on_touch_end:function(e){n.GAME_OVER_BOOL&&n.noTouchBool&&e.touch._id===this.touchId&&(this.touchId=null,this.MapCon.judgeTouchCube(e.getLocation()))},on_touch_cancel:function(e){n.GAME_OVER_BOOL&&n.noTouchBool&&e.touch._id===this.touchId&&(this.touchId=null,this.MapCon.judgeTouchCube(e.getLocation()))},setScore:function(e){this.gameScore=e,this.sceneScore.string=this.gameScore.toString()},gainScore:function(){this.gameScore++,this.sceneScore.string=this.gameScore.toString()},gameEnd:function(){this.gameOver||(cc.audioEngine.play(this.over,!1,1),this.gameOver=!0,this.UICon.canNotTouch=!0,n.gameScore=this.gameScore,n.gameMaxScore<this.gameScore&&(n.gameMaxScore=this.gameScore),n.GAME_OVER_BOOL=!1,i.setData(this.gameBeginner,n.gameMaxScore),o.gameOverShowText(n.gameScore,1),this.node.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(this.gameEnd1.bind(this)))))},gameEnd1:function(){this.UICon.gameOver()},initEndLayer:function(){o.gotoEndLayer()},play:function(){var e=this;adBreak({type:"next",name:"restart-game",beforeBreak:function(){e.enableButtons()},afterBreak:function(){e.enableButtons()}})},enableButtons:function(){},start:function(){this.init()},update:function(e){}}),cc._RF.pop()},{GameConfig:"GameConfig",GameData:"GameData",GameTools:"GameTools",GameUiTools:"GameUiTools",MainManage:"MainManage"}],MainManage:[function(e,t,a){"use strict";cc._RF.push(t,"946adGkxvdBmZXnlD952XtK","MainManage");var n=e("HttpManagerJs"),r=e("LanguageSetJs"),o=e("GameConfig"),i=e("LoadSceneJs"),c=(e("GameUiTools"),{gameHttpId:0,subScoreHttp:null,gameNameText:null,gameInfoText:null,txtStartText:null,txtMoreText:null,txtAgainText:null,gameEndLText:null,gameEndL1Text:null,bgLayRgb:null,gameEndName1:null,gameEndName2:null,gameEndUrl1:null,gameEndUrl2:null,langugeType:1,ranLinkData:null,adShowBefore:!1,adShowAfter:!0,endLayCol:null,moreBtnBgCol:null,moreBtnTextCol:null,recGameData:null,recGameUrl:null,recGameDelPau:null,recGameDelPer:null,recGameimg1:null,recGameimg2:null,recGamePos:null,InfoData:null,endShow0:null,endShow1:null,endShow2:null,endShow3:null,infoGameName:null,showText:null,startText:null,moreGameText:null,playAgainText:null,endHttpShowInfo:null,moreGameUrl:null,init:function(e,t,a){if(!o.publicGameBool){if(o.playNum>=1)return;o.playNum++}o.launchScene=e,o.Bros=t,o.caS=a,this.curType=1,this.getHttpGameId(),this.gamePV_load(),console.log("thisg",this.gameHttpId),n.httpInitUrl(this.gameHttpId),n.send("101",null,this.getLinkGameReturn,this);var r=this.initLanguage();this.gameNameText=r.game_name,this.gameInfoText=r.game_info,this.txtStartText=r.txtStart,this.txtMoreText=r.txtMore,this.txtAgainText=r.txtAgain,this.gameEndLText=r.gameEndL,this.gameEndL1Text=r.gameEndL1,this.bgLayRgb=r.bgRgb,this.gameEndName1=r.gameT2,this.gameEndName2=r.gameT3,this.gameEndUrl1=r.gameUrl1,this.gameEndUrl2=r.gameUrl2,this.langugeType=this.curType},getHttpGameId:function(){var e=window.location.href,t=e.substring(0,e.lastIndexOf("//")+2),a=window.location.host,n=t+a+"/Service/Share/index";this.gameAllHttp=n,this.subScoreHttp=t+a+"/Service/Score/index",this.gamePvHttp=t+a+"/Service/GamePv/index";var r=document.URL,o=r.lastIndexOf("/"),i=r.substring(0,o),c=(o=i.lastIndexOf("/"),i.substring(o+1,i.length));this.gameHttpId=c,console.log("gameIdNew",c);var s=e.substring(e.lastIndexOf("//")+4,e.lastIndexOf("com")+3);-1==e.search("/game/")?this.moreGameUrl=t+a:this.moreGameUrl=t+s,console.log("moreGame",this.moreGameUrl)},gameOverShowText:function(e,t){this.ajaxLoad(this.subScoreHttp,"gameScore="+e+"&gameId="+this.gameHttpId+"&gameType="+t,this.scoreResult)},gamePV_load:function(){this.ajaxLoad(this.gamePvHttp,"gameId="+this.gameHttpId,this.ajaxOnLogoResult)},ajaxOnLogoResult:function(){},ajaxLoad:function(e,t,a){var n=cc.loader.getXMLHttpRequest();n.onreadystatechange=a,n.open("POST",e),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send(t)},scoreResult:function(e){if(null!=e.currentTarget.response&&""!=e.currentTarget.response){var t=JSON.parse(e.currentTarget.response);cc.log("endshow",t.content),c.endHttpShowInfo=t.content}},initLanguage:function(){var e=null;return cc.sys.language==cc.sys.LANGUAGE_CHINESE?(this.curType=1,e=r.language_1):(cc.log("\u82f1\u6587"),this.curType=2,e=r.language_2),e},getLinkGameReturn:function(e,t,a,n){if(console.log("err0",e),console.log("err1",t),console.log("err2",a),console.log("err3",n),0==e){this.ranLinkData=t,this.adShowBefore=this.ranLinkData.gameSet.adShowBefore,this.adShowAfter=this.ranLinkData.gameSet.adShowAfter,this.endLayCol=this.ranLinkData.gameSet.endLayerColor,this.moreBtnBgCol=this.ranLinkData.gameSet.moreBtnBgCol,this.moreBtnTextCol=this.ranLinkData.gameSet.moreBtnTextCol,this.moreGameUrl=this.ranLinkData.gameSet.moreBtnUrl,this.recGameData=a,this.ranRecGameData(),this.InfoData=n,this.endShow0=this.InfoData.endShow0,this.endShow1=this.InfoData.endShow1,this.endShow2=this.InfoData.endShow2,this.endShow3=this.InfoData.endShow3,this.infoGameName=this.InfoData.gameName,this.showText=this.InfoData.showText,this.startText=this.InfoData.startText,this.moreGameText=this.InfoData.moreGame,this.playAgainText=this.InfoData.rePlay,this.gameInfoText=this.InfoData.showText,this.txtStartText=this.InfoData.startText,this.txtMoreText=this.InfoData.moreGame,this.txtAgainText=this.InfoData.rePlay,console.log("LoadMainGameScnee");var r=o.launchScene,c=o.Bros,s=o.caS;i.goToCover(this.adShowBefore,this.adShowAfter,r,c,s)}},ranRecGameData:function(){if(null!=this.recGameData&&""!=this.recGameData){this.returnBool=!1;var e=this.recGameData.length,t=o.returnRanNum(1,e)-1;cc.log("ranNNN",t),this.recGameUrl=this.recGameData[t].data_link,this.recGameDelPer=this.recGameData[t].delay_per,this.recGameDelPau=this.recGameData[t].delay_pau,this.recGameimg1=this.recGameData[t].img_1,this.recGameimg2=this.recGameData[t].img_2,this.recGamePos=this.recGameData[t].poistion}},ranLinkUrl:function(){if(null!=this.ranLinkData&&this.ranLinkData.gameList&&null!=this.ranLinkData.gameList){var e=this.ranLinkData.gameList.length,t=o.returnRanNum(1,e)-1;return cc.log("templ",t,this.ranLinkData.gameList),cc.log("url",this.ranLinkData.gameList[0].gameName,this.ranLinkData.gameList[0].gameUrl),t}return null},gotoEndLayer:function(){if(o.publicGameBool)this.showGameEndLayer();else{if(adEndComplete=!1,resEndComplete=!1,this.needShow=null,1==window.navigator.onLine){var e=this.adShowAfter;console.log("ad",e),(e=null==e||void 0==e||this.adShowAfter)?(this.needShow=!0,console.log("showMyad"),showMyAds()):this.needShow=!1}else console.log("showOver1"),this.showGameEndLayer(),this.needShow=null;console.log("showMyad2",this.needShow),null!=this.needShow&&(console.log("showMyad3"),this.needShow?(console.log("pre",preloader),void 0==preloader&&this.showGameEndLayer(),resEndComplete=!0,adEndComplete&&resEndComplete&&(console.log("showOver1"),this.showGameEndLayer())):(console.log("gam"),this.showGameEndLayer()))}},showGameEndLayer:function(){cc.find("Canvas").getComponent("MainGameJS").gameEnd1()}});t.exports=c,cc._RF.pop()},{GameConfig:"GameConfig",GameUiTools:"GameUiTools",HttpManagerJs:"HttpManagerJs",LanguageSetJs:"LanguageSetJs",LoadSceneJs:"LoadSceneJs"}],MapManager:[function(e,t,a){"use strict";cc._RF.push(t,"90655Wr6VtFWZFbE+GZoVXW","MapManager");var n=this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,a,n){var r,o=arguments.length,i=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(o<3?r(i):o>3?r(t,a,i):r(t,a))||i);return o>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var o,i,c,s=e("../commonJs/GameTools"),l=e("../commonJs/GameConfig"),h=e("./MusicManager"),u=e("../ToolScript/ArrayTools"),p=e("./DataManager"),d=e("./PoolManager"),m=cc._decorator,g=m.ccclass,f=m.property;(function(e){e[e.GS_INIT=0]="GS_INIT",e[e.GS_PLAYING=1]="GS_PLAYING",e[e.GS_END=2]="GS_END"})(o=a.GameState||(a.GameState={})),function(e){e[e.GL_SIMPLE=1]="GL_SIMPLE",e[e.GL_NORMAL=2]="GL_NORMAL",e[e.GL_HARD=3]="GL_HARD",e[e.GL_HELL=4]="GL_HELL",e[e.GL_NIGHTMARE=5]="GL_NIGHTMARE"}(i||(i={})),function(e){e[e.GS_ONE=1]="GS_ONE",e[e.GS_TWO=2]="GS_TWO",e[e.GS_Three=3]="GS_Three"}(c||(c={}));var y=function(){return function(){}}();a.Cube=y;var v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.heartSFArr=[],t.heartSF2Arr=[],t.pointSFArr=[],t._curState=o.GS_INIT,t._curLevel=i.GL_SIMPLE,t._curStep=null,t.guideHandPos=null,t._cubeWidth=107,t._mapW=6,t._mapH=6,t._spacing=0,t._mapOffsetY=0,t._curScale=.8,t._curLineWidth=15,t._animalCount=8,t._waitTime=0,t._waitSuccess=!1,t._shootSuccessHeart=!1,t._canCall=!0,t._canSuccess=!1,t._customLv=!1,t._testSuccessHeart=!1,t.MainGame=null,t.playerData=null,t.graphics=null,t.memberZIndex=null,t.touchStartCube=null,t.cubeArr=[],t.lineColorArr=[],t.cubeArr1=[],t.cubeArr2=[],t.pathArr=[],t.animalArr=[],t.shadowArr=[],t.cubeBgArr=[],t.heartArr=[],t.animalHeightArr=[180,195,175,190,165,160],t}var a;return n(t,e),a=t,t.prototype.onLoad=function(){null!=a.Instance&&a.Instance.destroy(),a.Instance=this,this.MainGame=cc.find("Canvas").getComponent("MainGameJS"),this.playerData=p.default.GetPlayerData(),this.graphics=this.node.getChildByName("graphics").getComponent(cc.Graphics),this.memberZIndex={cubeBg:3,successHeart:4,streak:5,shadow:8,animal:10,heart:15,particle:60},this.lineColorArr=["#FF0000","#0000FF","#FFFF00","#00FF00","#8A17BC","#00FFFF"],this._customLv&&(this.playerData.playLevel=17),this.MainGame.setScore(this.playerData.playLevel),l.gameMaxScore=this.playerData.highScore,l.GAME_OVER_BOOL=!0,l.noTouchBool=!0,l.firstInGame=!0,this.initGameLevel()},t.prototype.start=function(){this.initMap()},Object.defineProperty(t.prototype,"curState",{get:function(){return this._curState},set:function(e){switch(e){case o.GS_PLAYING:case o.GS_END:}this._curState=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"curLevel",{set:function(e){switch(e){case i.GL_SIMPLE:cc.log("\u7b80\u5355\u96be\u5ea6"),this._mapW=4,this._mapH=5,this._animalCount=8;break;case i.GL_NORMAL:cc.log("\u6b63\u5e38\u96be\u5ea6"),this._mapW=5,this._mapH=5,this._animalCount=8;break;case i.GL_HARD:cc.log("\u56f0\u96be\u96be\u5ea6"),this._mapW=5,this._mapH=6,this._animalCount=10;break;case i.GL_HELL:cc.log("\u5730\u72f1\u96be\u5ea6"),this._mapW=6,this._mapH=6,this._animalCount=12;break;case i.GL_NIGHTMARE:cc.log("\u5669\u68a6\u96be\u5ea6"),this._mapW=6,this._mapH=7,this._animalCount=12}this._curLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"curStep",{set:function(e){switch(e){case c.GS_ONE:case c.GS_TWO:this.guideHandPos=cc.v2(this.cubeArr2[0].have.position.x,this.cubeArr2[0].have.position.y+100);break;case c.GS_Three:this.guideHandPos=cc.v2(this.cubeArr1[0].have.position.x,this.cubeArr1[0].have.position.y+100)}this.MainGame.UICon.beginnerHandAction(this.guideHandPos,1),this._curStep=e},enumerable:!0,configurable:!0}),t.prototype.openTouchDelay=function(e){var t=this;this.tryToGameEnd()?cc.tween(this.node).delay(.2).call(function(){t.gameEnd()}).start():cc.tween(this.node).delay(e).call(function(){l.noTouchBool=!0}).start()},t.prototype.tryToGameEnd=function(){return!1},t.prototype.initMap=function(){if(this.playerData.playLevel<=20)return this.loadMap(l.mapDataConfig[this.playerData.playLevel-1]),void(1==this.playerData.playLevel?this.curStep=c.GS_ONE:2==this.playerData.playLevel&&(this.curStep=c.GS_TWO));if(this._customLv&&p.default.SetMapData(null),this.playerData.mapData&&l.firstInGame)return l.firstInGame=!1,void this.loadMap(this.playerData.mapData);var e={_mapW:5,_mapH:5,_cubeWidth:100,_spacing:0,_mapOffsetY:0,_curScale:1,animalsPosArr:[],animalsTypeArr:[1,1]},t=this._animalCount;e._mapW=this._mapW,e._mapH=this._mapH,e._cubeWidth=720/e._mapW,e._curScale=e._cubeWidth/205<.6?.6:e._cubeWidth/205;for(var a=1;a<t/2;a++)e.animalsTypeArr.push(a+1),e.animalsTypeArr.push(a+1);var n=[];for(Math.random(),a=0;a<t;a++){var r=void 0,o=void 0;if(a%2==0)do{o=0==(r=s.getRndInteger(0,e._mapW-1,!0))||r==e._mapW-1?s.getRndInteger(1,e._mapH-2,!0):Math.random()>.5?0:e._mapH-1}while(-1!=u.ArrayTools.indexOfArrayVec2(cc.v2(r,o),n));else{var i=n[a-1];0==i.x?(r=e._mapW-1,o=i.y):i.x==e._mapW-1?(r=0,o=i.y):(r=i.x,0==i.y?o=e._mapH-1:i==e._mapH-1&&(o=0))}n.push(cc.v2(r,o))}n.reverse();for(a=0;a<n.length;a++)a%2==0&&(0==n[a].x&&(1==n[a].y?-1==u.ArrayTools.indexOfArrayVec2(cc.v2(n[a].x,0),n)&&(n[a].y=0):2==n[a].y?-1==u.ArrayTools.indexOfArrayVec2(cc.v2(n[a].x,0),n)&&-1==u.ArrayTools.indexOfArrayVec2(cc.v2(n[a].x,1),n)&&(n[a].y=0):n[a].y==e._mapH-2?-1==u.ArrayTools.indexOfArrayVec2(cc.v2(n[a].x,e._mapH-1),n)&&(n[a].y=e._mapH-1):n[a].y==e._mapH-3&&-1==u.ArrayTools.indexOfArrayVec2(cc.v2(n[a].x,e._mapH-1),n)&&-1==u.ArrayTools.indexOfArrayVec2(cc.v2(n[a].x,e._mapH-2),n)&&(n[a].y=e._mapH-1)),1==n[a].x&&(0==n[a].y?-1==u.ArrayTools.indexOfArrayVec2(cc.v2(0,n[a].y),n)&&(n[a].x=0):n[a].y==e._mapH-1&&-1==u.ArrayTools.indexOfArrayVec2(cc.v2(0,n[a].y),n)&&(n[a].x=0)),2==n[a].x&&(0==n[a].y?-1==u.ArrayTools.indexOfArrayVec2(cc.v2(0,n[a].y),n)&&-1==u.ArrayTools.indexOfArrayVec2(cc.v2(1,n[a].y),n)&&(n[a].x=0):n[a].y==e._mapH-1&&-1==u.ArrayTools.indexOfArrayVec2(cc.v2(0,n[a].y),n)&&-1==u.ArrayTools.indexOfArrayVec2(cc.v2(1,n[a].y),n)&&(n[a].x=0)),n[a].x==e._mapW-1&&(1==n[a].y?-1==u.ArrayTools.indexOfArrayVec2(cc.v2(n[a].x,0),n)&&(n[a].y=0):2==n[a].y?-1==u.ArrayTools.indexOfArrayVec2(cc.v2(n[a].x,0),n)&&-1==u.ArrayTools.indexOfArrayVec2(cc.v2(n[a].x,1),n)&&(n[a].y=0):n[a].y==e._mapH-2?-1==u.ArrayTools.indexOfArrayVec2(cc.v2(n[a].x,e._mapH-1),n)&&(n[a].y=e._mapH-1):n[a].y==e._mapH-3&&-1==u.ArrayTools.indexOfArrayVec2(cc.v2(n[a].x,e._mapH-1),n)&&-1==u.ArrayTools.indexOfArrayVec2(cc.v2(n[a].x,e._mapH-2),n)&&(n[a].y=e._mapH-1)),n[a].x==e._mapW-2&&(0==n[a].y?-1==u.ArrayTools.indexOfArrayVec2(cc.v2(e._mapW-1,n[a].y),n)&&(n[a].x=e._mapW-1):n[a].y==e._mapH-1&&-1==u.ArrayTools.indexOfArrayVec2(cc.v2(e._mapW-1,n[a].y),n)&&(n[a].x=e._mapW-1)),n[a].x==e._mapW-3&&(0==n[a].y?-1==u.ArrayTools.indexOfArrayVec2(cc.v2(e._mapW-1,n[a].y),n)&&-1==u.ArrayTools.indexOfArrayVec2(cc.v2(e._mapW-2,n[a].y),n)&&(n[a].x=e._mapW-1):n[a].y==e._mapH-1&&-1==u.ArrayTools.indexOfArrayVec2(cc.v2(e._mapW-1,n[a].y),n)&&-1==u.ArrayTools.indexOfArrayVec2(cc.v2(e._mapW-2,n[a].y),n)&&(n[a].x=e._mapW-1)));for(a=0;a<n.length;a++)e.animalsPosArr.push(n[a]);p.default.SetMapData(e),this.loadMap(this.playerData.mapData)},t.prototype.loadMap=function(e){this._mapW=e._mapW,this._mapH=e._mapH,this._cubeWidth=e._cubeWidth,this._spacing=e._spacing,this._mapOffsetY=e._mapOffsetY,this._curScale=e._curScale,this.initCubeArr(this._mapW,this._mapH,this._cubeWidth,this._spacing);for(var t=[],a=0;a<e.animalsPosArr.length;a++){var n=this.cubeArr[e.animalsPosArr[a].x][e.animalsPosArr[a].y];this.createAnimal(n,e.animalsTypeArr[a]),a%2==0?(this.cubeArr2.push(n),t.push(this.lineColorArr[e.animalsTypeArr[a]-1]),n.have.getComponent("Animal")._lineType=t.length):(this.cubeArr1.push(n),n.have.getComponent("Animal")._other=this.cubeArr2[this.cubeArr2.length-1].have,n.have.getComponent("Animal")._lineType=t.length,this.cubeArr2[this.cubeArr2.length-1].have.getComponent("Animal")._other=n.have)}this.initPath(),this.drawLine(this.pathArr,t),this._testSuccessHeart&&this.successHeart()},t.prototype.initCubeArr=function(e,t,a,n){var r=cc.v2(-(a+n)*e/2+(a+n)/2,-(a+n)*t/2+(a+n)/2-this._mapOffsetY);this.cubeArr=[],this.cubeArr1=[],this.cubeArr2=[];for(var o=0;o<e;o++){for(var i=[],c=0;c<t;c++){var s=cc.v2(r.x+o*(a+n),r.y+c*(a+n)),l=new y;l.row=c,l.column=o,l.position=s,l.have=null,l.type=0,i[c]=l}this.cubeArr[o]=i}},t.prototype.createAnimal=function(e,t){var a=d.default.Spawn("animal"+t.toString());this.node.addChild(a,this.memberZIndex.animal),a.setScale(a.scaleX*this._curScale),a.setPosition(cc.v2(e.position.x,e.position.y-80*this._curScale)),1!=t&&2!=t||(a.x-=30*this._curScale),e.have=a,e.type=t;var n=a.getComponent("Animal");n.init(t),n._shadow=this.createShadow(a.position,n.shadowOffset),n._cubeBg=this.createCubeBg(a.position,n.cubeBgOffset),this.animalArr.push(a)},t.prototype.createShadow=function(e,t){var a=d.default.Spawn("shadow");return this.node.addChild(a,this.memberZIndex.shadow),a.setPosition(cc.v2(e.x+t.x,e.y+t.y)),a.setScale(this._curScale),this.shadowArr.push(a),a},t.prototype.createCubeBg=function(e,t){var a=d.default.Spawn("cubeBg");return this.node.addChild(a,this.memberZIndex.cubeBg),a.setPosition(cc.v2(e.x+t.x,e.y+t.y)),a.setScale(this._curScale),this.cubeBgArr.push(a),a},t.prototype.initPath=function(){this.pathArr=[];for(var e=0;e<this.cubeArr2.length;e++){var t=[],a=this.cubeArr2[e].have.getPosition(),n=this.cubeArr1[e].have.getPosition();a.x==n.x&&(n.y>a.y?a.y+=this.animalHeightArr[this.cubeArr2[e].type-1]*this._curScale-60:n.y<a.y&&(n.y+=this.animalHeightArr[this.cubeArr1[e].type-1]*this._curScale-60)),t.push(a),this.addPath2(this.cubeArr2[e],this.cubeArr1[e],t)?(t.length>1&&(t[1].y>t[0].y?t[0].y+=this.animalHeightArr[this.cubeArr2[e].type-1]*this._curScale-60:t[1].y>n.y&&(n.y+=this.animalHeightArr[this.cubeArr1[e].type-1]*this._curScale-60)),t.push(n),this.pathArr.push(t)):t.pop()}},t.prototype.addPath2=function(e,t,a){if(e.row==t.row||e.column==t.column)return!0;var n=cc.v2(t.have.x,e.have.y);return this.lineRect(e,n,t)?(a.push(n),!0):(n=cc.v2(e.have.x,t.have.y),!!this.lineRect(e,n,t)&&(a.push(n),!0))},t.prototype.lineRect=function(e,t,a){for(var n=0;n<this.animalArr.length;n++)if(this.animalArr[n]===e.have||this.animalArr[n]===a.have);else{if(cc.Intersection.lineRect(e.have.getPosition(),t,this.animalArr[n].getBoundingBox()))return!1;if(cc.Intersection.lineRect(t,a.have.getPosition(),this.animalArr[n].getBoundingBox()))return!1}return!0},t.prototype.linePos=function(e,t,a){return(a.x-e.x)*(t.y-e.y)==(t.x-e.x)*(a.y-e.y)&&Math.min(e.x,t.x)<=a.x&&a.x<=Math.max(e.x,t.x)&&Math.min(e.y,t.y)<=a.y&&a.y<=Math.max(e.y,t.y)},t.prototype.tryLine=function(e,t,a){if(e.x!=t.x&&e.y!=t.y){var n=cc.v2(t.x,e.y);for(r=0;r<a.length;r++)if(e.x!=a[r].x||e.y!=a[r].y){if(this.linePos(e,n,a[r]))return!1;if(this.linePos(n,t,a[r]))return!1}n=cc.v2(e.x,t.y);for(r=0;r<a.length;r++)if(e.x!=a[r].x||e.y!=a[r].y){if(this.linePos(e,n,a[r]))return!1;if(this.linePos(n,t,a[r]))return!1}return!1}for(var r=0;r<a.length;r++)if((e.x!=a[r].x||e.y!=a[r].y)&&this.linePos(e,t,a[r]))return!1},t.prototype.addPath=function(e,t,a){if(e.row==t.row||e.column==t.column)return!0;for(var n,r=t.row<e.row?e.row-1:e.row+1,o=e.column;this.cubeArr[r][o]!==t;){if(this.cubeArr[r][o].have){n=this.cubeArr[t.row][e.column];break}r==t.row?o=t.column<e.column?o-1:o+1:r=t.row<e.row?r-1:r+1}if(n)return a.push(n.position),!0;for(r=e.row,o=t.column<e.column?e.column-1:e.column+1;this.cubeArr[r][o]!==t;){if(this.cubeArr[r][o].have)return void(n=this.cubeArr[e.row][t.column]);o==t.column?r=t.row<e.row?r-1:r+1:o=t.column<e.column?o-1:o+1}return!!n&&(a.push(n.position),!0)},t.prototype.drawLine=function(e,t){this.graphics.clear(),this.graphics.lineWidth=this._curLineWidth*this._curScale;for(var a=0;a<e.length;a++){var n=e[a];if(this.graphics.strokeColor=cc.color().fromHEX(t[a]),this.graphics.strokeColor.a=50,this.graphics.moveTo(n[0].x,n[0].y),n.length>2){var r=void 0,o=void 0,i=this._cubeWidth/10,c=void 0,s=void 0,l=cc.v2(n[1].x,n[1].y),h=void 0;n[0].x==n[1].x&&(n[0].y>n[1].y?(n[1].y+=i,n[2].x>n[1].x?(c=Math.PI,h=!0):(c=0,h=!1),s=1.5*Math.PI):(n[1].y-=i,n[2].x>n[1].x?(c=Math.PI,h=!1):(c=0,h=!0),s=.5*Math.PI),n[2].x>n[1].x?(l.x+=i,c=Math.PI):(l.x-=i,c=0),r=l.x,o=n[1].y),n[0].y==n[1].y&&(n[0].x>n[1].x?(n[1].x+=i,n[2].y>n[1].y?(c=1.5*Math.PI,h=!1):(c=.5*Math.PI,h=!0),s=Math.PI):(n[1].x-=i,n[2].y>n[1].y?(c=1.5*Math.PI,h=!0):(c=.5*Math.PI,h=!1),s=0),n[2].y>n[1].y?(l.y+=i,c=1.5*Math.PI):(l.y-=i,c=.5*Math.PI),r=n[1].x,o=l.y),n.splice(2,0,l);for(var u=1;u<n.length;u++)2==u?this.graphics.moveTo(n[u].x,n[u].y):this.graphics.lineTo(n[u].x,n[u].y);this.graphics.arc(r,o,i,c,s,h),this.graphics.stroke()}else{for(u=1;u<n.length;u++)this.graphics.lineTo(n[u].x,n[u].y);this.graphics.stroke()}this.cubeArr1[a].have.getComponent("Animal").initHeartPath(n,!0),this.cubeArr2[a].have.getComponent("Animal").initHeartPath(n,!1)}},t.prototype.markPath=function(e){this.graphics.lineWidth=3,this.graphics.strokeColor=cc.color().fromHEX("#000000"),this.graphics.moveTo(e[0].x,e[0].y);for(var t=1;t<e.length;t++)this.graphics.lineTo(e[t].x,e[t].y);this.graphics.stroke()},t.prototype.setTouchStartCube=function(e){var t=s.worldConvertLocalPointAR(this.node,e);this.touchStartCube=this.getCubeByLocaPos(t,!1),2==this.playerData.playLevel&&this._curStep==c.GS_TWO&&this.touchStartCube!==this.cubeArr2[0]&&this.touchStartCube!==this.cubeArr1[0]&&(this.touchStartCube=null)},t.prototype.getCubeByLocaPos=function(e,t){for(var a=0;a<this.cubeArr1.length;a++){if((n=this.cubeArr1[a]).position.x+this._cubeWidth/2>=e.x&&n.position.x-this._cubeWidth/2<=e.x&&n.position.y+this._cubeWidth/2>=e.y&&n.position.y-this._cubeWidth/2<=e.y)return t&&(this.cubeArr1.splice(a,1),this.cubeArr2.splice(a,1)),n}for(a=0;a<this.cubeArr2.length;a++){var n;if((n=this.cubeArr2[a]).position.x+this._cubeWidth/2>=e.x&&n.position.x-this._cubeWidth/2<=e.x&&n.position.y+this._cubeWidth/2>=e.y&&n.position.y-this._cubeWidth/2<=e.y)return t&&(this.cubeArr1.splice(a,1),this.cubeArr2.splice(a,1)),n}return null},t.prototype.judgeTouchCube=function(e){if(this.touchStartCube){var t=s.worldConvertLocalPointAR(this.node,e);if(this.getCubeByLocaPos(t,!0)===this.touchStartCube)if(this.touchStartCube.have){var a=this.touchStartCube.have.getComponent("Animal");a.activation(),a.shootHeart(),h.default.Instance.playMusic(a._type-1,1,!1),1==this.playerData.playLevel?this.MainGame.UICon.beginnerOverAction():2==this.playerData.playLevel&&this._curStep==c.GS_TWO?this.curStep=c.GS_Three:2==this.playerData.playLevel&&this._curStep==c.GS_Three&&this.MainGame.UICon.beginnerOverAction()}else cc.log("\u89e6\u6478\u683c\u5b50\u65e0\u5bf9\u8c61");else cc.log("\u89e6\u6478\u683c\u5b50\u4e22\u5931")}else cc.log("\u89e6\u6478\u683c\u5b50\u4e0d\u5b58\u5728")},t.prototype.createHeart=function(e,t,a){if(this.curState!=o.GS_END&&!this._canSuccess){var n=d.default.Spawn("heart");this.node.addChild(n,this.memberZIndex.heart),n.children[0].getComponent(cc.Sprite).spriteFrame=this.heartSF2Arr[a-1],n.setPosition(e[0]),n.setScale(n.scale*this._curScale);for(var r=n.getComponent("Heart"),i=1;i<e.length;i++)r.pathArr.push(e[i]);r.setSpeed(),r._callNode=t,r._canMove=!0,r._type=a,0!=this.cubeArr1.length||this._shootSuccessHeart||(this._shootSuccessHeart=!0,this.waitSuccess()),this.heartArr.push(n)}},t.prototype.createPoint=function(e,t){var a=d.default.Spawn("point");this.node.addChild(a,this.memberZIndex.streak),a.getComponent(cc.Sprite).spriteFrame=this.pointSFArr[t-1],a.setPosition(e),a.setScale(this._curScale),cc.tween(a).to(.6,{scale:0,opacity:0}).removeSelf().start()},t.prototype.createImpact=function(e){var t=d.default.Spawn("ring");this.node.addChild(t,this.memberZIndex.particle),t.setPosition(e),cc.tween(t).parallel(cc.tween().to(.3,{scale:2*this._curScale},{easing:"quadOut"}),cc.tween().to(.3,{opacity:0},{easing:"expoIn"})).removeSelf().start();var a=d.default.Spawn("impact");this.node.addChild(a,this.memberZIndex.particle),a.setPosition(e),a.angle=s.getRndInteger(0,360,!1),cc.tween(a).parallel(cc.tween().to(.3,{scale:2*this._curScale},{easing:"quadOut"}),cc.tween().to(.3,{opacity:0},{easing:"expoIn"})).removeSelf().start()},t.prototype.createHeartBoom=function(e,t){if(!this._canSuccess){h.default.Instance.playMusic(7,.5,!1);var a=d.default.Spawn("ring");this.node.addChild(a,this.memberZIndex.particle),a.setPosition(e),cc.tween(a).parallel(cc.tween().to(.5,{scale:2*this._curScale},{easing:"quadOut"}),cc.tween().to(.5,{opacity:0},{easing:"expoIn"})).removeSelf().start();for(var n=s.getRndInteger(15,20,!0),r=0;r<n;r++){var o=d.default.Spawn("smallHeart");r%2==0?(o.getComponent(cc.Sprite).spriteFrame=this.heartSF2Arr[t-1],o.setScale(s.getRndInteger(.2,.4,!1))):(o.getComponent(cc.Sprite).spriteFrame=this.heartSFArr[1],o.setScale(s.getRndInteger(.5,.8,!1))),this.node.addChild(o,this.memberZIndex.particle),o.setPosition(e),o.angle=s.getRndInteger(0,360,!1);var i=cc.v2(0,1);i.rotateSelf(cc.misc.degreesToRadians(s.getRndInteger(0,360,!1)));var c=s.getRndInteger(20,this._cubeWidth*this._curScale,!0);cc.tween(o).parallel(cc.tween().by(.5,{position:i.mul(c)},{easing:"quadOut"}),cc.tween().to(.4,{opacity:0},{easing:"expoIn"})).removeSelf().start()}}},t.prototype.createBrokenHeart=function(e,t){var a=d.default.Spawn("brokenHeart");this.node.addChild(a,this.memberZIndex.particle),a.setPosition(e),a.setScale(a.scaleX*this._curScale),a.angle=t;var n=a.children[0],r=a.children[1],o=s.convetOtherNodeSpaceAR(n,this.node),i=s.convetOtherNodeSpaceAR(r,this.node);n.parent=this.node,n.setPosition(o),n.setScale(n.scaleX*this._curScale),n.angle+=t,n.zIndex=this.memberZIndex.particle,r.parent=this.node,r.setPosition(i),r.setScale(r.scaleX*this._curScale),r.angle+=t,r.zIndex=this.memberZIndex.particle;var c,l,h,u,p=cc.v2(0,0),m=cc.v2(0,0);p.y=n.y+s.getRndInteger(-80,80,!1),m.y=n.y+s.getRndInteger(-80,80,!1),h=n.angle-s.getRndInteger(20,30,!0),u=r.angle+s.getRndInteger(20,30,!0),n.y>r.y?(c=s.getRndInteger(50,80,!1),l=s.getRndInteger(50,80,!1),p.x=n.x+s.getRndInteger(30,50,!1),m.x=r.x-s.getRndInteger(20,40,!1)):(c=s.getRndInteger(50,80,!1),l=s.getRndInteger(50,80,!1),p.x=n.x+s.getRndInteger(20,40,!1),m.x=r.x-s.getRndInteger(30,50,!1)),n.runAction(cc.spawn(cc.rotateTo(.3,h),cc.jumpTo(.4,p,c,1))),r.runAction(cc.spawn(cc.rotateTo(.3,u),cc.jumpTo(.4,m,l,1)))},t.prototype.waitSuccess=function(){this._waitSuccess||(this._waitSuccess=!0)},t.prototype.openSuccess=function(){this._canSuccess=!0,this._canCall=!1,this._waitSuccess=!1,this.gameSuccess()},t.prototype.gameSuccess=function(){var e=this;h.default.Instance.playMusic(8,1,!1),this.clearMap(),cc.tween(this.node).delay(2.4).call(function(){e.MainGame.gainScore(),e.AdjustGameLevel(),p.default.SetLevel(e.MainGame.gameScore),e.node.setPosition(cc.v2(e.MainGame.gameWidth,0)),e.initMap(),e.node.opacity=255,e._shootSuccessHeart=!1,e._canCall=!0,e._canSuccess=!1,e._waitTime=0}).to(.3,{position:cc.v2(0,0)}).start()},t.prototype.stopAllAnimalPopHeart=function(){for(var e=0;e<this.animalArr.length;e++)this.animalArr[e].getComponent("Animal")._canPopHeart=!1},t.prototype.initGameLevel=function(){this.MainGame.gameScore<=20?this.curLevel=i.GL_SIMPLE:this.MainGame.gameScore>20&&this.MainGame.gameScore<=30?this.curLevel=i.GL_NORMAL:this.MainGame.gameScore>30&&this.MainGame.gameScore<=40?this.curLevel=i.GL_HARD:this.MainGame.gameScore>40&&this.MainGame.gameScore<=50?this.curLevel=i.GL_HELL:this.MainGame.gameScore>50&&(this.curLevel=i.GL_NIGHTMARE)},t.prototype.AdjustGameLevel=function(){this.MainGame.gameScore>20&&this.MainGame.gameScore<=30&&this._curLevel===i.GL_SIMPLE?this.curLevel=i.GL_NORMAL:this.MainGame.gameScore>30&&this.MainGame.gameScore<=40&&this._curLevel===i.GL_NORMAL?this.curLevel=i.GL_HARD:this.MainGame.gameScore>40&&this.MainGame.gameScore<=50&&this._curLevel===i.GL_HARD?this.curLevel=i.GL_HELL:this.MainGame.gameScore>50&&this._curLevel===i.GL_HELL&&(this.curLevel=i.GL_NIGHTMARE)},t.prototype.removeHeart=function(e){this.heartArr.splice(this.heartArr.indexOf(e),1)},t.prototype.createSuccessHeart=function(e,t){var a,n=d.default.Spawn("smallHeart");n.getComponent(cc.Sprite).spriteFrame=this.heartSF2Arr[t-1],n.setScale(.1),this.node.addChild(n,this.memberZIndex.particle),n.setPosition(cc.v2(e.x+s.getRndInteger(-20,20,!0),e.y+s.getRndInteger(-5,10,!0))),a=this._canSuccess?.7*this._curScale:.2,cc.tween(n).parallel(cc.tween().by(.5,{position:cc.v2(0,50)},{easing:"quadOut"}),cc.tween().to(.3,{scale:a}),cc.tween().to(.4,{opacity:0},{easing:"expoIn"})).removeSelf().start()},t.prototype.successHeart=function(){for(var e=0;e<this.animalArr.length;e++)for(var t=cc.v2(this.animalArr[e].x,this.animalArr[e].y+this.animalArr[e].height*this.animalArr[e].scaleY-30),a=s.getRndInteger(5,7,!0),n=0;n<a;n++){var r=d.default.Spawn("smallHeart");r.getComponent(cc.Sprite).spriteFrame=this.heartSFArr[2],r.setScale(.2),this.node.addChild(r,this.memberZIndex.successHeart),r.setPosition(cc.v2(t.x+s.getRndInteger(-20,20,!0),t.y+s.getRndInteger(-5,10,!0))),r.opacity=0,cc.tween(r).delay(.2*n).to(.01,{opacity:255}).parallel(cc.tween().by(.5,{position:cc.v2(0,50)},{easing:"quadOut"}),cc.tween().to(.3,{scale:.7*this._curScale}),cc.tween().to(.4,{opacity:0},{easing:"expoIn"})).removeSelf().start()}},t.prototype.clearMap=function(){var e=this;cc.tween(this.node).delay(1.5).call(function(){e.stopAllAnimalPopHeart()}).delay(.2).call(function(){e.MainGame.UICon.Ribbon.ribbonEffact()}).by(.6,{position:cc.v2(-this.MainGame.gameWidth,0)}).call(function(){for(var t=[],a=0;a<e.animalArr.length;a++)t.push(e.animalArr[a]);for(a=0;a<e.shadowArr.length;a++)t.push(e.shadowArr[a]);for(a=0;a<e.cubeBgArr.length;a++)t.push(e.cubeBgArr[a]);for(a=0;a<e.heartArr.length&&e.heartArr[a];a++)e.heartArr[a].stopAllActions(),t.push(e.heartArr[a]);for(a=0;a<t.length;a++)t[a].destroy();e.animalArr=[],e.shadowArr=[],e.cubeBgArr=[],e.heartArr=[]}).start()},t.prototype.gameEnd=function(){var e=this;this._curState!==o.GS_END&&(this.curState=o.GS_END,cc.log("\u6e38\u620f\u7ed3\u675f"),l.GAME_OVER_BOOL=!1,h.default.Instance.playMusic(6,1,!1),this.stopAllAnimalPopHeart(),this.gameOverAnim(),cc.tween(this.node).delay(2).call(function(){e.MainGame.gameEnd()}).start())},t.prototype.gameOverAnim=function(){var e=this;this._canCall=!1;for(var t=0;t<this.heartArr.length;t++){this.heartArr[t].stopAllActions();var a=this.heartArr[t].getComponent("Heart");a._dead=!0,a._canNodePlayBrokenAnim&&a.remove()}for(t=0;t<this.animalArr.length;t++){var n=this.animalArr[t].getComponent("Animal");n._isUnlock&&n.fail()}cc.tween(this.node).delay(1.8).call(function(){cc.tween(e.MainGame.sceneScore.node).to(.3,{position:cc.v2(0,e.MainGame.gameHeight/2+50)},{easing:"backIn"}).start()}).to(.3,{position:cc.v2(-this.MainGame.gameWidth,0)}).start()},t.prototype.update=function(e){this._curState!==o.GS_END&&this._waitSuccess&&(this._waitTime+=e,this._waitTime>=2&&this.openSuccess())},t.Instance=null,r([f([cc.SpriteFrame])],t.prototype,"heartSFArr",void 0),r([f([cc.SpriteFrame])],t.prototype,"heartSF2Arr",void 0),r([f([cc.SpriteFrame])],t.prototype,"pointSFArr",void 0),t=a=r([g],t)}(cc.Component);a.default=v,cc._RF.pop()},{"../ToolScript/ArrayTools":"ArrayTools","../commonJs/GameConfig":"GameConfig","../commonJs/GameTools":"GameTools","./DataManager":"DataManager","./MusicManager":"MusicManager","./PoolManager":"PoolManager"}],MusicManager:[function(e,t,a){"use strict";cc._RF.push(t,"29b70ylQlVLNbeDp3lvsygj","MusicManager");var n=this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,a,n){var r,o=arguments.length,i=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(o<3?r(i):o>3?r(t,a,i):r(t,a))||i);return o>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var o=e("../commonJs/GameConfig"),i=cc._decorator,c=i.ccclass,s=i.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.allMusic=[],t.loopMusicArr=[],t}var a;return n(t,e),a=t,t.prototype.onLoad=function(){null!=a.Instance&&a.Instance.destroy(),a.Instance=this},t.prototype.start=function(){},t.prototype.playMusic=function(e,t,a){if(o.canPlayMusic){if(a){var n=cc.audioEngine.play(this.allMusic[e],a,t);return this.loopMusicArr.push(n),this.loopMusicArr.length-1}cc.audioEngine.play(this.allMusic[e],a,t)}},t.prototype.stopMusic=function(e){cc.audioEngine.stop(this.loopMusicArr[e]),this.loopMusicArr.splice(e,1)},t.prototype.pauseMusic=function(e){cc.audioEngine.pause(this.loopMusicArr[e])},t.prototype.resumeMusic=function(e){cc.audioEngine.resume(this.loopMusicArr[e])},t.prototype.stopAllMusic=function(){cc.audioEngine.stopAll()},t.prototype.pauseAllMusic=function(){cc.audioEngine.pauseAll()},t.prototype.resumeAllMusic=function(){cc.audioEngine.resumeAll()},t.Instance=null,r([s({type:cc.AudioClip})],t.prototype,"allMusic",void 0),t=a=r([c],t)}(cc.Component);a.default=l,cc._RF.pop()},{"../commonJs/GameConfig":"GameConfig"}],PoolManager:[function(e,t,a){"use strict";cc._RF.push(t,"1e5c17orU9FKYboWaaUobsX","PoolManager");var n=this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,a,n){var r,o=arguments.length,i=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(o<3?r(i):o>3?r(t,a,i):r(t,a))||i);return o>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,c=o.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.allPrefab=[],t.allPrefabMap=null,t.poolMap=null,t}var a;return n(t,e),a=t,t.prototype.onLoad=function(){null!=a.Instance&&a.Instance.isValid&&a.Instance.destroy(),a.Instance=this,this.allPrefabMap=new Map,this.poolMap=new Map;for(var e=0;e<this.allPrefab.length;e++){this.allPrefabMap.set(this.allPrefab[e].name,this.allPrefab[e]),cc.log(this.allPrefab[e].name);var t=new cc.NodePool;this.poolMap.set(this.allPrefab[e].name,t)}},t.Spawn=function(e,t){if(void 0===t&&(t=null),!a.Instance.poolMap.has(e))return cc.warn("no prefab named: "+e),null;var n=a.Instance.poolMap.get(e),r=null;n.size()>0?(r=n.get(),null!=t&&(r.parent=t)):(r=cc.instantiate(a.Instance.allPrefabMap.get(e)),null!=t&&(r.parent=t));var o=r.getComponent("ReusableNode");return null==o?(o=r.addComponent("ReusableNode")).OnUse():o.OnUse(),r},t.Despawn=function(e,t){if(!a.Instance.poolMap.has(e))return cc.log("no prefab named: "+e),null;var n=t.getComponent("ReusableNode");null==n?(n=t.addComponent("ReusableNode")).OnUnuse():n.OnUnuse(),a.Instance.poolMap.get(e).put(t)},t.GetPrefab=function(e){return a.Instance.allPrefabMap.has(e)?a.Instance.allPrefabMap.get(e):(cc.log("no prefab named: "+e),null)},t.Preload=function(e,t){if(a.Instance.poolMap.has(e))for(var n=a.Instance.poolMap.get(e),r=0;r<t;r++){var o=cc.instantiate(a.Instance.allPrefabMap.get(e));n.put(o)}else cc.log("no prefab named: "+e)},t.LoadPrefab=function(e,t){cc.loader.loadRes(e,cc.Prefab,function(e,n){a.Instance.allPrefabMap.set(n.name,n);var r=new cc.NodePool;a.Instance.poolMap.set(n.name,r),t(n)})},t.Instance=null,r([c(cc.Prefab)],t.prototype,"allPrefab",void 0),t=a=r([i],t)}(cc.Component);a.default=s,cc._RF.pop()},{}],ReusableNode:[function(e,t,a){"use strict";cc._RF.push(t,"f2e69qCOp5EtLjVNNAR6VAH","ReusableNode");var n=this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,a,n){var r,o=arguments.length,i=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(o<3?r(i):o>3?r(t,a,i):r(t,a))||i);return o>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,c=(o.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.OnUse=function(){this.node.stopAllActions(),this.node.active=!0},t.prototype.OnUnuse=function(){this.node.stopAllActions(),this.node.active=!1},t=r([i],t)}(cc.Component));a.default=c,cc._RF.pop()},{}],Ribbon:[function(e,t,a){"use strict";cc._RF.push(t,"9fc656MHrxPCJia7/r9vf0c","Ribbon");var n=this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,a,n){var r,o=arguments.length,i=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(o<3?r(i):o>3?r(t,a,i):r(t,a))||i);return o>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var o=e("../commonJs/GameTools"),i=cc._decorator,c=i.ccclass,s=i.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ribbonPre=null,t.ribbonSpriteFrame=[],t.ribbonPool=null,t.ribbonArr=[],t._canRibbon=!1,t}return n(t,e),t.prototype.onLoad=function(){this.ribbonPool=new cc.NodePool;for(var e=0;e<500;e++){var t=cc.instantiate(this.ribbonPre);t.getComponent(cc.Sprite).spriteFrame=Math.random()>.5?this.ribbonSpriteFrame[0]:this.ribbonSpriteFrame[o.getRndInteger(0,5,!0)],this.ribbonPool.put(t)}},t.prototype.start=function(){},t.prototype.createRibbon=function(e){for(var t=[[360,0],[-360,0],[360,-71],[-360,-71]],a=0;a<t.length;a++){if(t[a][0]>=0)var n=1;else n=-1;for(var r=0;r<e;r++){var i=null;(i=this.ribbonPool.size()>0?this.ribbonPool.get():cc.instantiate(this.ribbonPre)).parent=this.node,i.setPosition(cc.v2(t[a][0],t[a][1])),i.setScale(o.getRndInteger(.2,.5,!1)),this.ribbonArr.push(i);var c=i.position,s=c.x+o.getRndInteger(.5*-cc.winSize.width,.05*-cc.winSize.width,!0)*n,l=c.y+o.getRndInteger(200,cc.winSize.height/2,!0),h=cc.v2(c.x+.8*(s-c.x),c.y+.5*(l-c.y)+200);i.runAction(cc.spawn(cc.bezierTo(1,[c,h,cc.v2(s,l)]).easing(cc.easeCircleActionOut()),cc.moveBy(2.8,0,1.5*-cc.winSize.height*o.getRndInteger(8,12,!0)/10).easing(cc.easeCubicActionIn()),cc.moveBy(2.8,o.getRndInteger(-300,0,!0)*n,0),cc.rotateBy(2,o.getRndInteger(360,720,!0)*(2*Math.round(Math.random())-1)),cc.sequence(cc.moveBy(2*(.1*Math.random()+.3),(25*Math.random()+25)*(2*Math.round(Math.random())-1),0),cc.moveBy(2*(.1*Math.random()+.3),(25*Math.random()+25)*(2*Math.round(Math.random())-1),0),cc.moveBy(2*(.1*Math.random()+.3),(25*Math.random()+25)*(2*Math.round(Math.random())-1),0))))}}this.node.runAction(cc.sequence(cc.delayTime(3),cc.callFunc(function(){for(var e=0;e<this.ribbonArr.length;e++)this.ribbonPool.put(this.ribbonArr[e]);this.ribbonArr=[]},this)))},t.prototype.ribbonEffact=function(){var e=this;this.node.x=cc.winSize.width/2,this._canRibbon=!0,cc.tween(this.node).by(.6,{position:cc.v2(-cc.winSize.width,0)}).call(function(){e._canRibbon=!1}).start()},t.prototype.update=function(e){var t=this;if(this._canRibbon)for(var a=function(e){var a=null;(a=n.ribbonPool.size()>0?n.ribbonPool.get():cc.instantiate(n.ribbonPre)).parent=cc.find("Canvas").getComponent("MainGameJS").UIManager,a.setPosition(cc.v2(n.node.x,o.getRndInteger(-cc.winSize.height/2,cc.winSize.height/2,!1))),a.setScale(o.getRndInteger(.2,.5,!1)),a.angle=o.getRndInteger(0,360,!0),cc.tween(a).to(.5,{scale:0}).call(function(){t.ribbonPool.put(a)}).start()},n=this,r=0;r<o.getRndInteger(15,20,!0);r++)a()},r([s(cc.Prefab)],t.prototype,"ribbonPre",void 0),r([s([cc.SpriteFrame])],t.prototype,"ribbonSpriteFrame",void 0),t=r([c],t)}(cc.Component);a.default=l,cc._RF.pop()},{"../commonJs/GameTools":"GameTools"}],SpriteManager:[function(e,t,a){"use strict";cc._RF.push(t,"87c78bnv0dDnqsNEOISAgq/","SpriteManager");var n=this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,a,n){var r,o=arguments.length,i=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(o<3?r(i):o>3?r(t,a,i):r(t,a))||i);return o>3&&i&&Object.defineProperty(t,a,i),i};Object.defineProperty(a,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,c=o.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.allSpriteFrame=[],t.spriteFrameMap=null,t}var a;return n(t,e),a=t,t.prototype.onLoad=function(){null!=a.Instance&&a.Instance.destroy(),a.Instance=this,this.spriteFrameMap=new Map;for(var e=0;e<this.allSpriteFrame.length;e++){var t=this.allSpriteFrame[e].name.split(".",1);this.spriteFrameMap.set(t[0],this.allSpriteFrame[e])}},t.GetSpriteFrame=function(e){return a.Instance.spriteFrameMap.has(e)?a.Instance.spriteFrameMap.get(e):(cc.warn("no sprite named: "+e),null)},t.LoadSpriteFrame=function(e,t){cc.loader.loadRes(e,cc.Prefab,function(e,n){a.Instance.spriteFrameMap.set(n.name,n),t(n)})},t.Instance=null,r([c(cc.SpriteFrame)],t.prototype,"allSpriteFrame",void 0),t=a=r([i],t)}(cc.Component);a.default=s,cc._RF.pop()},{}],ToolsJs:[function(e,t,a){"use strict";cc._RF.push(t,"8eb19UW+mdM4YMqlqTLtShF","ToolsJs");var n={SpriteFrameJs:null,AudioArrJs:null,setStorage:function(e,t,a){CC_WECHATGAME?wx.setStorage({key:e,data:t}):(a&&(t=JSON.stringify(t)),cc.sys.localStorage.setItem(e,t))},getStorage:function(e,t){if(CC_WECHATGAME)return wx.getStorageSync(e);var a=cc.sys.localStorage.getItem(e);return isNaN(a)||(a=parseInt(a)),"NaN"==a.toString()&&(a=null),t&&null!=a&&(a=JSON.parse(a)),a},logJsonObject:function(e){console.log(JSON.stringify(e))},loadJson:function(e,t){},writeJson:function(e,t){if(cc.sys.isBrowser){console.log("\u6d4f\u89c8\u5668");var a=new Blob([e],{type:"application/json"}),n=document.createElement("a");n.download=t,n.innerHTML="Download File",null!=window.webkitURL?n.href=window.webkitURL.createObjectURL(a):(n.href=window.URL.createObjectURL(a),n.onclick=destroyClickedElement,n.style.display="none",document.body.appendChild(n)),n.click()}},addNoArr:function(e,t){return e.indexOf(t)<0&&(e.push(t),!0)},newSprite:function(e){if(null!=this.SpriteFrameJs.getSpriteFrame(e)){var t=new cc.Node;return t.addComponent(cc.Sprite).spriteFrame=this.SpriteFrameJs.getSpriteFrame(e),t}return null},setTexture:function(e,t){e.getComponent(cc.Sprite).spriteFrame=this.SpriteFrameJs.getSpriteFrame(t)},clonePrefabs:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=this.PrefabArrJs.getPrefabs(e);if(null!=r){var o=cc.instantiate(r);return null!=t&&t.addChild(o,n),null!=a&&(o.position=a),o}return console.log("\u514b\u9686\u9884\u5236\u4f53\u5931\u8d25:"+e),null},newLabel:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=new cc.Node;i.anchorX=n,i.anchorY=r;var c=i.addComponent(cc.Label);return c.string=e,c.fontSize=a,t.addChild(i,o),i},playAudio:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return null!=this.AudioArrJs?this.AudioArrJs.playAudio(e,t,a):cc.audioEngine.play(cc.url.raw("resources/music/"+e+".mp3"),a,t)},stopAudio:function(e){null!=e&&cc.audioEngine.stop(e)},newAduioSource:function(e){var t;if(null!=this.AudioArrJs)t=this.AudioArrJs.getAudioClip(e);else{if(null==e)return console.log("clip\u4e0d\u80fd\u4e3a\u7a7a\uff01"),null;t=e}var a=new cc.Node;return a.addComponent(cc.AudioSource).clip=t,a.getComponent(cc.AudioSource)},delayTimeCall:function(e,t,a,n){e.runAction(cc.sequence(cc.delayTime(a),cc.callFunc(t,n)))},getDistance:function(e,t){return e.sub(t).mag()},getToNodePos:function(e,t){var a=e.parent.convertToWorldSpaceAR(e.position);return t.convertToNodeSpaceAR(a)},getToWorldPosAR:function(e){return e.parent.convertToWorldSpaceAR(e.position)},getToWorldPos:function(e){return e.parent.convertToWorldSpace(e.position)},isBoxContainPos:function(e,t){return e.getBoundingBox().contains(t)},isBoxContainWorldPos:function(e,t){return e.getBoundingBoxToWorld().contains(t)},isRectInterRect:function(e,t){return e.getBoundingBoxToWorld().intersects(t.getBoundingBoxToWorld())},returnRandom:function(e,t){return e+Math.floor(Math.random()*(t-e+1))}};window.ToolsJs=n,cc._RF.pop()},{}],UIManager:[function(e,t,a){"use strict";cc._RF.push(t,"b1cf83DTC9Fd4n4Be2sz1Oz","UIManager");var n=e("GameUiTools"),r=e("MainManage"),o=(e("LoadSceneJs"),e("GameConfig"));e("GameData"),e("GameTools");cc.Class({extends:cc.Component,properties:{mainGame:cc.Node,ribbon:cc.Node,startGamePlanel:cc.Node,Particale:cc.Node,FloatScore:cc.Node,maskFloor:cc.Node,gameOverInfo:cc.Node,gameOverPanel:cc.Node,continue:cc.Node,hand:cc.Node,gameSuccessPanel:cc.Node,di:cc.Node,guan:cc.Node,leftBlackMask:cc.Node,rightBlackMask:cc.Node,info:cc.Node,jb:cc.Node,button:cc.Node,handSpriteFrame:[cc.SpriteFrame],lv:cc.Label,gameMaxScore:cc.Label,overInfoT:cc.Label,score:cc.Label,moreBtn:cc.Button},onLoad:function(){this.MainGame=this.mainGame.getComponent("MainGameJS"),this.Ribbon=this.ribbon.getComponent("Ribbon"),this.handSprite=this.hand.getComponent(cc.Sprite),this.scaleHeight=this.MainGame.gameHeight/1280,this.leftBlackMask.x=-this.MainGame.gameWidth/2,this.rightBlackMask.x=this.MainGame.gameWidth/2,this.gameSuccessPanel.y=this.MainGame.gameHeight/2+145,this.moreBtn.node.x=-this.MainGame.gameWidth/2+80,this.moreBtn.node.y=this.MainGame.gameHeight/2-90,this.score.node.y=390*this.scaleHeight,this.info.y=230*this.scaleHeight,this.overInfoT.node.y=105*this.scaleHeight,this.button.y=-100*this.scaleHeight,this.gameOverPanel.getChildByName("sp").y=-435*this.scaleHeight,this.standardScore=o.standScore,this.canNotTouch=!0,this.game_max_score=1e3,this.over=!1,this.gameOverInfo1StringArr=["\u6e38  \u620f  \u7ed3  \u675f","\u904a  \u6232  \u7d50  \u675f","Game Over","\uac8c\uc784 \ub05d"],this.gameOverInfo2StringArr=["\u70b9 \u51fb \u67e5 \u770b \u5206 \u6570","\u9ede \u64ca \u67e5 \u770b \u5206 \u6578","Click to view points","\ud3ec\uc778\ud2b8\ub97c \ubcf4\ub824\uba74 \ud074\ub9ad\ud558\uc138\uc694"],this.gameSuccessTitleStringArr=["\u606d \u559c \u4f60 \u5df2 \u7a81 \u7834","\u606d \u559c \u4f60 \u5df2 \u7a81 \u7834","Level Up","\ub808\ubca8 \uc5c5"],this.gameSuccessUintStringArr=["\u5206","\u5206","P","\ubd84"],this.continueStringArr=["\u70b9\u51fb\u7ee7\u7eed","\u9ede\u64ca\u7e7c\u7e8c","Click to continue","\uacc4\uc18d\ud558\ub824\uba74 \ud074\ub9ad\ud558\uc138\uc694"],this.moreGameStringArr=["\u66f4\u591a\u6e38\u620f","\u66f4\u591a\u904a\u6232","More Game","\ub354 \ub9ce\uc740 \uac8c\uc784"],this.maxScoreStringArr=["\u6700\u9ad8\u5f97\u5206\uff1a","\u6700\u9ad8\u5f97\u5206\uff1a","Highest score:","\ucd5c\uace0 \uc810\uc218 :"],this.langNumType=this.returnCurrentLanType(),this.continue.getComponent(cc.Label).string=this.continueStringArr[this.langNumType-1],this.gameOverInfo.children[0].getComponent(cc.Label).string=this.gameOverInfo1StringArr[this.langNumType-1],this.gameOverInfo.children[1].getComponent(cc.Label).string=this.gameOverInfo2StringArr[this.langNumType-1],this.addClickBtns()},start:function(){},beginnerHandAction:function(e,t,a){this.hand.setPosition(cc.v2(e.x+40,e.y-50)),this.hand.active=!0,o.noTouchBool=!0,this.hand.stopAllActions(),1==t?this.hand.runAction(cc.repeatForever(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){this.handSprite.spriteFrame=this.handSpriteFrame[1]},this),cc.delayTime(.5),cc.callFunc(function(){this.handSprite.spriteFrame=this.handSpriteFrame[0]},this)))):(this.handSprite.spriteFrame=this.handSpriteFrame[0],this.hand.runAction(cc.repeatForever(cc.sequence(cc.delayTime(.3),cc.moveTo(.7,cc.v2(a.x+40,a.y-30)),cc.delayTime(.3),cc.callFunc(function(){this.hand.setPosition(cc.v2(e.x+40,e.y-30))},this)))))},beginnerOverAction:function(){this.hand.stopAllActions(),this.hand.active=!1,this.handSprite.spriteFrame=this.handSpriteFrame[0]},returnCurrentLanType:function(){var e=1;switch(cc.sys.language){case cc.sys.LANGUAGE_CHINESE:"zh-TW"==window.navigator.language||"zh-tw"==window.navigator.language||"zh-HK"==window.navigator.language||"zh-hk"==window.navigator.language?(cc.log("\u7e41\u4f53"),e=2):(cc.log("\u7b80\u4f53"),e=1);break;case cc.sys.LANGUAGE_KOREAN:e=4;break;default:e=3}return e},addTouchEvents:function(){var e=this,t={event:cc.EventListener.TOUCH_ONE_BY_ONE,onTouchBegan:function(t,a){if(!e.canNotTouch)return e.MainGame.gameOver&&n.loadingScene("MainGameScene"),!0},onTouchMoved:function(e,t){},onTouchEnded:function(e,t){}};cc.eventManager.addListener(t,e.node)},initGameSuccessPanel:function(){this.gameSuccessPanel.y=this.MainGame.gameHeight/2+416,this.gameSuccessPanel.opacity=0,this.gameSuccessPanel.active=!1,this.continue.stopAllActions(),this.continue.active=!1,this.continue.opacity=255,this.maskFloor.active=!1},gameSuccessAction:function(){this.maskFloor.active=!0,this.MainGame.sceneScore.node.active=!1,this.lv.string=this.MainGame.gameScore.toString(),this.MainGame.gameScore>=10&&this.MainGame.gameScore<100?(this.di.x=-95,this.guan.x=95):this.MainGame.gameScore>=100&&this.MainGame.gameScore<1e3?(this.di.x=-115,this.guan.x=115):this.MainGame.gameScore>=1e3&&this.MainGame.gameScore<1e4?(this.di.x=-135,this.guan.x=135):this.MainGame.gameScore>=1e4&&this.MainGame.gameScore<1e5?(this.di.x=-155,this.guan.x=155):this.MainGame.gameScore>=1e5&&this.MainGame.gameScore<1e6?(this.di.x=-180,this.guan.x=180):this.MainGame.gameScore>=1e6&&(this.di.x=-200,this.guan.x=200),this.gameSuccessPanel.active=!0,this.gameSuccessPanel.runAction(cc.sequence(cc.spawn(cc.fadeIn(.2),cc.moveTo(.2,cc.v2(0,50))),cc.moveTo(.1,cc.v2(0,110)),cc.moveTo(.1,cc.v2(0,100)),cc.callFunc(function(){this.continue.active=!0,this.continue.setPosition(cc.v2(0,-150)),this.continue.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(.7,50),cc.fadeTo(.7,255)))),this.canNotTouch=!1},this)))},gameOver:function(){this.maskFloor.active=!0,this.MainGame.sceneScore.node.active=!1,this.gameOverInfo.active=!0,this.gameOverInfo.runAction(cc.sequence(cc.delayTime(.2),cc.spawn(cc.fadeIn(1),cc.moveBy(1,0,-50)),cc.callFunc(function(){this.canNotTouch=!1,this.gameOverInfo.children[1].runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.3,1.2),cc.scaleTo(.3,1),cc.delayTime(.5))))},this)))},gameOverAction:function(){this.over||(this.over=!0,this.score.string=this.MainGame.gameScore.toString(),this.gameMaxScore.string=o.gameMaxScore.toString(),o.gameMaxScore>=10&&o.gameMaxScore<100?this.jb.x=-67:o.gameMaxScore>=100&&o.gameMaxScore<1e3?this.jb.x=-93:o.gameMaxScore>=1e3&&o.gameMaxScore<1e4?this.jb.x=-107:o.gameMaxScore>=1e4&&o.gameMaxScore<1e5?this.jb.x=-122:o.gameMaxScore>=1e5&&o.gameMaxScore<1e6&&(this.jb.x=-138),this.UIPosChange(),this.gameOverPanel.active=!0,this.gameOverPanel.runAction(cc.sequence(cc.fadeIn(.2),cc.callFunc(function(){this.canNotTouch=!1,this.button.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.3,1.2),cc.scaleTo(.3,1),cc.delayTime(1))))},this))))},addClickBtns:function(){var e=this;e.moreBtn.node.on(cc.Node.EventType.TOUCH_START,function(e){}),e.moreBtn.node.on(cc.Node.EventType.TOUCH_END,function(e){console.log("MoreGame"),window.location.href=r.moreGameUrl}),e.gameSuccessPanel.on(cc.Node.EventType.TOUCH_START,function(e){}),e.gameSuccessPanel.on(cc.Node.EventType.TOUCH_END,function(t){e.canNotTouch||(o.noTouchBool=!0,e.canNotTouch=!0,o.publicGameBool||adBreak({type:"next",name:"restart-game"}),e.initGameSuccessPanel())}),e.gameOverInfo.on(cc.Node.EventType.TOUCH_START,function(e){}),e.gameOverInfo.on(cc.Node.EventType.TOUCH_END,function(t){e.canNotTouch||(o.publicGameBool||adBreak({type:"next",name:"restart-game"}),e.gameOverAction(),e.gameOverInfo.destroy())}),e.gameOverPanel.on(cc.Node.EventType.TOUCH_START,function(e){}),e.gameOverPanel.on(cc.Node.EventType.TOUCH_END,function(t){e.canNotTouch||(o.publicGameBool||adBreak({type:"next",name:"restart-game"}),o.playNum++,n.loadingScene("MainGameScene"))})},UIPosChange:function(){console.log("lang",r.langugeType);var e=null,t=null;1==r.langugeType?(e=this.getContentByScore(o.gameScore,r.gameNameText,!0),t=this.getContentByScore(o.gameScore,r.gameNameText,!1)):(e=this.getContentByScore2(o.gameScore,r.gameNameText,!0),t=this.getContentByScore(o.gameScore,r.gameNameText,!1)),console.log("nihao",r.endHttpShowInfo),null!=r.endHttpShowInfo&&""!=r.endHttpShowInfo&&(cc.log("gototo"),t=r.endHttpShowInfo),this.overInfoT.string=e,document.title=t},getContentByScore:function(e,t,a){var n="\u6211\u771f\u662f\u592a\u5389\u5bb3\uff0c\u5728"+t+"\u4e2d\u7adf\u7136\u5f97\u4e860\u5206\uff0c\u5168\u7403\u53ea\u67091\u4e2a\u4eba\u5f970\u5206\uff01",r="\u51fb\u8d25\u4e86\u5168\u74030%\u7684\u73a9\u5bb6\uff01",o=parseInt(.6*this.standardScore),i=parseInt(1.5*this.standardScore),c=parseInt(2.5*this.standardScore),s=parseInt(5*this.standardScore);if(e>=0&&e<=o)n="\u6211\u5728"+t+"\u4e2d\u5f97\u4e86"+e+"\u5206\uff0c\u771f\u662f\u592a\u68d2\u4e86\uff0c\u518d\u7ec3\u7ec3\u5c31\u80fd\u5f97\u5fc3\u5e94\u624b!",r="\u51fb\u8d25\u4e86\u5168\u7403"+Math.floor(10*e/o)+"%\u7684\u73a9\u5bb6\uff01";else if(e>o&&e<=this.standardScore){n="\u6211\u5728"+t+"\u4e2d\u5f97\u4e86"+e+"\u5206\uff0c\u771f\u662f\u592a\u68d2\u4e86\uff0c\u518d\u7ec3\u7ec3\u5c31\u80fd\u8fbe\u5230\u6e38\u5203\u6709\u4f59\u7684\u5883\u754c\uff01",r="\u51fb\u8d25\u4e86\u5168\u7403"+(Math.floor(15*(e-this.standardScore)/(o-this.standardScore))+20)+"%\u7684\u73a9\u5bb6\uff01"}else if(e>this.standardScore&&e<=i){var l=Math.floor(20*(e-this.standardScore)/(i-this.standardScore))+35;n="\u6211\u5728"+t+"\u4e2d\u5f97\u4e86"+e+"\u5206\uff0c\u51fb\u8d25\u4e86\u5168\u7403"+l+"%\u7684\u73a9\u5bb6\uff0c\u8fdb\u5165\u4e86\u4fe1\u624b\u62c8\u6765\u7684\u5883\u754c\uff01",r="\u51fb\u8d25\u4e86\u5168\u7403"+l+"%\u7684\u73a9\u5bb6\uff01"}else if(e>i&&e<=c){var h=Math.floor(30*(e-i)/(c-i))+55;n="\u6211\u5728"+t+"\u4e2d\u5f97\u4e86"+e+"\u5206\uff0c\u51fb\u8d25\u4e86\u5168\u7403"+h+"%\u7684\u73a9\u5bb6\uff0c\u8fdb\u5165\u4e86\u8fd0\u7528\u81ea\u5982\u7684\u5883\u754c\uff01",r="\u51fb\u8d25\u4e86\u5168\u7403"+h+"%\u7684\u73a9\u5bb6\uff01"}else if(e>c&&e<=s){n="\u6211\u5728"+t+"\u4e2d\u5f97\u4e86"+e+"\u5206\uff0c\u51fb\u8d25\u4e86\u5168\u740399%\u7684\u73a9\u5bb6\uff0c\u8fbe\u5230\u4e86\u884c\u4e91\u6d41\u6c34\u7684\u5883\u754c\uff01",r="\u51fb\u8d25\u4e86\u5168\u7403"+(Math.floor(10*(e-c)/(s-c))+85)+"%\u7684\u73a9\u5bb6\uff01"}else if(e>s&&e<this.game_max_score){n="\u6211\u5728"+t+"\u4e2d\u5f97\u4e86"+e+"\u5206\uff0c\u636e\u8bf4\u5168\u7403\u53ea\u6709 "+(20-Math.ceil(17*(e-s)/(this.game_max_score-s)))+"\u4e2a\u4eba\u8fbe\u5230\u8fd9\u4e2a\u6c34\u5e73\uff0c\u72ec\u5b64\u6c42\u8d25\uff01",r="\u51fb\u8d25\u4e86\u5168\u740399%\u7684\u73a9\u5bb6\uff01"}else e>=this.game_max_score&&(n="\u6211\u5728"+t+"\u4e2d\u5f97\u4e86"+e+"\u5206\uff0c\u8d85\u8d8a\u4e86\u72ec\u5b64\u6c42\u8d25\uff0c\u5fc3\u6709\u7075\u7280\uff01",r="\u51fb\u8d25\u4e86\u5168\u7403100%\u7684\u73a9\u5bb6\uff01");return a?r:n},getContentByScore2:function(e,t,a){var n="I'm awesome\uff0cin"+t+"get 0 score\uff0conly one person in the world has a 0\uff01",r="Only 0 points, the only one in the world!",o=parseInt(.6*this.standardScore),i=parseInt(1.5*this.standardScore),c=parseInt(2.5*this.standardScore),s=parseInt(5*this.standardScore);if(e>=0&&e<=o)n="I got "+e+" points in the game, really great\uff01",r="Defeated "+Math.floor(10*e/o)+"% of players worldwide!";else if(e>o&&e<=this.standardScore){n="I got "+e+" points in the game, really great\uff01",r="Defeated "+(Math.floor(15*(e-this.standardScore)/(o-this.standardScore))+20)+"% of players worldwide!"}else if(e>this.standardScore&&e<=i){var l=Math.floor(20*(e-this.standardScore)/(i-this.standardScore))+35;n="I got in the game in "+e+" points, beating out "+l+"% of global players\uff01",r="Defeated "+l+"% of players worldwide!"}else if(e>i&&e<=c){var h=Math.floor(30*(e-i)/(c-i))+55;n="I got in the game in "+e+" points, beating out "+h+"% of global players\uff01",r="Defeated "+h+"% of players worldwide!"}else if(e>c&&e<=s){n="I got in the game in "+e+" points, beating out 99% of global players\uff01",r="Defeated "+(Math.floor(10*(e-c)/(s-c))+85)+"% of players worldwide!"}else if(e>s&&e<this.game_max_score){n="I got "+e+" points in the game, it said to be the world's only "+(20-Math.ceil(17*(e-s)/(this.game_max_score-s)))+" people to reach this level! Have you?",r="Defeated 99% of players worldwide!"}else e>=this.game_max_score&&(n="I got "+e+" points in the game, defeating all players worldwide, waiting for you to fight!",r="Defeated 100% of players worldwide!");return a?r:n},getContentByScore3:function(e,t,a){var n="\u6211\u771f\u662f\u592a\u5389\u5bb3\uff0c\u5728"+t+"\u4e2d\u7adf\u7136\u5f97\u4e860\u5206\uff0c\u5168\u7403\u53ea\u67091\u4e2a\u4eba\u5f970\u5206\uff01",r="\u64ca\u6557\u4e86\u5168\u74030%\u7684\u73a9\u5bb6\uff01",o=parseInt(.6*this.standardScore),i=parseInt(1.5*this.standardScore),c=parseInt(2.5*this.standardScore),s=parseInt(5*this.standardScore);if(e>=0&&e<=o)n="\u6211\u5728"+t+"\u4e2d\u5f97\u4e86"+e+"\u5206\uff0c\u771f\u662f\u592a\u68d2\u4e86\uff0c\u518d\u7ec3\u7ec3\u5c31\u80fd\u5f97\u5fc3\u5e94\u624b!",r="\u64ca\u6557\u4e86\u5168\u7403"+Math.floor(10*e/o)+"%\u7684\u73a9\u5bb6\uff01";else if(e>o&&e<=this.standardScore){n="\u6211\u5728"+t+"\u4e2d\u5f97\u4e86"+e+"\u5206\uff0c\u771f\u662f\u592a\u68d2\u4e86\uff0c\u518d\u7ec3\u7ec3\u5c31\u80fd\u8fbe\u5230\u6e38\u5203\u6709\u4f59\u7684\u5883\u754c\uff01",r="\u64ca\u6557\u4e86\u5168\u7403"+(Math.floor(15*(e-this.standardScore)/(o-this.standardScore))+20)+"%\u7684\u73a9\u5bb6\uff01"}else if(e>this.standardScore&&e<=i){var l=Math.floor(20*(e-this.standardScore)/(i-this.standardScore))+35;n="\u6211\u5728"+t+"\u4e2d\u5f97\u4e86"+e+"\u5206\uff0c\u51fb\u8d25\u4e86\u5168\u7403"+l+"%\u7684\u73a9\u5bb6\uff0c\u8fdb\u5165\u4e86\u4fe1\u624b\u62c8\u6765\u7684\u5883\u754c\uff01",r="\u64ca\u6557\u4e86\u5168\u7403"+l+"%\u7684\u73a9\u5bb6\uff01"}else if(e>i&&e<=c){var h=Math.floor(30*(e-i)/(c-i))+55;n="\u6211\u5728"+t+"\u4e2d\u5f97\u4e86"+e+"\u5206\uff0c\u51fb\u8d25\u4e86\u5168\u7403"+h+"%\u7684\u73a9\u5bb6\uff0c\u8fdb\u5165\u4e86\u8fd0\u7528\u81ea\u5982\u7684\u5883\u754c\uff01",r="\u64ca\u6557\u4e86\u5168\u7403"+h+"%\u7684\u73a9\u5bb6\uff01"}else if(e>c&&e<=s){n="\u6211\u5728"+t+"\u4e2d\u5f97\u4e86"+e+"\u5206\uff0c\u51fb\u8d25\u4e86\u5168\u740399%\u7684\u73a9\u5bb6\uff0c\u8fbe\u5230\u4e86\u884c\u4e91\u6d41\u6c34\u7684\u5883\u754c\uff01",r="\u64ca\u6557\u4e86\u5168\u7403"+(Math.floor(10*(e-c)/(s-c))+85)+"%\u7684\u73a9\u5bb6\uff01"}else if(e>s&&e<this.game_max_score){n="\u6211\u5728"+t+"\u4e2d\u5f97\u4e86"+e+"\u5206\uff0c\u636e\u8bf4\u5168\u7403\u53ea\u6709 "+(20-Math.ceil(17*(e-s)/(this.game_max_score-s)))+"\u4e2a\u4eba\u8fbe\u5230\u8fd9\u4e2a\u6c34\u5e73\uff0c\u72ec\u5b64\u6c42\u8d25\uff01",r="\u64ca\u6557\u4e86\u5168\u740399%\u7684\u73a9\u5bb6\uff01"}else e>=this.game_max_score&&(n="\u6211\u5728"+t+"\u4e2d\u5f97\u4e86"+e+"\u5206\uff0c\u8d85\u8d8a\u4e86\u72ec\u5b64\u6c42\u8d25\uff0c\u5fc3\u6709\u7075\u7280\uff01",r="\u64ca\u6557\u4e86\u5168\u7403100%\u7684\u73a9\u5bb6\uff01");return a?r:n},getContentByScore4:function(e,t,a){var n="\u6211\u771f\u662f\u592a\u5389\u5bb3\uff0c\u5728"+t+"\u4e2d\u7adf\u7136\u5f97\u4e860\u5206\uff0c\u5168\u7403\u53ea\u67091\u4e2a\u4eba\u5f970\u5206\uff01",r="\uc804 \uc138\uacc4 \ud50c\ub808\uc774\uc5b4 0%\ub97c \ubb3c\ub9ac \ucce4\uc2b5\ub2c8\ub2e4!",o=parseInt(.6*this.standardScore),i=parseInt(1.5*this.standardScore),c=parseInt(2.5*this.standardScore),s=parseInt(5*this.standardScore);if(e>=0&&e<=o)n="\u6211\u5728"+t+"\u4e2d\u5f97\u4e86"+e+"\u5206\uff0c\u771f\u662f\u592a\u68d2\u4e86\uff0c\u518d\u7ec3\u7ec3\u5c31\u80fd\u5f97\u5fc3\u5e94\u624b!",r="\uc804 \uc138\uacc4 \ud50c\ub808\uc774\uc5b4 "+Math.floor(10*e/o)+"%\ub97c \ubb3c\ub9ac \ucce4\uc2b5\ub2c8\ub2e4!";else if(e>o&&e<=this.standardScore){n="\u6211\u5728"+t+"\u4e2d\u5f97\u4e86"+e+"\u5206\uff0c\u771f\u662f\u592a\u68d2\u4e86\uff0c\u518d\u7ec3\u7ec3\u5c31\u80fd\u8fbe\u5230\u6e38\u5203\u6709\u4f59\u7684\u5883\u754c\uff01",r="\uc804 \uc138\uacc4 \ud50c\ub808\uc774\uc5b4 "+(Math.floor(15*(e-this.standardScore)/(o-this.standardScore))+20)+"%\ub97c \ubb3c\ub9ac \ucce4\uc2b5\ub2c8\ub2e4!"}else if(e>this.standardScore&&e<=i){var l=Math.floor(20*(e-this.standardScore)/(i-this.standardScore))+35;n="\u6211\u5728"+t+"\u4e2d\u5f97\u4e86"+e+"\u5206\uff0c\u51fb\u8d25\u4e86\u5168\u7403"+l+"%\u7684\u73a9\u5bb6\uff0c\u8fdb\u5165\u4e86\u4fe1\u624b\u62c8\u6765\u7684\u5883\u754c\uff01",r="\uc804 \uc138\uacc4 \ud50c\ub808\uc774\uc5b4 "+l+"%\ub97c \ubb3c\ub9ac \ucce4\uc2b5\ub2c8\ub2e4!"}else if(e>i&&e<=c){var h=Math.floor(30*(e-i)/(c-i))+55;n="\u6211\u5728"+t+"\u4e2d\u5f97\u4e86"+e+"\u5206\uff0c\u51fb\u8d25\u4e86\u5168\u7403"+h+"%\u7684\u73a9\u5bb6\uff0c\u8fdb\u5165\u4e86\u8fd0\u7528\u81ea\u5982\u7684\u5883\u754c\uff01",r="\uc804 \uc138\uacc4 \ud50c\ub808\uc774\uc5b4 "+h+"%\ub97c \ubb3c\ub9ac \ucce4\uc2b5\ub2c8\ub2e4!"}else if(e>c&&e<=s){n="\u6211\u5728"+t+"\u4e2d\u5f97\u4e86"+e+"\u5206\uff0c\u51fb\u8d25\u4e86\u5168\u740399%\u7684\u73a9\u5bb6\uff0c\u8fbe\u5230\u4e86\u884c\u4e91\u6d41\u6c34\u7684\u5883\u754c\uff01",r="\uc804 \uc138\uacc4 \ud50c\ub808\uc774\uc5b4 "+(Math.floor(10*(e-c)/(s-c))+85)+"%\ub97c \ubb3c\ub9ac \ucce4\uc2b5\ub2c8\ub2e4!"}else if(e>s&&e<this.game_max_score){n="\u6211\u5728"+t+"\u4e2d\u5f97\u4e86"+e+"\u5206\uff0c\u636e\u8bf4\u5168\u7403\u53ea\u6709 "+(20-Math.ceil(17*(e-s)/(this.game_max_score-s)))+"\u4e2a\u4eba\u8fbe\u5230\u8fd9\u4e2a\u6c34\u5e73\uff0c\u72ec\u5b64\u6c42\u8d25\uff01",r="\uc804 \uc138\uacc4 \ud50c\ub808\uc774\uc5b4 99%\ub97c \ubb3c\ub9ac \ucce4\uc2b5\ub2c8\ub2e4!"}else e>=this.game_max_score&&(n="\u6211\u5728"+t+"\u4e2d\u5f97\u4e86"+e+"\u5206\uff0c\u8d85\u8d8a\u4e86\u72ec\u5b64\u6c42\u8d25\uff0c\u5fc3\u6709\u7075\u7280\uff01",r="\uc804 \uc138\uacc4 \ud50c\ub808\uc774\uc5b4 100%\ub97c \ubb3c\ub9ac \ucce4\uc2b5\ub2c8\ub2e4!");return a?r:n},update:function(e){}}),cc._RF.pop()},{GameConfig:"GameConfig",GameData:"GameData",GameTools:"GameTools",GameUiTools:"GameUiTools",LoadSceneJs:"LoadSceneJs",MainManage:"MainManage"}],gameOverJs:[function(e,t,a){"use strict";cc._RF.push(t,"3621brbM61BsYFG7fM/74TL","gameOverJs");var n=e("GameUiTools"),r=e("GameConfig"),o=e("MainManage");cc.Class({extends:cc.Component,properties:{bgLayer:cc.Node,scoreBg:cc.Node,overScoreT:cc.Label,overInfoT:cc.Label,moreBtn:cc.Button,leftBtn:cc.Button,rightBtn:cc.Button,midGameText:cc.Label,leftBtnText:cc.Label,rightBtnText:cc.Label,maxScoreText:cc.Label},onLoad:function(){this.bgLayer.color=cc.color("#68b951"),this.standardScore=r.standScore,this.game_max_score=200,this.rigthBtnGameName=null,this.rightBtnGameUrl=null,this.UIPosChange(),this.addClickBtns();var e="\u6700\u9ad8\u7eaa\u5f55:",t=this.returnCurrentLanType();e=1==t?"\u6700\u9ad8\u7eaa\u5f55:":2==t?"\u6700\u9ad8\u7d00\u9304:":4==t?"\ucd5c\uace0 \uae30\ub85d:":"Highest Record:";var a=r.gameScore,n=this.getHighScore();n?n<r.gameScore&&(this.setHisSocre(r.gameScore),n=r.gameScore):(this.setHisSocre(r.gameScore),n=a),this.maxScoreText.string=e+n},returnCurrentLanType:function(){var e=1;switch(cc.sys.language){case cc.sys.LANGUAGE_CHINESE:"zh-TW"==window.navigator.language||"zh-tw"==window.navigator.language||"zh-HK"==window.navigator.language||"zh-hk"==window.navigator.language?(cc.log("\u7e41\u4f53"),e=2):(cc.log("\u7b80\u4f53"),e=1);break;case cc.sys.LANGUAGE_KOREAN:e=4;break;default:e=3}return e},setHisSocre:function(e){cc.sys.localStorage.setItem("HigScore_JiaoTong",e)},getHighScore:function(){return cc.sys.localStorage.getItem("HigScore_JiaoTong")},UIPosChange:function(){this.overScoreT.string=r.gameScore,console.log("lang",o.langugeType);var e=null;e=1==o.langugeType?this.getContentByScore(r.gameScore,o.gameNameText):this.getContentByScore2(r.gameScore,o.gameNameText),console.log("nihao",o.endHttpShowInfo),null!=o.endHttpShowInfo&&""!=o.endHttpShowInfo&&(cc.log("gototo"),e=o.endHttpShowInfo),this.overInfoT.string=e;var t=this.overInfoT.node.height;if(this.overInfoT.node.height=Math.ceil(e.length*this.overInfoT.fontSize/this.overInfoT.node.width)*t,document.title=e,console.log("gameOver txtMoreText",o.txtMoreText),this.midGameText.string=o.txtMoreText,this.leftBtnText.string=o.txtAgainText,this.tempArr=this.gameFocus(),null!=o.ranLinkUrl()){var a=o.ranLinkUrl(),n=o.ranLinkData.gameList[a].gameName;this.rigthBtnGameName=n,this.rightBtnGameUrl=o.ranLinkData.gameList[a].gameUrl}null!=this.rigthBtnGameName&&""!=this.rigthBtnGameName?this.rightBtnText.string=this.rigthBtnGameName:this.rightBtnText.string=this.tempArr[0]},gameFocus:function(){var e=[],t=null,a=null;return Math.random()<=.5?(t=o.gameEndName1,a=o.gameEndUrl1):(t=o.gameEndName2,a=o.gameEndUrl2),e.push(t),e.push(a),e},addClickBtns:function(){var e=this;e.moreBtn.node.on(cc.Node.EventType.TOUCH_START,function(e){}),e.moreBtn.node.on(cc.Node.EventType.TOUCH_END,function(e){console.log("MoreGame"),window.location.href=o.moreGameUrl}),e.leftBtn.node.on(cc.Node.EventType.TOUCH_START,function(e){}),e.leftBtn.node.on(cc.Node.EventType.TOUCH_END,function(e){r.GAME_OVER_BOOL=!0,r.gameScore=0,n.loadingScene("MainGameScene")}),e.rightBtn.node.on(cc.Node.EventType.TOUCH_START,function(e){}),e.rightBtn.node.on(cc.Node.EventType.TOUCH_END,function(t){var a=null;a=null!=e.rightBtnGameUrl&&""!=e.rightBtnGameUrl?e.rightBtnGameUrl:e.tempArr[1],window.location.href=a})},getContentByScore:function(e,t){var a="\u6211\u771f\u662f\u592a\u5389\u5bb3\uff0c\u5728"+t+"\u4e2d\u7adf\u7136\u5f97\u4e861\u5206\uff0c\u5168\u7403\u53ea\u67091\u4e2a\u4eba\u5f971\u5206\uff01",n=parseInt(.3*this.standardScore),r=parseInt(1.5*this.standardScore),o=parseInt(2.5*this.standardScore),i=parseInt(4*this.standardScore);if(e>0&&e<=n)a="\u6211\u5728"+t+"\u4e2d\u5f97\u4e86"+e+"\u5206\uff0c\u771f\u662f\u592a\u68d2\u4e86\uff0c\u518d\u7ec3\u7ec3\u5c31\u80fd\u8fbe\u5230\u6e38\u5203\u6709\u4f59\u7684\u5883\u754c\uff01";else if(e>n&&e<=this.standardScore)a="\u6211\u5728"+t+"\u4e2d\u5f97\u4e86"+e+"\u5206\uff0c\u771f\u662f\u592a\u68d2\u4e86\uff0c\u518d\u7ec3\u7ec3\u5c31\u80fd\u8fbe\u5230\u6e38\u5203\u6709\u4f59\u7684\u5883\u754c\uff01";else if(e>this.standardScore&&e<=r){a="\u6211\u5728"+t+"\u4e2d\u5f97\u4e86"+e+"\u5206\uff0c\u51fb\u8d25\u4e86\u5168\u7403"+(Math.floor(12*(e-this.standardScore)/(r-this.standardScore))+80)+"%\u7684\u73a9\u5bb6\uff0c\u8fdb\u5165\u4e86\u4fe1\u624b\u62c8\u6765\u7684\u5883\u754c\uff01"}else if(e>r&&e<=o){a="\u6211\u5728"+t+"\u4e2d\u5f97\u4e86"+e+"\u5206\uff0c\u51fb\u8d25\u4e86\u5168\u7403"+(Math.floor(7*(e-r)/(o-r))+92)+"%\u7684\u73a9\u5bb6\uff0c\u8fdb\u5165\u4e86\u8fd0\u7528\u81ea\u5982\u7684\u5883\u754c\uff01"}else if(e>o&&e<=i)a="\u6211\u5728"+t+"\u4e2d\u5f97\u4e86"+e+"\u5206\uff0c\u51fb\u8d25\u4e86\u5168\u740399%\u7684\u73a9\u5bb6\uff0c\u8fbe\u5230\u4e86\u884c\u4e91\u6d41\u6c34\u7684\u5883\u754c\uff01";else if(e>i&&e<this.game_max_score){a="\u6211\u5728"+t+"\u4e2d\u5f97\u4e86"+e+"\u5206\uff0c\u636e\u8bf4\u5168\u7403\u53ea\u6709 "+(20-Math.ceil(17*(e-i)/(this.game_max_score-i)))+"\u4e2a\u4eba\u8fbe\u5230\u8fd9\u4e2a\u6c34\u5e73\uff0c\u72ec\u5b64\u6c42\u8d25\uff01"}else e>=this.game_max_score&&(a="\u6211\u5728"+t+"\u4e2d\u5f97\u4e86"+e+"\u5206\uff0c\u8d85\u8d8a\u4e86\u72ec\u5b64\u6c42\u8d25\uff0c\u5fc3\u6709\u7075\u7280\uff01");return a},strlen:function(e){for(var t=0,a=0;a<e.length;a++){var n=e.charCodeAt(a);n>=1&&n<=126||65376<=n&&n<=65439?t++:t+=2}return t},getContentByScore2:function(e,t){var a="I'm awesome\uff0cin"+t+"get 0 score\uff0conly one person in the world has a 0\uff01",n=parseInt(.3*this.standardScore),r=parseInt(1.5*this.standardScore),o=parseInt(2.5*this.standardScore),i=parseInt(4*this.standardScore);if(e>=this.game_max_score)a="I got "+e+" points in the game, defeating all players worldwide, waiting for you to fight!";else if(e>0&&e<=n)a="I got "+e+" points in the game, really great\uff01";else if(e>n&&e<=this.standardScore)a="I got "+e+" points in the game, really great\uff01";else if(e>this.standardScore&&e<=r){a="I got in the game in "+e+" points, beating out "+(Math.floor(12*(e-this.standardScore)/(r-this.standardScore))+80)+"% of global players\uff01"}else if(e>r&&e<=o){a="I got in the game in "+e+" points, beating out "+(Math.floor(7*(e-r)/(o-r))+92)+"% of global players\uff01"}else if(e>o&&e<=i)a="I got in the game in "+e+" points, beating out 99% of global players\uff01";else if(e>i&&e<this.game_max_score){a="I got "+e+" points in the game, it said to be the world's only "+(20-Math.ceil(17*(e-i)/(this.game_max_score-i)))+" people to reach this level! Have you?"}return a},start:function(){}}),cc._RF.pop()},{GameConfig:"GameConfig",GameUiTools:"GameUiTools",MainManage:"MainManage"}],linkHttpIconJs:[function(e,t,a){"use strict";cc._RF.push(t,"95474fr0oNDP7SAidILF03q","linkHttpIconJs");var n=e("MainManage"),r=e("GameConfig");cc.Class({extends:cc.Component,properties:{iconSpr:cc.Node,iconSpr1:cc.Node},onLoad:function(){if(this._imageArr=[],this.stopUpdateBool=!0,this.gameWidth=cc.winSize.width,this.gameHeight=cc.winSize.height,null!=n.recGameData&&""!=n.recGameData&&null!=n.recGameimg1&&""!=n.recGameimg1){var e=50-this.gameWidth/2,t=this.gameHeight-50-this.gameHeight/2;null!=n.recGamePos&&""!=n.recGamePos&&(1==n.recGamePos?(e=50-this.gameWidth/2,t=this.gameHeight-50-this.gameHeight/2):2==n.recGamePos?(e=this.gameWidth-50-this.gameWidth/2,t=this.gameHeight-50-this.gameHeight/2):3==n.recGamePos?(e=this.gameWidth-50-this.gameWidth/2,t=50-this.gameHeight/2):4==n.recGamePos&&(e=50-this.gameWidth/2,t=50-this.gameHeight/2));var a=n.recGameimg1,r=n.recGameimg2,o=this.iconSpr,i=this.iconSpr1,c=this;cc.loader.load(a,function(a,n){o.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(n),c.iconSpr.opacity=0,c.iconSpr.x=e,c.iconSpr.y=t,c._imageArr.push(c.iconSpr)}),cc.loader.load(r,function(a,n){i.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(n),c.iconSpr1.opacity=0,c.iconSpr1.x=e,c.iconSpr1.y=t,c._imageArr.push(c.iconSpr1)})}this.addTouchEvents()},showLinkPic:function(){var e=0,t=0;e=null!=n.recGameDelPau?n.recGameDelPau:6,cc.log("dMainManager.recGameDelPer",n.recGameDelPer),t=null!=n.recGameDelPer?n.recGameDelPer:.7,this._imageArr[0].opacity=255,this._imageArr[0].runAction(cc.repeatForever(cc.sequence(cc.delayTime(e),cc.rotateBy(t,0,180),cc.callFunc(function(){this._imageArr[0].setRotation(0),this._imageArr[0].opacity=0,this._imageArr[1].opacity=255},this),cc.delayTime(e),cc.callFunc(function(){this.flowerAction(this._imageArr[1],t)},this),cc.delayTime(t),cc.callFunc(function(){this._imageArr[1].opacity=0,this._imageArr[0].opacity=255},this))))},flowerAction:function(e,t){e.runAction(cc.sequence(cc.rotateBy(t,0,180),cc.callFunc(function(){e.setRotation(0)})))},start:function(){},addTouchEvents:function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_START,function(t){var a=t.getLocation();if(e._imageArr.length>=2){var o=Math.abs(a.x-e.gameWidth/2-e._imageArr[0].x),i=Math.abs(a.y-e.gameHeight/2-e._imageArr[0].y);o<=30&&i<=30&&(r.noTouchBool=!1,null!=n.recGameUrl&&""!=n.recGameUrl&&(e._imageArr[0].runAction(cc.sequence(cc.scaleTo(.1,.8),cc.scaleTo(.1,1),cc.callFunc(function(){window.location.href=n.recGameUrl}))),e._imageArr[1].runAction(cc.sequence(cc.scaleTo(.1,.8),cc.scaleTo(.1,1)))),console.log("touchLinkHttp"))}return!0},this)},update:function(e){this.stopUpdateBool&&this._imageArr.length>=2&&(this.stopUpdateBool=!1,this.showLinkPic())}}),cc._RF.pop()},{GameConfig:"GameConfig",MainManage:"MainManage"}],resArr:[function(e,t,a){"use strict";cc._RF.push(t,"36b14EoJxtHtJEeP2jXVvPf","resArr"),cc.Class({extends:cc.Component,properties:{SpriteFrameArr:[cc.SpriteFrame],PrefabArr:[cc.Prefab],audiosArr:{type:cc.AudioClip,default:[]}},onLoad:function(){void 0!=ToolsJs&&(ToolsJs.PrefabArrJs=this,ToolsJs.SpriteFrameJs=this,ToolsJs.AudioArrJs=this),this.addPrefabs(),this.addSpriteFrame(),this.audioClipDic={};for(var e=0;e<this.audiosArr.length;e++){var t=this.audiosArr[e];this.audioClipDic[t.name]=t}},playAudio:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.3,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return null!=this.audioClipDic[e]?cc.audioEngine.play(this.audioClipDic[e],a,t):(console.log("\u6ca1\u6709\u627e\u5230\u97f3\u9891\uff1a"+e),null)},getAudioClip:function(e){return null!=this.audioClipDic[e]?this.audioClipDic[e]:(console.log("\u6ca1\u6709\u627e\u5230\u97f3\u9891\uff1a"+e),null)},addSpriteFrame:function(){this.spriteArr={};for(var e=0;e<this.SpriteFrameArr.length;e++){var t=this.SpriteFrameArr[e];null!=t&&(this.spriteArr[t.name]=t)}},getSpriteFrame:function(e){return null!=this.spriteArr[e]?this.spriteArr[e]:(console.log("\u6ca1\u6709\u6dfb\u52a0\u56fe\u7247\uff1a"+e),null)},addPrefabs:function(){this.prefabsArr={};for(var e=0;e<this.PrefabArr.length;e++){var t=this.PrefabArr[e];this.prefabsArr[t.name]=t}},getPrefabs:function(e){return null!=this.prefabsArr[e]?this.prefabsArr[e]:(console.log("\u6ca1\u6709\u9884\u5236\u4f53\uff1a"+e),null)}}),cc._RF.pop()},{}],startGameJs:[function(e,t,a){"use strict";cc._RF.push(t,"280c3rsZJJKnZ9RqbALVwtK","startGameJs");var n=e("GameUiTools"),r=(e("HttpManagerJs"),e("MainManage")),o=(e("LoadSceneJs"),e("GameConfig"));cc.Class({extends:cc.Component,properties:{showInfoT:cc.Label,startT:cc.Label},onLoad:function(){o.publicGameBool&&r.init(),this.showInfoT.string=r.gameInfoText,this.startT.string=r.txtStartText,this.node.on("touchend",function(e){this.node.x=-2e3},this)},addTouchEvents:function(){var e={event:cc.EventListener.TOUCH_ONE_BY_ONE,onTouchBegan:function(e,t){return n.loadingScene("MainGameScene"),!0},onTouchMoved:function(e,t){},onTouchEnded:function(e,t){}};cc.eventManager.addListener(e,this.node)},update:function(e){}}),cc._RF.pop()},{GameConfig:"GameConfig",GameUiTools:"GameUiTools",HttpManagerJs:"HttpManagerJs",LoadSceneJs:"LoadSceneJs",MainManage:"MainManage"}],use_reversed_rotateTo:[function(e,t,a){"use strict";cc._RF.push(t,"7408dInqMZP5pgEm8jDPXus","use_reversed_rotateTo"),cc.RotateTo._reverse=!0,cc._RF.pop()},{}],"use_v2.1.x_cc.Action":[function(e,t,a){"use strict";cc._RF.push(t,"c382eNvNvFEVqcM3zUHzwkK","use_v2.1.x_cc.Action"),cc.macro.ROTATE_ACTION_CCW=!0,cc._RF.pop()},{}]},{},["DataManager","MainCamera","MapManager","MusicManager","PoolManager","ReusableNode","SpriteManager","Animal","Heart","HttpManagerJs","LanguageSetJs","LoadSceneJs","AniTools","MainGameJS","ToolsJs","UIManager","resArr","MainManage","AStar","ArrayTools","FloatScore","FrameAnimManager","Ribbon","GameConfig","GameData","GameTools","GameUiTools","gameOverJs","linkHttpIconJs","startGameJs","use_reversed_rotateTo","use_v2.1.x_cc.Action"]);