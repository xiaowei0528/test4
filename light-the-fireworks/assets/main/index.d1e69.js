window.__require=function e(o,t,n){function r(a,c){if(!t[a]){if(!o[a]){var s=a.split("/");if(s=s[s.length-1],!o[s]){var l="function"==typeof __require&&__require;if(!c&&l)return l(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+a+"'")}a=s}var p=t[a]={exports:{}};o[a][0].call(p.exports,function(e){return r(o[a][1][e]||e)},p,p.exports,e,o,t,n)}return t[a].exports}for(var i="function"==typeof __require&&__require,a=0;a<n.length;a++)r(n[a]);return r}({ActionControl:[function(e,o,t){"use strict";cc._RF.push(o,"ad8acTmpA5FEZJc3Tl88kLJ","ActionControl"),Object.defineProperty(t,"__esModule",{value:!0});var n=e("../../common/Tools"),r=e("../../model/GameModel"),i=e("../../model/OtherModel"),a=e("./GameMainSp"),c=function(){function e(){this.viewH=1280,this.viewW=720}return e.Instance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.init=function(){this.viewH=r.GameModel._ins.mainGame.gameHeight,this.viewW=r.GameModel._ins.mainGame.gameWidth},e.prototype.startMove=function(e,o){this.init();var t=o,n=this.syncFireworkMoveSpeed();t==i.fireworksActionType._down?this.fireworkToDown(e,n):t==i.fireworksActionType._up?this.fireworkToUp(e,n):t==i.fireworksActionType._left?this.fireworkToLeft(e,n):t==i.fireworksActionType._right?this.fireworkToRight(e,n):t==i.fireworksActionType._freedom?this.fireworkToFreedom(e,!0):t==i.fireworksActionType._static&&this.fireworksRotating(e)},e.prototype.fireworksRotating=function(e){var o=n.Tools.random(-45,45,!0);Math.random()>.5&&(o=-o),cc.tween(e.getChildByName("firework")).repeatForever(cc.tween().by(.5,{angle:Math.random()*o+o})).start()},e.prototype.fireworkToLeft=function(e,o){var t=Math.round(this.viewW/2-e.width/2)+100,r=this.asyncSpeed(o,cc.v2(e.position),cc.v2(-t,e.position.x),1),i=n.Tools.random(.3,.8,!1);e.getComponent("FireworkSp").moveSpeed=r,cc.tween(e).to(r,{position:cc.v3(-t,e.position.y)}).start(),cc.tween(e.getChildByName("firework")).repeatForever(cc.tween().by(i,{angle:15*Math.random()+15})).start()},e.prototype.fireworkToRight=function(e,o){var t=Math.round(this.viewW/2-e.width/2)+100,r=this.asyncSpeed(o,cc.v2(e.position),cc.v2(t,e.position.y),1),i=n.Tools.random(.3,.8,!1);e.getComponent("FireworkSp").moveSpeed=r,cc.tween(e).to(r,{position:cc.v3(t,e.position.y)}).start(),cc.tween(e.getChildByName("firework")).repeatForever(cc.tween().by(i,{angle:15*Math.random()+15})).start()},e.prototype.fireworkToDown=function(e,o){var t=Math.round(this.viewH/2-e.width/2)+100,r=this.asyncSpeed(o,cc.v2(e.position),cc.v2(e.position.x,-t),2),i=n.Tools.random(.3,.8,!1);e.getComponent("FireworkSp").moveSpeed=r,cc.tween(e).to(r,{position:cc.v3(e.position.x,-t)}).start(),cc.tween(e.getChildByName("firework")).repeatForever(cc.tween().by(i,{angle:15*Math.random()+15})).start()},e.prototype.fireworkToUp=function(e,o){var t=Math.round(this.viewH/2-e.width/2)+100,r=this.asyncSpeed(o,cc.v2(e.position),cc.v2(e.position.x,t),2),i=n.Tools.random(.3,.8,!1);e.getComponent("FireworkSp").moveSpeed=r,cc.tween(e).to(r,{position:cc.v3(e.position.x,t)}).start(),cc.tween(e.getChildByName("firework")).repeatForever(cc.tween().by(i,{angle:15*Math.random()+15})).start()},e.prototype.fireworkToFreedom=function(e,o,t){var r=n.Tools.random(-60,60,!0),i=this.syncFireworkMoveSpeed(),a=n.Tools.random(.3,.8,!1),c=cc.v2(0,0);o?(e.getComponent("FireworkSp").moveSpeed=i,(c=cc.v2(Math.cos(r/180*Math.PI),Math.sin(r/180*Math.PI))).mulSelf(1280)):c=t,e.getComponent("FireworkSp").moveDir=c,cc.tween(e).to(i,{position:cc.v3(c.x,c.y)}).start(),cc.tween(e.getChildByName("firework")).repeatForever(cc.tween().by(a,{angle:15*Math.random()+15})).start()},e.prototype.rayDetection=function(e,o,t){var n=o,r=t.normalize(),i=r.sub(n.mul(2*r.dot(n)));this.fireworkToFreedom(e,!1,i.mulSelf(1280))},e.prototype.changeDirection=function(e,o){var t=this.syncFireworkMoveSpeed();cc.Tween.stopAllByTarget(e),o!=i.fireworksActionType._left?o!=i.fireworksActionType._right?o!=i.fireworksActionType._down?o!=i.fireworksActionType._up||this.fireworkToDown(e,t):this.fireworkToUp(e,t):this.fireworkToLeft(e,t):this.fireworkToRight(e,t)},e.prototype.stopAction=function(e){cc.Tween.stopAllByTarget(e),cc.Tween.stopAllByTarget(e.getChildByName("firework"))},e.prototype.asyncSpeed=function(e,o,t,r){var i=e;if(1==r)(a=n.Tools.getDistance(o,t))<this.viewW&&(i*=a/this.viewW);else if(2==r){var a;(a=n.Tools.getDistance(o,t))<this.viewH&&(i*=a/this.viewH)}return i},e.prototype.syncFireworkMoveSpeed=function(){var e=0,o=a.default.Instance.nowCheckpoint;return o<10?e=7:(e=7-.03*o,e=Math.max(e,4)),e},e}();t.default=c,cc._RF.pop()},{"../../common/Tools":"Tools","../../model/GameModel":"GameModel","../../model/OtherModel":"OtherModel","./GameMainSp":"GameMainSp"}],ActionTools:[function(e,o,t){"use strict";cc._RF.push(o,"b2c25CPD7ZMCZD/CIj7ZzqP","ActionTools"),Object.defineProperty(t,"__esModule",{value:!0}),t.ActionTools=void 0;var n=function(){function e(){}return Object.defineProperty(e,"_ins",{get:function(){return this._instance},enumerable:!1,configurable:!0}),e.prototype.doLabStrAni=function(e,o,t){e.node.stopAllActions(),e.string="";var n=o.split(""),r=0,i=t/n.length;e.node.runAction(cc.sequence(cc.callFunc(function(){e.string=e.string+n[r],r++}),cc.delayTime(i)).repeat(n.length))},e.prototype.openUIAni=function(e,o,t,n){void 0===t&&(t=.3),void 0===n&&(n=function(){}),e.opacity=0,o.scale=0,e.runAction(cc.fadeTo(t,100)),o.runAction(cc.sequence(cc.scaleTo(t,1).easing(cc.easeBackOut()),cc.callFunc(n)))},e.prototype.closeUIAni=function(e,o,t,n){void 0===t&&(t=.2),void 0===n&&(n=function(){}),e.runAction(cc.fadeOut(t)),o.runAction(cc.sequence(cc.scaleTo(t,0).easing(cc.easeBackIn()),cc.callFunc(n),cc.removeSelf(!0)))},e.prototype.sortFadeToArr=function(e,o,t,n){void 0===o&&(o=.3),void 0===t&&(t=.02),void 0===n&&(n=!1);for(var r=n?0:255,i=0;i<e.length;i++){var a=e[i];a.opacity=0,a.runAction(cc.sequence(cc.delayTime(t*i),cc.fadeTo(o,r)))}},e.prototype.jumpByDegressAni=function(e,o,t,n,r,i){void 0===t&&(t=0),void 0===i&&(i=0);var a=cc.misc.degreesToRadians(o),c=cc.v2(Math.cos(a)*n,Math.sin(a)*n),s=n/r;e.runAction(cc.sequence(cc.delayTime(i),cc.jumpBy(s,cc.v2(1.5*c.x,t),n,1),cc.removeSelf(!0)))},e.prototype.moveDegressAni=function(e,o,t,n,r,i){void 0===t&&(t=200),void 0===r&&(r=!1),void 0===i&&(i=!1),o=o||this.returnRanNum(-180,180);var a=cc.misc.degreesToRadians(o),c=cc.v2(Math.cos(a)*t,Math.sin(a)*t),s=t/n,l=r?0:e.scale,p=i?0:e.opacity;e.runAction(cc.sequence(cc.spawn(cc.scaleTo(s+.1,l),cc.moveBy(s,c).easing(cc.easeQuadraticActionOut()),cc.fadeTo(s+.1,p)),cc.fadeOut(.1),cc.removeSelf(!0)))},e.prototype.moveByOutInit=function(e,o,t,n){void 0===o&&(o=.5),void 0===t&&(t=0),void 0===n&&(n=0),e.x+=t,e.y+=n,e.runAction(cc.moveBy(o,cc.v2(-t,-n)).easing(cc.easeBackOut()))},e.prototype.sprRedAni=function(e,o,t,n){var r=0;e.runAction(cc.sequence(cc.delayTime(o),cc.callFunc(function(e){e.color=cc.Color.RED}),cc.delayTime(o),cc.callFunc(function(e){e.color=cc.Color.WHITE,++r>=t&&null!=n&&n()})).repeat(t))},e.prototype.shakeAni=function(e,o,t,n,r){void 0===o&&(o=!1),void 0===t&&(t=10),void 0===n&&(n=.1),void 0===r&&(r=2);var i=cc.sequence(cc.rotateBy(n,t),cc.rotateBy(n,-t),cc.rotateBy(n,-t),cc.rotateBy(n,t),cc.rotateBy(n,t),cc.rotateBy(n,-t),cc.delayTime(r));o?e.runAction(i.repeatForever()):e.runAction(i)},e.prototype.returnRanNum=function(e,o){return e+Math.floor(Math.random()*(o-e+1))},e.prototype.isMoveTo=function(e,o,t,n){void 0===n&&(n=null);var r=Object.create(null),i=function(e,o,t){n&&(e=n(e));var r=o.x+(t.x-o.x)*e,i=o.y+(t.x-o.y)*e,a=o.z+(t.z-o.z)*e;return cc.v3(r,i,a)};return r.onUpdate=function(o,n){e.position=i(n,e,t)},cc.tween(e).to(o,{},r)},e.prototype.particleEffectFalling=function(e){for(var o=e,t=e.length,n=0;n<t;n++){o[n].scale=1;var r=this.returnRanNum(30,50),i=cc.v2(Math.cos(r/180*Math.PI),Math.sin(r/180*Math.PI));i.mulSelf(100*Math.random()+300);var a=i.x,c=i.y,s=cc.spawn(cc.moveBy(.35,a,c).easing(cc.easeQuadraticActionOut()),cc.moveBy(.35,cc.v2(0,400*Math.random()-300-200)));cc.tween(o[n]).then(s).start(),cc.tween(o[n]).repeatForever(cc.tween().by(.1,{angle:15*Math.random()+15})).start(),cc.tween(o[n]).delay(.3).to(.6,{opacity:0}).removeSelf().start()}},e.prototype.fogEffectDriftAway=function(e,o,t,n){for(var r=e,i=e.length,a=o,c=0;c<i;c++){var s=360*Math.random();c>Math.floor(i/2)&&(s=-s);var l=cc.v2(Math.cos(s/180*Math.PI),Math.sin(s/180*Math.PI)),p=this.returnRanNum(n,t);l.mulSelf(p);var d=l.mul(2),u=cc.spawn(cc.moveBy(a+.05,l.x,l.y).easing(cc.easeQuadraticActionOut()),cc.moveBy(3,d.x,d.y));cc.tween(r[c]).then(u).start(),cc.tween(r[c]).delay(.2*Math.random()+a).to(2*a,{opacity:0}).removeSelf().start()}},e.prototype.flowerEffect=function(e,o,t){void 0===t&&(t=300);var n=e,r=o,i=cc.v2(Math.cos(r/180*Math.PI),Math.sin(r/180*Math.PI));i.mulSelf(400*Math.random()+t);var a=cc.spawn(cc.moveBy(.35,i.x,i.y).easing(cc.easeQuadraticActionOut()),cc.moveBy(3,cc.v2(0,400*Math.random()-300-400)));cc.tween(n).then(a).start(),cc.tween(n).repeatForever(cc.tween().by(.1,{angle:15*Math.random()+15})).start(),cc.tween(n).delay(.2*Math.random()+.5).to(2.4,{opacity:0}).removeSelf().start()},e.prototype.debrisEffect=function(e,o){void 0===o&&(o=.5);for(var t=e,n=0;n<t.length;n++){var r=60*Math.random()+30;t[n].scale=this.returnRanNum(.3,.5);var i=cc.v2(Math.cos(r/180*Math.PI),Math.sin(r/180*Math.PI));i.mulSelf(100*Math.random()+50);var a=cc.spawn(cc.moveBy(o+.05,i.x,i.y).easing(cc.easeQuadraticActionOut()),cc.moveBy(1.5,cc.v2(0,400*Math.random()-300-300)));cc.tween(t[n]).then(a).start(),cc.tween(t[n]).repeatForever(cc.tween().by(.1,{angle:15*Math.random()+15})).start(),cc.tween(t[n]).delay(.2*Math.random()+.6).to(2*o,{opacity:0}).removeSelf().start()}},e.prototype.particleBrokenEffect=function(e,o,t,n,r){for(var i=o,a=e,c=e.length,s=0;s<c;s++){var l=360*Math.random();s>Math.floor(c/2)&&(l=-l);var p=cc.v2(Math.cos(l/180*Math.PI),Math.sin(l/180*Math.PI)),d=this.returnRanNum(n,t);p.mulSelf(d);var u=cc.spawn(cc.moveBy(i+.05,p.x,p.y).easing(cc.easeQuadraticActionOut()),cc.moveBy(4*i,cc.v2(0,100*-Math.random()-r)));cc.tween(a[s]).then(u).start(),cc.tween(a[s]).repeatForever(cc.tween().by(.1,{angle:15*Math.random()+15})).start(),cc.tween(a[s]).delay(.2*Math.random()+i).to(2*i,{opacity:0}).removeSelf().start()}},e._instance=new e,e}();t.ActionTools=n,cc._RF.pop()},{}],AdManager_H5:[function(e,o,t){"use strict";cc._RF.push(o,"a2d4apyHgxPzpAgAaWifHNK","AdManager_H5"),Object.defineProperty(t,"__esModule",{value:!0}),t.AdManager_H5=void 0;var n=function(){function e(){}return Object.defineProperty(e,"_ins",{get:function(){return this._instance},enumerable:!1,configurable:!0}),e.prototype.showIntersAd=function(){adBreak({type:"next",name:"restart-game"})},e.prototype.showVideoAd=function(e,o){var t=this;this.videoBack=null,this.errorBack=null,e&&(this.videoBack=e),o&&(this.errorBack=o),adBreak({type:"reward",name:"dasdf",beforeReward:function(e){e()},adDismissed:function(){t.errorVideo()},adViewed:function(){t.finishVideo()},adBreakDone:function(){t.finishVideo()}})},e.prototype.finishVideo=function(){this.videoBack&&this.videoBack(),this.videoBack=null,this.errorBack=null},e.prototype.errorVideo=function(){this.errorBack&&this.errorBack(),this.videoBack=null,this.errorBack=null},e._instance=new e,e}();t.AdManager_H5=n,cc._RF.pop()},{}],AdManager:[function(e,o,t){"use strict";cc._RF.push(o,"2a99aiMR2pMnpcfHJUcJzI4","AdManager"),Object.defineProperty(t,"__esModule",{value:!0}),t.AdManager=void 0;var n=e("../manager/PlatformManager"),r=e("./AdManager_H5"),i=function(){function e(){}return e.initAds=function(){},e.loadAds=function(){},e.showIntersAd=function(){var e=n.PlatformManager.releaseType;e!=n.releaseType.test_TEST&&(e!=n.releaseType.h5_weiSan&&e!=n.releaseType.h5_common||r.AdManager_H5._ins.showIntersAd())},e.showVideoAd=function(e,o){var t=n.PlatformManager.releaseType;t!=n.releaseType.test_TEST?t!=n.releaseType.h5_weiSan&&t!=n.releaseType.h5_common||r.AdManager_H5._ins.showVideoAd(e,o):e&&e()},e}();t.AdManager=i,cc._RF.pop()},{"../manager/PlatformManager":"PlatformManager","./AdManager_H5":"AdManager_H5"}],AudioTools:[function(e,o,t){"use strict";cc._RF.push(o,"bc1bcPG03RIK4fB+zDwX088","AudioTools"),Object.defineProperty(t,"__esModule",{value:!0}),t.AudioTools=void 0;var n=e("./LoadTools"),r=e("./Tools"),i=function(){function e(){this.isPlayAudio=!0,this.isPlayBG=!0}return Object.defineProperty(e,"_ins",{get:function(){return this._instance},enumerable:!1,configurable:!0}),e.prototype.playBG=function(e,o){var t=this;void 0===o&&(o=.5),this.isPlayBG&&(this.stopBG(),null!=r.Tools.AudioClipDic.get(e)?this.bgAudio=cc.audioEngine.play(r.Tools.AudioClipDic.get(e),!0,o):n.LoadTools._ins.loadResAny(cc.url.raw("resources/music/"+e+".mp3"),cc.AudioClip,function(e){t.bgAudio=cc.audioEngine.play(e,!0,o)}))},e.prototype.stopBG=function(){this.stopAudio(this.bgAudio)},e.prototype.playAudio=function(e,o,t,i,a,c){if(void 0===o&&(o=.5),void 0===t&&(t=!1),void 0===i&&(i=!1),void 0===a&&(a=!1),void 0===c&&(c=.2),this.isPlayAudio){if(i&&(o+=c),a&&(o-=c)<0&&(o=0),null!=r.Tools.AudioClipDic.get(e))return cc.audioEngine.play(r.Tools.AudioClipDic.get(e),t,o);n.LoadTools._ins.loadResAny(cc.url.raw("resources/music/"+e+".mp3"),cc.AudioClip,function(e){cc.audioEngine.play(e,!0,o)})}},e.prototype.stopAudio=function(e){null!=e&&(cc.audioEngine.stop(e),e=null)},e.prototype.playAudioSource=function(e,o,t){var i=this;if(void 0===o&&(o=.5),void 0===t&&(t=!1),this.isPlayAudio)return null!=r.Tools.AudioClipDic.get(e)?this.newAduioSource(r.Tools.AudioClipDic.get(e),o,t):void n.LoadTools._ins.loadResAny(e,cc.AudioClip,function(e){i.newAduioSource(e,o,t)})},e.prototype.newAduioSource=function(e,o,t){void 0===o&&(o=.5),void 0===t&&(t=!1);var n=new cc.Node,r=n.addComponent(cc.AudioSource);return r.clip=e,r.loop=t,r.volume=o,r.play(),0==t&&cc.tween(n).delay(r.getDuration()+.1).removeSelf().union().start(),r},e._instance=new e,e}();t.AudioTools=i,cc._RF.pop()},{"./LoadTools":"LoadTools","./Tools":"Tools"}],CheckpointSp:[function(e,o,t){"use strict";cc._RF.push(o,"d9feaNK1ZJGl5BjMVqAHpAa","CheckpointSp");var n=this&&this.__read||function(e,o){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n,r,i=t.call(e),a=[];try{for(;(void 0===o||o-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(c){r={error:c}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(r)throw r.error}}return a},r=this&&this.__spread||function(){for(var e=[],o=0;o<arguments.length;o++)e=e.concat(n(arguments[o]));return e};Object.defineProperty(t,"__esModule",{value:!0});var i=e("../../common/Tools"),a=e("../config/Level"),c=e("../../model/OtherModel"),s=e("./CreateControl"),l=e("./StorageInformation"),p=e("./GameMainSp"),d=function(){function e(){this.nowAllPoints=[],this.nextPointFireworkPos=[],this.nextLineArray=[],this.nextColumnArray=[]}return e.Instance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.getNextCheckpointInformation=function(e,o){this.nowAllPoints=e;var t=o+1,n="level_"+t,c=0,s=0,d=[],u=[],f=!1,h=[];if(t<=5)this.fixedCreateCheckpoint(t);else{if(t>30){c=i.Tools.random(4,8,!0),s=i.Tools.random(3,10,!0);var m=a.moveTypes[c];d=m[Math.floor(Math.random()*m.length)]}else{var g=a.Level[n];c=g.firework,s=g.block,d=g.moveType,f=g.blockFixed}if(f){var y=Math.floor(p.default.Instance.mapInformation.length/2),v=Math.floor(p.default.Instance.mapInformation[0].length/2),w=p.default.Instance.mapInformation[y][v];u.push(w),i.Tools.removeArrForValue(this.nowAllPoints,[y,v])}var _=this.nowAllPoints[Math.floor(Math.random()*this.nowAllPoints.length)];i.Tools.removeArrForValue(this.nowAllPoints,_),this.nextPointFireworkPos.push(_);var T=r(d);T.splice(0,1);for(var M=0;M<c-1;M++)this.judgeFireworkPos(_,T[M]);var k=this.nextPointFireworkPos,S=[];for(M=0;M<k.length;M++){this.nextLineArray.push(k[M][0]),this.nextColumnArray.push(k[M][1]),y=k[M][0],v=k[M][1];var P=p.default.Instance.mapInformation[y][v];S.push(P)}if(0!==s&&!f){var A=this.getRandomBlockPos(s);for(s=A.length,M=0;M<A.length;M++)y=A[M][0],v=A[M][1],t>20&&y>1&&v>2&&v<6&&(Math.random()>.7?h.push(!0):h.push(!1)),P=p.default.Instance.mapInformation[y][v],u.push(P)}var b=[];for(M=0;M<c;M++)b.push(!1);if(d.includes(6)&&t<20){var I=[];for(M=0;M<d.length;M++)I.push(M);var F=d.findIndex(function(e){return 6==e});i.Tools.removeArrForValue(I,F),b[Math.floor(Math.random()*I.length)]=!0}else b[Math.floor(Math.random()*b.length)]=!0;var N={checkpoint:t,roadblockNum:s,roadblockPos:u,fireworkNum:c,fireworkPos:S,fireworkStatus:d,fireworkIsFire:b,blockIsRotation:h};this.depandTheCheckpointData(N),l.default.Instance().saveCheckPointInformation(N)}},e.prototype.fixedCreateCheckpoint=function(e){var o={checkpoint:1,roadblockNum:0,roadblockPos:[],fireworkNum:2,fireworkPos:[],fireworkStatus:[],fireworkIsFire:[],blockIsRotation:[]},t=Math.floor(p.default.Instance.mapInformation.length/2),n=Math.floor(p.default.Instance.mapInformation[0].length/2);if(1==e){var r=p.default.Instance.mapInformation[t][n],i=p.default.Instance.mapInformation[t+2][n];o.checkpoint=1,o.fireworkNum=2,s.default.Instance().createFirework(r,p.default.Instance.fireworksManagerNode,6,!1),s.default.Instance().createFirework(i,p.default.Instance.fireworksManagerNode,6,!0),o.fireworkPos.push(r),o.fireworkPos.push(i),o.fireworkStatus.push(6),o.fireworkStatus.push(6),o.fireworkIsFire.push(!0,!1)}else if(2==e){o.checkpoint=2,o.fireworkNum=4,r=p.default.Instance.mapInformation[t][n],i=p.default.Instance.mapInformation[t-1][n-2];var a=p.default.Instance.mapInformation[t-1][n+2],c=p.default.Instance.mapInformation[t+2][n];s.default.Instance().createFirework(r,p.default.Instance.fireworksManagerNode,6,!0),s.default.Instance().createFirework(i,p.default.Instance.fireworksManagerNode,6,!1),s.default.Instance().createFirework(a,p.default.Instance.fireworksManagerNode,6,!1),s.default.Instance().createFirework(c,p.default.Instance.fireworksManagerNode,6,!1),o.fireworkPos.push(r),o.fireworkPos.push(i),o.fireworkPos.push(a),o.fireworkPos.push(c),o.fireworkStatus.push(6),o.fireworkStatus.push(6),o.fireworkStatus.push(6),o.fireworkStatus.push(6),o.fireworkIsFire.push(!0,!1,!1,!1)}else 3==e?(o.checkpoint=3,o.fireworkNum=2,r=p.default.Instance.mapInformation[t][n],i=p.default.Instance.mapInformation[t-2][n+2],s.default.Instance().createFirework(r,p.default.Instance.fireworksManagerNode,6,!1),s.default.Instance().createFirework(i,p.default.Instance.fireworksManagerNode,2,!0),o.fireworkPos.push(r),o.fireworkPos.push(i),o.fireworkStatus.push(6),o.fireworkStatus.push(2),o.fireworkIsFire.push(!1,!0)):4==e?(o.checkpoint=4,o.fireworkNum=2,r=p.default.Instance.mapInformation[t][n],i=p.default.Instance.mapInformation[t-2][n+2],s.default.Instance().createFirework(r,p.default.Instance.fireworksManagerNode,1,!1),s.default.Instance().createFirework(i,p.default.Instance.fireworksManagerNode,2,!0),o.fireworkPos.push(r),o.fireworkPos.push(i),o.fireworkStatus.push(1),o.fireworkStatus.push(2),o.fireworkIsFire.push(!1,!0)):5==e&&(o.checkpoint=5,o.fireworkNum=3,r=p.default.Instance.mapInformation[t][n],i=p.default.Instance.mapInformation[t-2][n+2],a=p.default.Instance.mapInformation[t+2][n-2],s.default.Instance().createFirework(r,p.default.Instance.fireworksManagerNode,1,!1),s.default.Instance().createFirework(i,p.default.Instance.fireworksManagerNode,1,!0),s.default.Instance().createFirework(a,p.default.Instance.fireworksManagerNode,2,!1),o.fireworkPos.push(r),o.fireworkPos.push(i),o.fireworkPos.push(a),o.fireworkStatus.push(1),o.fireworkStatus.push(1),o.fireworkStatus.push(2),o.fireworkIsFire.push(!1,!0,!1));l.default.Instance().saveCheckPointInformation(o)},e.prototype.depandTheCheckpointData=function(e){for(var o=e.fireworkNum,t=0;t<o;t++){var n=e.fireworkPos[t],r=e.fireworkStatus[t],i=e.fireworkIsFire[t];s.default.Instance().createFirework(n,p.default.Instance.fireworksManagerNode,r,i)}var a=[];if(0!=e.blockIsRotation.length)a=e.blockIsRotation;else for(t=0;t<e.roadblockNum;t++)a.push(!1);if(0!=e.roadblockNum){var c=e.roadblockNum;for(t=0;t<c;t++)n=e.roadblockPos[t],s.default.Instance().createBlock(n,p.default.Instance.blockManagerNode,a[t])}},e.prototype.judgeFireworkPos=function(e,o){var t=e[0],n=e[1],r=this.nowAllPoints[Math.floor(Math.random()*this.nowAllPoints.length)],a=t+2,s=n+2,l=t-2,p=n-2;o==c.fireworksActionType._left||o==c.fireworksActionType._right?r=r:o==c.fireworksActionType._up||o==c.fireworksActionType._down?r=r:o==c.fireworksActionType._static?r=this.getPosIndex([l,a,p,s],!1,!1,!0):o==c.fireworksActionType._freedom&&(r=r),this.nextPointFireworkPos.push(r),i.Tools.removeArrForValue(this.nowAllPoints,r)},e.prototype.getPosIndex=function(e,o,t,n){var r=p.default.Instance.mapInformation.length,a=p.default.Instance.mapInformation[0].length,c=e;if(!(c.length<2)){var s=c[1],l=c[0];if(l<0&&(l=0),o){s=Math.max(r,s);var d=i.Tools.random(l,s,!0);return this.findIsCanIndex(this.nowAllPoints,d,1)}if(t)return s=Math.max(s,a),d=i.Tools.random(l,s,!0),this.findIsCanIndex(this.nowAllPoints,d,2);if(n){var u=c[2],f=c[3];s=Math.max(r,s),f=Math.max(a,f),u<0&&(u=0),d=i.Tools.random(l,s,!0);var h=i.Tools.random(u,f,!0);return this.findIsCanIndex(this.nowAllPoints,d,3,h)}}},e.prototype.findIsCanIndex=function(e,o,t,n){var r=[];if(1===t)for(var i=0;i<e.length;i++)e[i][0]==o&&r.push(e[i]);else if(2===t)for(i=0;i<e.length;i++)e[i][1]==o&&r.push(e[i]);else if(3===t)for(i=0;i<e.length;i++)e[i][0]==o&&e[i][1]==n&&r.push(e[i]);return 0==r.length&&r.push(e[Math.floor(Math.random()*e.length)]),r[Math.floor(Math.random()*r.length)]},e.prototype.getRandomBlockPos=function(e){for(var o=new Set(this.nextLineArray),t=r(o),n=new Set(this.nextColumnArray),a=r(n),c=[],s=[],l=[],d=p.default.Instance.mapInformation.length,u=p.default.Instance.mapInformation[0].length,f=0;f<d-2;f++)s.push(f);for(f=0;f<u;f++)l.push(f);for(f=0;f<t.length;f++)s.includes(this.nextLineArray[f])&&s.splice(s.indexOf(this.nextLineArray[f]),1);for(f=0;f<a.length;f++)l.includes(this.nextColumnArray[f])&&l.splice(l.indexOf(this.nextColumnArray[f]),1);var h=[];for(f=0;f<s.length;f++)for(var m=0;m<l.length;m++)h.push([s[f],l[m]]);if(e>=h.length)c=h;else{var g=i.Tools.getDiffNumRandom(0,h.length-1,e);for(f=0;f<g.length;f++)c.push(h[g[f]])}return c},e}();t.default=d,cc._RF.pop()},{"../../common/Tools":"Tools","../../model/OtherModel":"OtherModel","../config/Level":"Level","./CreateControl":"CreateControl","./GameMainSp":"GameMainSp","./StorageInformation":"StorageInformation"}],CreateControl:[function(e,o,t){"use strict";cc._RF.push(o,"33d0aj/3HdJtZG85M7s+r0y","CreateControl"),Object.defineProperty(t,"__esModule",{value:!0});var n=e("../../manager/PoolManager"),r=function(){function e(){}return e.Instance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.createFirework=function(e,o,t,r){var i=n.PoolManager.getPoolObj("fireworkPre");i.scale=.8,i.opacity=0,i.setParent(o),i.setPosition(e);var a=i.getComponent("FireworkSp");a.actionType=t,a.isFire=r,cc.tween(i).to(.7,{opacity:255}).start()},e.prototype.destroyFirework=function(e){e.destroy()},e.prototype.createBlock=function(e,o,t){void 0===t&&(t=!1);var r="blockPre";Math.random()>.5&&(r="blockPre1");var i=n.PoolManager.getPoolObj(r);i.opacity=0,t&&(i.angle=45,i.scale=.8),i.setParent(o),i.setPosition(e),cc.tween(i).to(.8,{opacity:255}).start()},e.prototype.destroyBlock=function(e){n.PoolManager.addPoolObj(e)},e}();t.default=r,cc._RF.pop()},{"../../manager/PoolManager":"PoolManager"}],EventManager:[function(e,o,t){"use strict";cc._RF.push(o,"133eazTY8lPDrziDak8SK9u","EventManager"),Object.defineProperty(t,"__esModule",{value:!0}),t.EventData=t.EventManager=void 0;var n=function(){function e(){}return e.addListener=function(e,o,t){cc.director.on(e,o,t)},e.removeListener=function(e,o,t){cc.director.off(e,o,t)},e.dispachEvent=function(e,o,t,n,r,i){cc.director.emit(e,o,t,n,r,i)},e.removeListenerForTarget=function(e){cc.director.targetOff(e)},e}();t.EventManager=n,function(e){e.START_GAME="START_GAME",e.SHOW_GLOD="SHOW_GLOD",e.REIVE_GAME="REIVE_GAME"}(t.EventData||(t.EventData={})),cc._RF.pop()},{}],FireworkSp:[function(e,o,t){"use strict";cc._RF.push(o,"29d97Ldd5BM6IMUkgc5289i","FireworkSp");var n,r=this&&this.__extends||(n=function(e,o){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])})(e,o)},function(e,o){function t(){this.constructor=e}n(e,o),e.prototype=null===o?Object.create(o):(t.prototype=o.prototype,new t)}),i=this&&this.__decorate||function(e,o,t,n){var r,i=arguments.length,a=i<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,o,t,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(o,t,a):r(o,t))||a);return i>3&&a&&Object.defineProperty(o,t,a),a};Object.defineProperty(t,"__esModule",{value:!0});var a=e("../../common/AudioTools"),c=e("../../common/Tools"),s=e("../../manager/PoolManager"),l=e("../../model/GameModel"),p=e("../../model/OtherModel"),d=e("./ActionControl"),u=e("./GameMainSp"),f=cc._decorator,h=f.ccclass,m=f.property,g=function(e){function o(){var o=null!==e&&e.apply(this,arguments)||this;return o.fireworKNode=null,o.circleNode1=null,o.circleNode2=null,o.anNode=null,o.fireNode=null,o.liziNode=null,o.fireSpriteFrames=null,o.actionType=5,o.moveDirection=0,o.isStartBorderDetection=!1,o.nowAngles=45,o.isFire=!1,o.isCanClick=!1,o.isDie=!1,o.count=0,o.blockCount=0,o.moveDir=null,o.moveType="S",o.times=null,o.moveSpeed=5,o.testNode=null,o.viewH=0,o.viewW=0,o}return r(o,e),o.prototype.onLoad=function(){this.initParams()},o.prototype.start=function(){var e=this;this.viewH=l.GameModel._ins.mainGame.gameHeight/2,this.viewW=l.GameModel._ins.mainGame.gameWidth/2,1==this.actionType?this.moveType="L":2==this.actionType?this.moveType="R":3==this.actionType?this.moveType="P":4==this.actionType?this.moveType="D":5==this.actionType?this.moveType="F":6==this.actionType&&(this.moveType="S"),this.isFire&&this.rotatEffect(),this.scheduleOnce(function(){d.default.Instance().startMove(e.node,e.actionType)},.5)},o.prototype.initParams=function(){this.node.width=this.node.getChildByName("firework").width,this.node.height=this.node.getChildByName("firework").height,this.node.getComponent(cc.CircleCollider).radius=Math.floor(this.node.width/2)+3;var e=this.node.getComponent(cc.PhysicsCircleCollider);e.radius=Math.floor(this.node.width/2)+3,e.apply()},o.prototype.onBeginContact=function(e,o){if(5===this.actionType){var t=e.getWorldManifold().normal;d.default.Instance().rayDetection(o.node,t,this.moveDir)}else d.default.Instance().changeDirection(this.node,this.actionType),this.changeActionType(this.actionType)},o.prototype.onCollisionEnter=function(e,o){if(o.tag===p.interTag.fireworks_Tag&&e.tag===p.interTag.explode_Tag){if(this.isCanClick)return;this.rotatEffect()}},o.prototype.changeActionType=function(e){e===p.fireworksActionType._left?(this.moveType="R",this.actionType=p.fireworksActionType._right):e===p.fireworksActionType._right?(this.moveType="L",this.actionType=p.fireworksActionType._left):e===p.fireworksActionType._down?(this.moveType="P",this.actionType=p.fireworksActionType._up):e===p.fireworksActionType._up?(this.moveType="D",this.actionType=p.fireworksActionType._down):e===p.fireworksActionType._freedom&&(this.moveType="F",this.actionType=p.fireworksActionType._freedom)},o.prototype.clickHandle=function(){!this.isCanClick&&this.isFire||0===this.count&&(this.isDie||(this.count++,this.isDie=!0,this.isCanClick=!1,null!=this.times&&clearInterval(this.times),d.default.Instance().stopAction(this.node),this.fireNode.destroy(),this.fireworKNode.active=!1,u.default.Instance.explodeAnimation(this.anNode),u.default.Instance.apertureEffect(this.circleNode1,this.circleNode2)))},o.prototype.rotatEffect=function(){this.isDie||(this.fireworKNode.getComponent(cc.Sprite).spriteFrame=this.fireSpriteFrames,this.createMotation(),a.AudioTools._ins.playAudio("fire",l.GameModel._ins.hornValue),this.isFire=!0,this.fireNode.active=!0,this.fireNode.getComponent(cc.Animation).play(),this.isCanClick=!0)},o.prototype.createMotation=function(){var e=this,o=this.node.height+5,t=this.node.width+5;if("S"!=this.moveType){var n=300;this.moveSpeed>5&&(n=200),this.times=setInterval(function(){var n=c.Tools.random(10,20,!0),r=1;e.moveSpeed>5&&(r=.5);for(var i=function(){var n="liziPre1";Math.random()>.5&&(n="liziPre2");var i=c.Tools.random(-t/2,t/2),a=c.Tools.random(-o/2,o/2),l=s.PoolManager.getPoolObj(n);l.scale=c.Tools.random(.2,.8,!1),l.opacity=255,l.setParent(e.liziNode),l.setPosition(cc.v2(i,a));var p=e.node.angle;"L"==e.moveType?p=p:"R"==e.moveType?p+=180:"P"==e.moveType?p-=90:"D"==e.moveType?p+=90:"F"==e.moveType&&(p+=180),c.Tools.setNodeParent(l,u.default.Instance.showEffectNode),cc.tween(l).repeatForever(cc.tween().by(.1,{angle:15*Math.random()+15})).start(),cc.tween(l).parallel(cc.tween().by(1,{position:cc.v3(Math.random()*t,Math.random()*o)}),cc.tween().to(r,{opacity:0})).call(function(){s.PoolManager.addPoolObj(l)}).start()},a=0;a<n;a++)i()},n)}},i([m(cc.Node)],o.prototype,"fireworKNode",void 0),i([m(cc.Node)],o.prototype,"circleNode1",void 0),i([m(cc.Node)],o.prototype,"circleNode2",void 0),i([m(cc.Node)],o.prototype,"anNode",void 0),i([m(cc.Node)],o.prototype,"fireNode",void 0),i([m(cc.Node)],o.prototype,"liziNode",void 0),i([m(cc.SpriteFrame)],o.prototype,"fireSpriteFrames",void 0),i([m(cc.Node)],o.prototype,"testNode",void 0),i([h],o)}(cc.Component);t.default=g,cc._RF.pop()},{"../../common/AudioTools":"AudioTools","../../common/Tools":"Tools","../../manager/PoolManager":"PoolManager","../../model/GameModel":"GameModel","../../model/OtherModel":"OtherModel","./ActionControl":"ActionControl","./GameMainSp":"GameMainSp"}],GameCtrl:[function(e,o,t){"use strict";cc._RF.push(o,"a1d7eXYRpRDM7lzYxYf5Tki","GameCtrl"),Object.defineProperty(t,"__esModule",{value:!0}),t.GameState=t.GameCtrl=void 0;var n,r=e("../manager/PoolManager"),i=e("../model/GameModel"),a=function(){function e(){this.boolTouch=!1,this.isfirstPlayGame=!0}return Object.defineProperty(e,"_ins",{get:function(){return this._instance},enumerable:!1,configurable:!0}),e.prototype.initGame=function(){this.gameState=n.Defualt,i.GameModel._ins.gameScore=0,this.boolTouch=!1},e.prototype.overGame=function(){this.gameState=n.Over,this.boolTouch=!1,r.PoolManager.clearAllPool()},e._instance=new e,e}();t.GameCtrl=a,function(e){e[e.Defualt=0]="Defualt",e[e.Start=1]="Start",e[e.Pause=2]="Pause",e[e.Over=3]="Over"}(n=t.GameState||(t.GameState={})),cc._RF.pop()},{"../manager/PoolManager":"PoolManager","../model/GameModel":"GameModel"}],GameMainSp:[function(e,o,t){"use strict";cc._RF.push(o,"bd8442YV9NEQ6Ohvj+totLV","GameMainSp");var n,r=this&&this.__extends||(n=function(e,o){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])})(e,o)},function(e,o){function t(){this.constructor=e}n(e,o),e.prototype=null===o?Object.create(o):(t.prototype=o.prototype,new t)}),i=this&&this.__decorate||function(e,o,t,n){var r,i=arguments.length,a=i<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,o,t,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(o,t,a):r(o,t))||a);return i>3&&a&&Object.defineProperty(o,t,a),a};Object.defineProperty(t,"__esModule",{value:!0});var a=e("../../common/AudioTools"),c=e("../../ctrl/GameCtrl"),s=e("../../manager/PoolManager"),l=e("../../model/GameModel"),p=e("./HronSp"),d=e("./CheckpointSp"),u=e("./StorageInformation"),f=e("./CreateControl"),h=e("../../common/Tools"),m=cc._decorator,g=m.ccclass,y=m.property,v=function(e){function o(){var o=null!==e&&e.apply(this,arguments)||this;return o.guideNode=null,o.fireworksManagerNode=null,o.bgManagerNode=null,o.blockManagerNode=null,o.scoreLabel=null,o.showEffectNode=null,o.showGuideCount=0,o.mapInformation=[],o.viewScalValue=1,o.allPoints=[],o.nowCheckpoint=1,o.gameOver=!1,o.nextPoint=!1,o.lastPassNode=null,o}var t;return r(o,e),t=o,o.prototype.onLoad=function(){null!=t.Instance&&t.Instance.destroy(),t.Instance=this,this.initBgCollider(),this.initViewScal(),this.initMap(),this.node.on(cc.Node.EventType.TOUCH_START,this.allViewClickHandle,this)},o.prototype.start=function(){a.AudioTools._ins.playBG("bg",l.GameModel._ins.hornValue),p.default.Instance.initVolum(),this.scoreLabel.string=this.nowCheckpoint+"",this.judgeCreateCheckpoint(),c.GameCtrl._ins.isfirstPlayGame&&1==this.nowCheckpoint&&(this.guideNode.active=!0)},o.prototype.clickGuideHandle=function(){var e=this;this.showGuideCount++,2==this.showGuideCount&&(c.GameCtrl._ins.isfirstPlayGame=!1,this.guideNode.getChildByName("hand").getComponent(cc.Animation).stop(),cc.tween(this.guideNode).to(.5,{opacity:0}).call(function(){e.guideNode.active=!1}).start())},o.prototype.initBgCollider=function(){var e=l.GameModel._ins.mainGame.gameHeight,o=l.GameModel._ins.mainGame.gameWidth,t=Math.round(o/2),n=Math.round(e/2),r=this.bgManagerNode.getComponents(cc.PhysicsBoxCollider);r[0].offset.x=0,r[0].offset.y=n,r[0].size.width=o,r[0].size.height=10,r[1].offset.x=0,r[1].offset.y=-n,r[1].size.width=o,r[1].size.height=10,r[2].offset.x=t,r[2].offset.y=0,r[2].size.width=10,r[2].size.height=e,r[3].offset.x=-t,r[3].offset.y=0,r[3].size.width=10,r[3].size.height=e},o.prototype.initViewScal=function(){var e=l.GameModel._ins.mainGame.gameHeight,o=l.GameModel._ins.mainGame.gameWidth;if(1280!=e||640!=o){var t=1,n=1;(e<1280||o<720)&&(t=e/1280,n=o/720),this.viewScalValue=(n+t)/2}},o.prototype.initMap=function(){var e=l.GameModel._ins.mainGame.gameHeight,o=l.GameModel._ins.mainGame.gameWidth,t=s.PoolManager.getPoolObj("blockPre");t.opacity=0;var n=t.width,r=t.height;s.PoolManager.addPoolObj(t);for(var i=Math.floor(o/n),a=Math.floor(e/r),c=-Math.floor(e/2-r/2),p=-Math.floor(o/2-n/2),d=0;d<a;d++){this.mapInformation.push([cc.v2(0,0)]);for(var u=0;u<i;u++){var f=cc.v2(p,c);p+=n,this.mapInformation[d][u]=f}p=-Math.floor(o/2-n/2),c+=r}var h=this.mapInformation.length,m=this.mapInformation[0].length;for(d=0;d<h;d++)for(u=0;u<m;u++)this.allPoints.push([d,u])},o.prototype.judgeCreateCheckpoint=function(){var e=u.default.Instance().getCheckPointInformation();null==e?d.default.Instance().fixedCreateCheckpoint(this.nowCheckpoint):null!=e&&(d.default.Instance().depandTheCheckpointData(e),this.nowCheckpoint=e.checkpoint,this.scoreLabel.string=this.nowCheckpoint+"",l.GameModel._ins.gameScore=this.nowCheckpoint)},o.prototype.nextCheckpoint=function(){this.beforeNextCheckpoint(),this.showPassEffect()},o.prototype.showPassEffect=function(){for(var e=this,o=this.blockManagerNode.height,t=this.blockManagerNode.width,n=o/2*.6,r=o/2*.3,i=[],c=h.Tools.random(3,5,!0),p=0;p<c;p++){var d=h.Tools.random(-(t/2-100),t/2-100,!0),u=s.PoolManager.getPoolObj("passAnPre");u.scale=.1,u.setParent(this.blockManagerNode),u.setPosition(cc.v2(d,-o/2-50)),i.push(u)}var f=function(o){var t=h.Tools.random(-r,n,!0);cc.tween(i[o]).delay(.1*o).call(function(){a.AudioTools._ins.playAudio("isup",l.GameModel._ins.hornValue)}).to(.5,{position:cc.v2(i[o].x,t)}).to(.2,{scale:1}).call(function(){a.AudioTools._ins.playAudio("baozha",l.GameModel._ins.hornValue),i[o].getComponent(cc.Animation).play(),i[o].getComponent(cc.Animation).on("finished",function(e,t){"baozhaAn"===t.name&&cc.tween(i[o]).delay(.5).to(.8,{opacity:0},{easing:cc.easing.sineIn}).start()},e)}).start()};for(p=0;p<i.length-1;p++)f(p);this.lastPassNode=i[i.length-1];var m=this.lastPassNode.getComponent(cc.Animation),g=h.Tools.random(-r,n,!0);cc.tween(this.lastPassNode).delay(.6).call(function(){a.AudioTools._ins.playAudio("isup",l.GameModel._ins.hornValue,!1,!1,!0,.4)}).to(.5,{position:cc.v3(this.lastPassNode.x,g)}).to(.2,{scale:1}).call(function(){a.AudioTools._ins.playAudio("baozha",l.GameModel._ins.hornValue),e.lastPassNode.getComponent(cc.Animation).play()}).start(),m.on("finished",this.animationFinished,this)},o.prototype.animationFinished=function(e,o){var t=this;"baozhaAn"==o.name&&(a.AudioTools._ins.playAudio("pass",l.GameModel._ins.hornValue),cc.tween(this.lastPassNode).to(.8,{opacity:0}).call(function(){t.scheduleOnce(function(){d.default.Instance().getNextCheckpointInformation(t.allPoints,t.nowCheckpoint),t.nowCheckpoint++,t.scoreLabel.string=t.nowCheckpoint+"",l.GameModel._ins.gameScore=t.nowCheckpoint,t.nextPoint=!1},1),t.lastPassNode.destroy()}).start())},o.prototype.explodeAnimation=function(e){e.active=!0,e.getComponent(cc.Animation).play(),e.getComponent(cc.Animation).on("finished",function(o,t){var n=this;"baozhaAn"===t.name&&cc.tween(e).delay(.5).to(.8,{opacity:0},{easing:cc.easing.sineIn}).call(function(){f.default.Instance().destroyFirework(e.parent),n.scheduleOnce(function(){!1===n.judgeHasFireworksAndIsFire()&&(n.gameOver=!0,n.gameOvers())},.5)}).start()},this)},o.prototype.apertureEffect=function(e,o){e.scale=0,o.scale=0,e.active=!0,o.active=!0,cc.tween(e).parallel(cc.tween().to(.5,{opacity:100}),cc.tween().to(.5,{scale:3},{easing:cc.easing.quintOut})).to(.1,{opacity:0}).removeSelf().start(),cc.tween(o).delay(.2).parallel(cc.tween().to(.6,{opacity:150}),cc.tween().to(.6,{scale:2},{easing:cc.easing.quadOut})).to(.4,{opacity:0},{easing:cc.easing.sineIn}).start()},o.prototype.judgeHasFireworksAndIsFire=function(){if(!this.gameOver&&!this.nextPoint){var e=this.fireworksManagerNode.children,o=!1;if(0!==e.length||this.nextPoint){for(var t=0;t<e.length;t++)e[t].getComponent("FireworkSp").isFire&&(o=!0);return o}return this.nextPoint=!0,this.nextCheckpoint(),null}},o.prototype.beforeNextCheckpoint=function(){var e=this.blockManagerNode.children;if(0!=e.length)for(var o=0;o<e.length;o++)cc.tween(e[o]).to(.8,{opacity:0}).removeSelf().start();this.fireworksManagerNode.removeAllChildren()},o.prototype.allViewClickHandle=function(){if(!this.gameOver){var e=this.fireworksManagerNode.children;a.AudioTools._ins.playAudio("baozha",l.GameModel._ins.hornValue);for(var o=0;o<e.length;o++){var t=e[o].getComponent("FireworkSp");t.isCanClick&&t.clickHandle()}}},o.prototype.gameOvers=function(){this.gameOver&&(a.AudioTools._ins.stopBG(),a.AudioTools._ins.playAudio("over",l.GameModel._ins.hornValue),this.scoreLabel.node.opacity=0,cc.Tween.stopAll(),this.unscheduleAllCallbacks(),l.GameModel._ins.mainGame.gameEnd())},o.Instance=null,i([y(cc.Node)],o.prototype,"guideNode",void 0),i([y(cc.Node)],o.prototype,"fireworksManagerNode",void 0),i([y(cc.Node)],o.prototype,"bgManagerNode",void 0),i([y(cc.Node)],o.prototype,"blockManagerNode",void 0),i([y(cc.Label)],o.prototype,"scoreLabel",void 0),i([y(cc.Node)],o.prototype,"showEffectNode",void 0),t=i([g],o)}(cc.Component);t.default=v,cc._RF.pop()},{"../../common/AudioTools":"AudioTools","../../common/Tools":"Tools","../../ctrl/GameCtrl":"GameCtrl","../../manager/PoolManager":"PoolManager","../../model/GameModel":"GameModel","./CheckpointSp":"CheckpointSp","./CreateControl":"CreateControl","./HronSp":"HronSp","./StorageInformation":"StorageInformation"}],GameModel:[function(e,o,t){"use strict";cc._RF.push(o,"a8f362i/MJKRKQHQCpCjKll","GameModel"),Object.defineProperty(t,"__esModule",{value:!0}),t.GameModel=void 0;var n=function(){function e(){this.mianScene="MainGame",this.mainGame=null,this.gameScore=1,this.standScore=50,this.gameMaxScore=80,this.hornValue=.5,this.hornSwitch=1}return Object.defineProperty(e,"_ins",{get:function(){return this._instance},enumerable:!1,configurable:!0}),e._instance=new e,e}();t.GameModel=n,cc._RF.pop()},{}],HronSp:[function(e,o,t){"use strict";cc._RF.push(o,"8cb07jpixJNbYh0TJKvNHUn","HronSp");var n,r=this&&this.__extends||(n=function(e,o){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])})(e,o)},function(e,o){function t(){this.constructor=e}n(e,o),e.prototype=null===o?Object.create(o):(t.prototype=o.prototype,new t)}),i=this&&this.__decorate||function(e,o,t,n){var r,i=arguments.length,a=i<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,o,t,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(o,t,a):r(o,t))||a);return i>3&&a&&Object.defineProperty(o,t,a),a};Object.defineProperty(t,"__esModule",{value:!0});var a=e("../../common/AudioTools"),c=e("../../common/Tools"),s=e("../../model/GameModel"),l=cc._decorator,p=l.ccclass,d=l.property,u=function(e){function o(){var o=null!==e&&e.apply(this,arguments)||this;return o.closeSF=null,o.openSF=null,o.btnBgNode=null,o}var t;return r(o,e),t=o,o.prototype.onLoad=function(){null!=t.Instance&&t.Instance.destroy(),t.Instance=this},o.prototype.start=function(){var e=this;this.scheduleOnce(function(){e.node.active=!1},10)},o.prototype.initVolum=function(){var e=c.Tools.getStorage("lightthefireworkhronSwitch");null!=e&&(1==e?this.btnBgNode.getComponent(cc.Sprite).spriteFrame=this.openSF:0==e&&(a.AudioTools._ins.stopBG(),this.btnBgNode.getComponent(cc.Sprite).spriteFrame=this.closeSF))},o.prototype.clickHronHandle=function(){return s.GameModel._ins.hornSwitch?s.GameModel._ins.hornSwitch?(s.GameModel._ins.hornSwitch=0,s.GameModel._ins.hornValue=0,a.AudioTools._ins.stopBG(),this.btnBgNode.getComponent(cc.Sprite).spriteFrame=this.closeSF,void c.Tools.setStorage("lightthefireworkhronSwitch",s.GameModel._ins.hornSwitch)):void 0:(s.GameModel._ins.hornSwitch=1,s.GameModel._ins.hornValue=.5,a.AudioTools._ins.playBG("bg"),this.btnBgNode.getComponent(cc.Sprite).spriteFrame=this.openSF,void c.Tools.setStorage("lightthefireworkhronSwitch",s.GameModel._ins.hornSwitch))},o.Instance=null,i([d(cc.SpriteFrame)],o.prototype,"closeSF",void 0),i([d(cc.SpriteFrame)],o.prototype,"openSF",void 0),i([d(cc.Node)],o.prototype,"btnBgNode",void 0),t=i([p],o)}(cc.Component);t.default=u,cc._RF.pop()},{"../../common/AudioTools":"AudioTools","../../common/Tools":"Tools","../../model/GameModel":"GameModel"}],InitGame:[function(e,o,t){"use strict";cc._RF.push(o,"11d57xkx8xC/bpnzMOQ9DT5","InitGame");var n,r=this&&this.__extends||(n=function(e,o){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])})(e,o)},function(e,o){function t(){this.constructor=e}n(e,o),e.prototype=null===o?Object.create(o):(t.prototype=o.prototype,new t)}),i=this&&this.__decorate||function(e,o,t,n){var r,i=arguments.length,a=i<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,o,t,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(o,t,a):r(o,t))||a);return i>3&&a&&Object.defineProperty(o,t,a),a};Object.defineProperty(t,"__esModule",{value:!0});var a=e("../common/weiSanTools"),c=e("../manager/PlatformManager"),s=cc._decorator,l=s.ccclass,p=s.property,d=function(e){function o(){var o=null!==e&&e.apply(this,arguments)||this;return o.resNodeArr=[],o.rType=c.releaseType.test_TEST,o.storageKey="demo_Game",o}return r(o,e),o.prototype.onLoad=function(){this.rType==c.releaseType.h5_weiSan&&(this.rType=c.releaseType.h5_common),c.PlatformManager.releaseType=this.rType,c.PlatformManager.storageKey=this.storageKey,c.PlatformManager.initPlatform(),this.initResNode(),this.initScreen(),a.weiSan.initLog()},o.prototype.initResNode=function(){for(var e=0;e<this.resNodeArr.length;e++){var o=cc.instantiate(this.resNodeArr[e]);this.node.addChild(o)}},o.prototype.initScreen=function(){a.weiSan.log("\u7cfb\u7edfOS: "+cc.sys.os);var e=cc.find("Canvas").getComponent(cc.Canvas);cc.sys.os==cc.sys.OS_ANDROID||cc.sys.os==cc.sys.OS_IOS?(e.fitWidth=!0,e.fitHeight=!1):(e.fitWidth=!0,e.fitHeight=!0)},i([p([cc.Prefab])],o.prototype,"resNodeArr",void 0),i([p({type:cc.Enum(c.releaseType)})],o.prototype,"rType",void 0),i([p],o.prototype,"storageKey",void 0),i([l],o)}(cc.Component);t.default=d,cc._RF.pop()},{"../common/weiSanTools":"weiSanTools","../manager/PlatformManager":"PlatformManager"}],InterfaceSp:[function(e,o,t){"use strict";cc._RF.push(o,"58ebbhJ5udKtqtdZzktZN7z","InterfaceSp"),Object.defineProperty(t,"__esModule",{value:!0}),cc._RF.pop()},{}],Level:[function(e,o,t){"use strict";cc._RF.push(o,"38d926erDhK7pi2FuR7GIOc","Level"),Object.defineProperty(t,"__esModule",{value:!0}),t.moveTypes=t.Level=void 0,t.Level={level_1:{firework:2,block:0,moveType:[5,3]},level_2:{firework:2,block:0,moveType:[1,5],blockFixed:!1},level_3:{firework:3,block:1,moveType:[1,3,5],blockFixed:!1},level_4:{firework:3,block:1,moveType:[2,3,5],blockFixed:!1},level_5:{firework:3,block:2,moveType:[1,3,5],blockFixed:!1},level_6:{firework:3,block:0,moveType:[2,4,5],blockFixed:!1},level_7:{firework:4,block:0,moveType:[2,4,5,3],blockFixed:!1},level_8:{firework:5,block:0,moveType:[1,2,4,5,3],blockFixed:!1},level_9:{firework:4,block:1,moveType:[1,3,5,5],blockFixed:!0},level_10:{firework:4,block:2,moveType:[1,2,5,4],blockFixed:!1},level_11:{firework:5,block:1,moveType:[1,2,3,5,6],blockFixed:!1},level_12:{firework:5,block:3,moveType:[1,2,3,4,5],blockFixed:!1},level_13:{firework:4,block:3,moveType:[1,2,4,5],blockFixed:!1},level_14:{firework:6,block:2,moveType:[2,3,1,4,5,6],blockFixed:!1},level_15:{firework:5,block:3,moveType:[1,3,5,5,6],blockFixed:!1},level_16:{firework:4,block:4,moveType:[1,5,3,5],blockFixed:!1},level_17:{firework:5,block:5,moveType:[5,2,4,5,6],blockFixed:!1},level_18:{firework:6,block:6,moveType:[5,2,5,4,5,6],blockFixed:!1},level_19:{firework:5,block:6,moveType:[1,5,4,5,6],blockFixed:!1},level_20:{firework:5,block:5,moveType:[5,2,4,5,5],blockFixed:!1},level_21:{firework:5,block:6,moveType:[1,2,3,4,5],blockFixed:!1},level_22:{firework:5,block:6,moveType:[1,2,3,5,6],blockFixed:!1},level_23:{firework:5,block:6,moveType:[2,2,4,4,5],blockFixed:!1},level_24:{firework:5,block:6,moveType:[1,2,3,4,6],blockFixed:!1},level_25:{firework:5,block:3,moveType:[1,5,5,4,6],blockFixed:!1},level_26:{firework:5,block:6,moveType:[5,2,5,3,5],blockFixed:!1},level_27:{firework:6,block:7,moveType:[1,5,3,5,5,6],blockFixed:!1},level_28:{firework:6,block:4,moveType:[6,5,2,5,4,5],blockFixed:!1},level_29:{firework:6,block:7,moveType:[1,5,5,3,5,6],blockFixed:!1},level_30:{firework:6,block:7,moveType:[1,2,3,4,5,6],blockFixed:!1}},t.moveTypes={4:[[1,2,3,5],[2,3,5,4],[1,4,3,5]],5:[[1,2,3,4,5],[5,4,3,2,1],[1,2,4,5,6]],6:[[1,2,3,4,5,6],[6,4,5,3,2,1],[1,2,4,5,3,6]],7:[[1,2,3,4,5,6,5],[2,2,3,5,4,6,4],[5,5,5,4,2,3,4]],8:[[2,1,4,5,6,3,1,2],[2,4,5,6,1,4,5,3],[2,5,2,5,1,4,3,6]]},cc._RF.pop()},{}],LoadTools:[function(e,o,t){"use strict";cc._RF.push(o,"b96adtj6ztJp5Q4tD5LbQij","LoadTools"),Object.defineProperty(t,"__esModule",{value:!0}),t.LoadTools=void 0;var n=e("./Tools"),r=e("./weiSanTools"),i=function(){function e(){}return Object.defineProperty(e,"_ins",{get:function(){return this._instance},enumerable:!1,configurable:!0}),e.prototype.loadScene=function(e,o,t){void 0===t&&(t=!0),t&&n.Tools.clearResDic(),cc.director.preloadScene(e,function(){cc.director.loadScene(e,o)})},e.prototype.loadResPrefab=function(e,o,t,n,r){void 0===r&&(r=0),this.loadResAny(e,cc.Prefab,function(e){var i=cc.instantiate(e);t&&t.addChild(i,r),n&&(i.position=cc.v3(n.x,n.y,0)),null!=o&&o(i)})},e.prototype.loadResSpriteFrame=function(e,o,t,n,i,a){void 0===i&&(i=0),cc.loader.loadRes(e,cc.SpriteFrame,function(e,c){e?r.weiSan.error(e):(o.getComponent(cc.Sprite).spriteFrame=c,t&&t.addChild(o,i),n&&(o.position=cc.v3(n.x,n.y,0)),null!=a&&a(o))})},e.prototype.loadResAny=function(e,o,t){cc.loader.loadRes(e,o,function(e,o){e?r.weiSan.error(e):null!=t&&t(o)})},e._instance=new e,e}();t.LoadTools=i,cc._RF.pop()},{"./Tools":"Tools","./weiSanTools":"weiSanTools"}],MainGame:[function(e,o,t){"use strict";cc._RF.push(o,"ef932zNAq1A1IMD8IZjy4f7","MainGame");var n,r=this&&this.__extends||(n=function(e,o){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])})(e,o)},function(e,o){function t(){this.constructor=e}n(e,o),e.prototype=null===o?Object.create(o):(t.prototype=o.prototype,new t)}),i=this&&this.__decorate||function(e,o,t,n){var r,i=arguments.length,a=i<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,o,t,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(o,t,a):r(o,t))||a);return i>3&&a&&Object.defineProperty(o,t,a),a};Object.defineProperty(t,"__esModule",{value:!0});var a=e("../common/Tools"),c=e("../common/weiSanTools"),s=e("../ctrl/GameCtrl"),l=e("../manager/EventManager"),p=e("../manager/UIManager"),d=e("../model/GameModel"),u=e("./game/GameMainSp"),f=cc._decorator,h=f.ccclass,m=(f.property,function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return r(o,e),o.prototype.onLoad=function(){this.gameWidth=cc.view.getVisibleSize().width,this.gameHeight=cc.view.getVisibleSize().height,cc.director.getCollisionManager().enabled=!0,cc.director.getPhysicsManager().enabled=!0,d.GameModel._ins.mainGame=this,this.addTouchEvents(),this.addInitListener()},o.prototype.start=function(){this.initGame()},o.prototype.update=function(){s.GameCtrl._ins.gameState,s.GameState.Start},o.prototype.addTouchEvents=function(){cc.macro.ENABLE_MULTI_TOUCH=!1,this.node.on(cc.Node.EventType.TOUCH_START,this.touchStartBack,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMoveBack,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEndBack,this)},o.prototype.touchStartBack=function(e){s.GameCtrl._ins.boolTouch&&(u.default.Instance.clickGuideHandle(),this.toushStartPos=a.Tools.getToNodePosForWorld(e.getLocation(),this.node))},o.prototype.touchMoveBack=function(){s.GameCtrl._ins.boolTouch},o.prototype.touchEndBack=function(){s.GameCtrl._ins.boolTouch},o.prototype.initGame=function(){s.GameCtrl._ins.initGame(),d.GameModel._ins.hornSwitch=1,d.GameModel._ins.hornValue=.5;var e=a.Tools.getStorage("lightthefireworkhronSwitch");null!==e&&0==e&&(d.GameModel._ins.hornSwitch=0,d.GameModel._ins.hornValue=0),s.GameCtrl._ins.boolTouch=!0},o.prototype.startGame=function(){},o.prototype.gameEnd=function(){s.GameCtrl._ins.gameState!=s.GameState.Over&&(s.GameCtrl._ins.overGame(),c.weiSan.log("\u6e38\u620f\u7ed3\u675f"),this.scheduleOnce(function(){p.UIManager.OpenUI("OverUI")},.5))},o.prototype.addInitListener=function(){l.EventManager.addListener(l.EventData.START_GAME,this.startGame.bind(this),this.node)},o.prototype.onDestroy=function(){l.EventManager.removeListenerForTarget(this.node)},i([h],o)}(cc.Component));t.default=m,cc._RF.pop()},{"../common/Tools":"Tools","../common/weiSanTools":"weiSanTools","../ctrl/GameCtrl":"GameCtrl","../manager/EventManager":"EventManager","../manager/UIManager":"UIManager","../model/GameModel":"GameModel","./game/GameMainSp":"GameMainSp"}],NetworkManager:[function(e,o,t){"use strict";cc._RF.push(o,"7368bvx8K9EabyOcKON6XK5","NetworkManager"),Object.defineProperty(t,"__esModule",{value:!0}),t.msgHttpUrl=t.NetworkManager=void 0;var n=e("../common/weiSanTools"),r=e("./PlatformManager"),i=function(){function e(){}return e.initNetwork=function(){r.PlatformManager.releaseType==r.releaseType.h5_common||r.PlatformManager.releaseType==r.releaseType.h5_weiSan?this.initNet_H5():r.PlatformManager.releaseType==r.releaseType.test_TEST&&(this.moreGameUrl="http://m.i8box.com/",n.weiSan.log("\u53d1\u9001:---\u6e38\u620f\u52a0\u8f7d\u6210\u529f!"))},e.initNet_H5=function(){this.getHttpGameId(),this.sendLoadGame()},e.getHttpGameId=function(){var e=document.URL,o=0;if(r.PlatformManager.releaseType==r.releaseType.h5_common){var i=window.location.href,a=i.substring(0,i.lastIndexOf("//")+2),c=window.location.host,s=(e=document.URL).lastIndexOf("/"),l=e.substring(0,s);s=l.lastIndexOf("/"),o=parseInt(l.substring(s+1,l.length)),this.gameHttpId=o;var p=a+c,d=p.lastIndexOf("//"),u=p.substring(d+2,p.indexOf("//")+4);if("g."==u){var f=p.replace(u,"");p=f}this.moreGameUrl=p,t.msgHttpUrl.gamePv_commonH5=a+c+"/Service/GamePv/index",t.msgHttpUrl.score_commonH5=a+c+"/Service/Score/index"}else{var h=e.substring(e.lastIndexOf("/game/")+1,e.length).split("/");h.length>=2&&(o=parseInt(h[1])),this.moreGameUrl="http://m.i8box.com/"}this.gameHttpId=o,n.weiSan.log("gameId:",o,this.moreGameUrl)},e.sendLoadGame=function(){r.PlatformManager.releaseType==r.releaseType.h5_weiSan?this.sendMsg(t.msgHttpUrl.gamePv_weiSanH5,"gameID="+this.gameHttpId.toString(),this.loadGameBack):r.PlatformManager.releaseType==r.releaseType.h5_common&&this.sendMsg(t.msgHttpUrl.gamePv_commonH5,"gameId="+this.gameHttpId.toString(),this.loadGameBack)},e.loadGameBack=function(){n.weiSan.log("gamePv\u52a0\u8f7d\u6210\u529f")},e.sendGameScore=function(e,o){r.PlatformManager.releaseType==r.releaseType.h5_weiSan?this.sendMsg(t.msgHttpUrl.score_weiSanH5,"gameScore="+e+"&gameId="+this.gameHttpId+"&gameType="+o,this.sendScoreBack):r.PlatformManager.releaseType==r.releaseType.h5_common&&this.sendMsg(t.msgHttpUrl.score_commonH5,"gameScore="+e+"&gameId="+this.gameHttpId+"&gameType="+o,this.sendScoreBack)},e.sendScoreBack=function(e){n.weiSan.log("---\u63d0\u4ea4\u5206\u6570\u6210\u529f!"+e),null!=e.currentTarget.response&&""!=e.currentTarget.response&&JSON.parse(e.currentTarget.response)},e.sendMsg=function(e,o,t){var n=cc.loader.getXMLHttpRequest();n.onreadystatechange=t,n.open("POST",e),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send(o)},e.gameHttpId=0,e}();t.NetworkManager=i,window.NetworkManager=i,t.msgHttpUrl={gamePv_weiSanH5:"http://www.i8box.com/admin.php/Activityshow/gamelogo",score_weiSanH5:"http://www.i8box.com/admin.php/Gamescore/saveGamescore",gamePv_commonH5:"",score_commonH5:""},cc._RF.pop()},{"../common/weiSanTools":"weiSanTools","./PlatformManager":"PlatformManager"}],OtherModel:[function(e,o,t){"use strict";cc._RF.push(o,"a7d991QTY1Bt7JTY7l9t4I2","OtherModel"),Object.defineProperty(t,"__esModule",{value:!0}),t.fireworksActionType=t.interTag=t.groupAll=t.zIndexAll=void 0,function(e){e[e.player_Z=10]="player_Z",e[e.bg_Z=1]="bg_Z"}(t.zIndexAll||(t.zIndexAll={})),function(e){e[e.default=0]="default",e[e.UI=2]="UI"}(t.groupAll||(t.groupAll={})),function(e){e[e.fireworks_Tag=1]="fireworks_Tag",e[e.wallLR_Tag=21]="wallLR_Tag",e[e.wallDT_Tag=22]="wallDT_Tag",e[e.block_Tag=3]="block_Tag",e[e.explode_Tag=4]="explode_Tag"}(t.interTag||(t.interTag={})),function(e){e[e._left=1]="_left",e[e._right=2]="_right",e[e._up=3]="_up",e[e._down=4]="_down",e[e._freedom=5]="_freedom",e[e._static=6]="_static"}(t.fireworksActionType||(t.fireworksActionType={})),cc._RF.pop()},{}],OverUI:[function(e,o,t){"use strict";cc._RF.push(o,"eef84sRpGtEYKFhq3Zv4xGF","OverUI");var n,r=this&&this.__extends||(n=function(e,o){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])})(e,o)},function(e,o){function t(){this.constructor=e}n(e,o),e.prototype=null===o?Object.create(o):(t.prototype=o.prototype,new t)}),i=this&&this.__decorate||function(e,o,t,n){var r,i=arguments.length,a=i<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,o,t,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(o,t,a):r(o,t))||a);return i>3&&a&&Object.defineProperty(o,t,a),a};Object.defineProperty(t,"__esModule",{value:!0});var a=e("../ads/AdManager"),c=e("../common/Tools"),s=e("../common/weiSanTools"),l=e("../manager/NetworkManager"),p=e("../manager/PlatformManager"),d=e("../manager/UIManager"),u=e("../model/GameModel"),f=e("../model/WordsModel"),h=cc._decorator,m=h.ccclass,g=h.property,y=function(e){function o(){var o=null!==e&&e.apply(this,arguments)||this;return o.bgSpr=null,o.viewNode=null,o.scoreLab=null,o.maxScoreLab=null,o.infoText=null,o.aginBtn=null,o.moreGame=null,o.isClick=!1,o}return r(o,e),o.prototype.onLoad=function(){this.bgSpr.opacity=0,this.viewNode.y+=1e3,this.aginBtn.scale=0,this.initShowInfo(),this.addBtnEvent(),l.NetworkManager.sendGameScore(u.GameModel._ins.gameScore,1),a.AdManager.showIntersAd(),this.node.on(cc.Node.EventType.TOUCH_START,this.aginGame,this)},o.prototype.start=function(){"CN"==c.Tools.getLanguageType()?c.Tools.setSpriteFrame(this.moreGame.getChildByName("Background"),"moreGame_CN"):c.Tools.setSpriteFrame(this.moreGame.getChildByName("Background"),"moreGame_EN")},o.prototype.initShowInfo=function(){this.scoreLab.string=u.GameModel._ins.gameScore.toString();var e=this.getBeatItScore(u.GameModel._ins.gameScore,u.GameModel._ins.standScore,u.GameModel._ins.gameMaxScore);this.infoText.string=this.getBeatItStr(u.GameModel._ins.gameScore,e,!0);var o=c.Tools.getStorage("gameOverMaxScore");(!o||o<=u.GameModel._ins.gameScore)&&(o=u.GameModel._ins.gameScore,c.Tools.setStorage("gameOverMaxScore",u.GameModel._ins.gameScore)),this.maxScoreLab.string=o.toString(),p.PlatformManager.osType==p.osType.h5&&("CN"==c.Tools.getLanguageType()||"CHT"==c.Tools.getLanguageType()?document.title=f.WordsModel.getStrForLanguage("overTitle_1","CN")+"<"+f.WordsModel.getStrForLanguage("gameName","CN")+">"+f.WordsModel.getStrForLanguage("overTitle_2","CN")+this.getBeatItStr(u.GameModel._ins.gameScore,e,!1):document.title=f.WordsModel.getStrForLanguage("overTitle_1","EN")+"<"+f.WordsModel.getStrForLanguage("gameName","EN")+">"+f.WordsModel.getStrForLanguage("overTitle_2","EN")+this.getBeatItStr(u.GameModel._ins.gameScore,e,!1),console.log(document.title))},o.prototype.addBtnEvent=function(){var e=this;this.aginBtn.on("click",function(){e.isClick&&e.aginGame()}),this.moreGame.on("click",function(){e.isClick&&(p.PlatformManager.releaseType!=p.releaseType.test_TEST?window.location.href=l.NetworkManager.moreGameUrl:s.weiSan.log("\u6d4b\u8bd5\u6a21\u5f0f \u66f4\u591a\u6e38\u620fUrl: "+l.NetworkManager.moreGameUrl))})},o.prototype.aginGame=function(){this.isClick=!1,d.UIManager.CloseUI("OverUI"),this.scheduleOnce(function(){cc.director.preloadScene(u.GameModel._ins.mianScene,function(){cc.director.loadScene(u.GameModel._ins.mianScene)})},.2)},o.prototype.getBeatItStr=function(e,o,t){void 0===t&&(t=!0);var n=f.WordsModel.getStrForLanguage("overScoreInfo_0");return e>0&&(n=f.WordsModel.getStrForLanguage("overScoreInfo_1")+o+"%"+f.WordsModel.getStrForLanguage("overScoreInfo_2")),n},o.prototype.getBeatItScore=function(e,o,t){if(e>=t)return 100;if(e<=o){var n=e/o*80+c.Tools.random(-3,3);return Math.max(Math.floor(n),5)}return n=80+(e-o)/(t-o)*20+c.Tools.random(-3,3),Math.min(Math.floor(n),99)},o.prototype.openUI=function(){var e=this;this.bgSpr.runAction(cc.fadeTo(.3,100)),this.viewNode.runAction(cc.sequence(cc.moveBy(.3,cc.v2(0,-1e3)).easing(cc.easeBackOut()),cc.callFunc(function(){e.isClick=!0,e.aginBtn.runAction(cc.scaleTo(.3,1).easing(cc.easeBackOut()))})))},o.prototype.closeUI=function(){this.bgSpr.runAction(cc.fadeOut(.3)),this.viewNode.runAction(cc.moveBy(.25,cc.v2(0,2500)).easing(cc.easeBackIn()))},i([g(cc.Node)],o.prototype,"bgSpr",void 0),i([g(cc.Node)],o.prototype,"viewNode",void 0),i([g(cc.Label)],o.prototype,"scoreLab",void 0),i([g(cc.Label)],o.prototype,"maxScoreLab",void 0),i([g(cc.Label)],o.prototype,"infoText",void 0),i([g(cc.Node)],o.prototype,"aginBtn",void 0),i([g(cc.Node)],o.prototype,"moreGame",void 0),i([m],o)}(d.UIManager);t.default=y,cc._RF.pop()},{"../ads/AdManager":"AdManager","../common/Tools":"Tools","../common/weiSanTools":"weiSanTools","../manager/NetworkManager":"NetworkManager","../manager/PlatformManager":"PlatformManager","../manager/UIManager":"UIManager","../model/GameModel":"GameModel","../model/WordsModel":"WordsModel"}],PlatformManager:[function(e,o,t){"use strict";cc._RF.push(o,"526f4NSDmdHDqwXmWoL2A3b","PlatformManager"),Object.defineProperty(t,"__esModule",{value:!0}),t.osType=t.releaseType=t.PlatformManager=void 0;var n,r=e("../ads/AdManager"),i=e("./NetworkManager"),a=function(){function e(){}return e.initPlatform=function(){this.loadGameBool||(this.initOsType(),i.NetworkManager.initNetwork(),e.releaseType!=t.releaseType.h5_weiSan&&e.releaseType!=t.releaseType.h5_common||("NaN"==i.NetworkManager.toString()&&(e.releaseType==t.releaseType.h5_weiSan?window.location.href=i.NetworkManager.moreGameUrl:window.location.href="http://www.i8box.com/"),loadInScene(),cc.view.enableAutoFullScreen(!1)),e.releaseType!=t.releaseType.applet_ziJie&&(window.AdManager=r.AdManager),this.loadGameBool=!0)},e.initOsType=function(){this.releaseType==t.releaseType.APP_google?this.osType=n.android:this.releaseType==t.releaseType.APP_ios?this.osType=n.ios:this.releaseType==t.releaseType.applet_ziJie?this.osType=n.applet:this.osType=n.h5},e.setStorage=function(o,n,r){if(void 0===r&&(r=!1),o=this.storageKey+o,e.releaseType===t.releaseType.applet_ziJie)return tt.setStorageSync(o,n);r&&(n=JSON.stringify(n)),cc.sys.localStorage.setItem(o,n)},e.getStorage=function(o,n){void 0===n&&(n=!1),o=this.storageKey+o;var r=null;return e.releaseType===t.releaseType.applet_ziJie?r=tt.getStorageSync(o):(r=cc.sys.localStorage.getItem(o))&&"NaN"!=r.toString()&&"null"!=r.toString()?n?r=JSON.parse(r):isNaN(r)||(r=parseInt(r)):r=null,r},e.storageKey="demo_Game_",e.loadGameBool=!1,e}();t.PlatformManager=a,window.PlatformManager=a,t.releaseType=cc.Enum({test_TEST:1,h5_weiSan:2,h5_common:3,applet_ziJie:4,APP_google:5,APP_ios:6}),function(e){e[e.h5=1]="h5",e[e.android=2]="android",e[e.ios=3]="ios",e[e.applet=4]="applet"}(n=t.osType||(t.osType={})),cc._RF.pop()},{"../ads/AdManager":"AdManager","./NetworkManager":"NetworkManager"}],PoolManager:[function(e,o,t){"use strict";cc._RF.push(o,"6d71a4IRmhHHqQ3Zkrz3M5U","PoolManager"),Object.defineProperty(t,"__esModule",{value:!0}),t.PoolManager=void 0;var n=e("../common/Tools"),r=e("../common/weiSanTools"),i=function(){function e(){}return e.addPoolObj=function(e){null==this.PoolDic[e.name]&&(this.PoolDic[e.name]=new cc.NodePool(e.name)),this.PoolDic[e.name].put(e)},e.getPoolObj=function(e){return null==this.PoolDic[e]?(r.weiSan.warn("\u6ca1\u6709\u6dfb\u52a0\u5bf9\u8c61\u6c60\uff1a",e),this.PoolDic[e]=new cc.NodePool(e),n.Tools.newPrefab(e)):this.PoolDic[e].size()>1?this.PoolDic[e].get():n.Tools.newPrefab(e)},e.clearPool=function(e){if(null!=this.PoolDic[e])return this.PoolDic[e].clear();r.weiSan.warn("\u6ca1\u6709\u6dfb\u52a0\u5bf9\u8c61\u6c60\uff1a",e)},e.clearAllPool=function(){for(var e in this.PoolDic)Object.prototype.hasOwnProperty.call(this.PoolDic,e)&&this.clearPool(e)},e.PoolDic=new Map,e}();t.PoolManager=i,cc._RF.pop()},{"../common/Tools":"Tools","../common/weiSanTools":"weiSanTools"}],ResArr:[function(e,o,t){"use strict";cc._RF.push(o,"56af2D00XFDX6lyw8ZO/zKX","ResArr");var n,r=this&&this.__extends||(n=function(e,o){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])})(e,o)},function(e,o){function t(){this.constructor=e}n(e,o),e.prototype=null===o?Object.create(o):(t.prototype=o.prototype,new t)}),i=this&&this.__decorate||function(e,o,t,n){var r,i=arguments.length,a=i<3?o:null===n?n=Object.getOwnPropertyDescriptor(o,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,o,t,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(o,t,a):r(o,t))||a);return i>3&&a&&Object.defineProperty(o,t,a),a};Object.defineProperty(t,"__esModule",{value:!0});var a=e("../common/Tools"),c=cc._decorator,s=c.ccclass,l=c.property,p=function(e){function o(){var o=null!==e&&e.apply(this,arguments)||this;return o.SpriteFrameArr=[],o.PrefabArr=[],o.audiosArr=[],o}return r(o,e),o.prototype.onLoad=function(){this.addAudio(),this.addPrefabs(),this.addSpriteFrame()},o.prototype.addAudio=function(){for(var e=0;e<this.audiosArr.length;e++)if(this.audiosArr[e]){var o=this.audiosArr[e];a.Tools.AudioClipDic.set(o.name,o)}},o.prototype.addSpriteFrame=function(){for(var e=0;e<this.SpriteFrameArr.length;e++)if(this.SpriteFrameArr[e]){var o=this.SpriteFrameArr[e];a.Tools.SpriteFrameDic.set(o.name,o)}},o.prototype.addPrefabs=function(){for(var e=0;e<this.PrefabArr.length;e++)if(this.PrefabArr[e]){var o=this.PrefabArr[e];a.Tools.PrefabDic.set(o.data.name,o)}},i([l([cc.SpriteFrame])],o.prototype,"SpriteFrameArr",void 0),i([l([cc.Prefab])],o.prototype,"PrefabArr",void 0),i([l([cc.AudioClip])],o.prototype,"audiosArr",void 0),i([s],o)}(cc.Component);t.default=p,cc._RF.pop()},{"../common/Tools":"Tools"}],StorageInformation:[function(e,o,t){"use strict";cc._RF.push(o,"5854bl98IZAqKfnRWBOHGWd","StorageInformation"),Object.defineProperty(t,"__esModule",{value:!0});var n=e("../../common/Tools"),r=function(){function e(){}return e.Instance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.getCheckPointInformation=function(){var e=n.Tools.getStorage("lightthefireworksValueGameData",!0),o={checkpoint:0,roadblockNum:0,roadblockPos:[],fireworkNum:0,fireworkPos:[],fireworkStatus:[],fireworkIsFire:[],blockIsRotation:[]};if(null===e)return null;if(o.checkpoint=e.checkpoint,o.roadblockNum=e.roadblockNum,0!=e.roadblockNum)for(var t=0;t<e.roadblockNum;t++)o.roadblockPos.push(new cc.Vec2(e.roadblockPos[t].x,e.roadblockPos[t].y));for(o.fireworkNum=e.fireworkNum,t=0;t<e.fireworkNum;t++)o.fireworkPos.push(new cc.Vec2(e.fireworkPos[t].x,e.fireworkPos[t].y));return o.fireworkStatus=e.fireworkStatus,o.fireworkIsFire=e.fireworkIsFire,o.blockIsRotation=e.blockIsRotation,e=null,o},e.prototype.saveCheckPointInformation=function(e){n.Tools.setStorage("lightthefireworksValueGameData",e,!0)},e}();t.default=r,cc._RF.pop()},{"../../common/Tools":"Tools"}],Tools:[function(e,o,t){"use strict";cc._RF.push(o,"1cabc0YRwVLlaPoVAuI9R3d","Tools"),Object.defineProperty(t,"__esModule",{value:!0}),t.Tools=void 0;var n=e("../manager/PlatformManager"),r=e("./LoadTools"),i=function(){function e(){}return e.clearResDic=function(){this.AudioClipDic.clear(),this.SpriteFrameDic.clear(),this.PrefabDic.clear()},e.setStorage=function(e,o,t){void 0===t&&(t=!1),n.PlatformManager.setStorage(e,o,t)},e.getStorage=function(e,o){return void 0===o&&(o=!1),n.PlatformManager.getStorage(e,o)},e.newPrefab=function(e,o,t,n,r){return void 0===n&&(n=0),a._ins.newPrefab(e,r,o,t,n)},e.newSprite=function(e,o,t,n,r){return void 0===n&&(n=0),a._ins.newSprite(e,r,o,t,n)},e.setSpriteFrame=function(e,o){a._ins.setSpriteFrame(e,o)},e.setNodeGroupIndex=function(e,o){a._ins.setNodeGroupIndex(e,o)},e.setBtnClickSpr=function(e,o,t){a._ins.setBtnClickSpr(e,o,t)},e.setSpriteState=function(e,o){a._ins.setSpriteState(e,o)},e.setNodeParent=function(e,o){a._ins.setNodeParent(e,o)},e.random=function(e,o,t){return void 0===t&&(t=!0),c._ins.random(e,o,t)},e.getRandomItem=function(e){var o=e.length;return e[Math.floor(Math.random()*o)]},e.chooseRandom=function(e){return c._ins.chooseRandom(e)},e.refractionY=function(e){return c._ins.refractionY(e)},e.refractionX=function(e){return c._ins.refractionX(e)},e.aginSortArr=function(e){c._ins.aginSortArr(e)},e.sortArrForObject=function(e,o,t){void 0===t&&(t=!1),c._ins.sortArrForObject(e,o,t)},e.getDiffNumRandom=function(e,o,t){return c._ins.getDiffNumRandom(e,o,t)},e.getAngleForPos=function(e,o,t){return void 0===t&&(t=!1),s._ins.getAngleForPos(e,o,t)},e.getDistance=function(e,o){return s._ins.getDistance(e,o)},e.getPosForAngleLen=function(e,o,t){return void 0===t&&(t=cc.v2(0,0)),s._ins.getPosForAngleLen(e,o,t)},e.getToNodePosForNode=function(e,o){return s._ins.getToNodePosForNode(e,o)},e.getToWorldPosAR=function(e){return s._ins.getToWorldPosAR(e)},e.getToNodePosForWorld=function(e,o){return s._ins.getToNodePosForWorld(e,o)},e.getHorizontalLineDistance=function(o,t,n){var r=e.getToWorldPosAR(o),i=e.getToWorldPosAR(t),a=e.getToNodePosForWorld(cc.v2(r),n),c=e.getToNodePosForWorld(cc.v2(i),n);return e.getDistance(cc.v2(a.x,0),cc.v2(c.x,0))},e.getVerticalLineDistance=function(o,t,n){var r=e.getToWorldPosAR(o),i=e.getToWorldPosAR(t),a=e.getToNodePosForWorld(cc.v2(r),n),c=e.getToNodePosForWorld(cc.v2(i),n);return e.getDistance(cc.v2(0,a.y),cc.v2(0,c.y))},e.removeArrForValue=function(e,o){return e.splice(e.indexOf(o),1)},e.addArrNoValue=function(e,o){return e.indexOf(o)<0&&(e.push(o),!0)},e.addArrIndex=function(e,o,t){return e.splice(o,0,t)},e.getMaxIndex=function(e){var o={index:0,max:0},t=Math.max.apply(Math,e),n=e.indexOf(t);return o.index=n,o.max=t,o},e.getMinIndex=function(e){var o={index:0,min:0},t=Math.min.apply(Math,e),n=e.indexOf(t);return o.index=n,o.min=t,o},e.insertStrForIndex=function(e,o,t){return e.slice(0,o)+t+e.slice(o)},e.prefixInteger=function(e,o){return void 0===o&&(o=2),(Array(o).join("0")+e).slice(-o)},e.getLanguageType=function(){var e="EN";return cc.sys.language==cc.sys.LANGUAGE_CHINESE?e=-1!=cc.sys.languageCode.toLowerCase().indexOf("zh-cn")||-1!=cc.sys.languageCode.toLowerCase().indexOf("zh_cn")||-1!=cc.sys.languageCode.toLowerCase().indexOf("zh-hans-cn")?"CN":"CHT":cc.sys.language==cc.sys.LANGUAGE_KOREAN?e="KOR":cc.sys.language==cc.sys.LANGUAGE_JAPANESE?e="JP":"th-TH"==window.navigator.language&&(e="TH"),e},e.SpriteFrameDic=new Map,e.PrefabDic=new Map,e.AudioClipDic=new Map,e}();t.Tools=i;var a=function(){function e(){}return Object.defineProperty(e,"_ins",{get:function(){return this._instance},enumerable:!1,configurable:!0}),e.prototype.newPrefab=function(e,o,t,n,a){void 0===a&&(a=0);var c=i.PrefabDic.get(e),s=null;return null!=c?(s=cc.instantiate(c),t&&t.addChild(s,a),n&&(s.position=cc.v3(n.x,n.y,0)),null!=o&&o(s)):r.LoadTools._ins.loadResPrefab(e,o,t,n,a),s},e.prototype.newSprite=function(e,o,t,n,a){void 0===a&&(a=0);var c=new cc.Node;return c.name=e,null!=i.SpriteFrameDic.get(e)?(c.addComponent(cc.Sprite).spriteFrame=i.SpriteFrameDic.get(e),t&&t.addChild(c,a),n&&(c.position=cc.v3(n.x,n.y,0)),null!=o&&o(c)):(c.addComponent(cc.Sprite),r.LoadTools._ins.loadResSpriteFrame(e,c,t,n,a,o)),c},e.prototype.setSpriteFrame=function(e,o){i.SpriteFrameDic.get(o)?e.getComponent(cc.Sprite).spriteFrame=i.SpriteFrameDic.get(o):r.LoadTools._ins.loadResAny(o,cc.SpriteFrame,function(o){e.getComponent(cc.Sprite).spriteFrame=o})},e.prototype.setNodeGroupIndex=function(e,o){e.groupIndex=o;for(var t=0;t<e.children.length;t++)e.children[t].groupIndex=o},e.prototype.setBtnClickSpr=function(e,o,t){i.SpriteFrameDic.get(o)?(e.getComponent(cc.Button).normalSprite=i.SpriteFrameDic.get(o),e.getComponent(cc.Button).hoverSprite=i.SpriteFrameDic.get(o),e.getComponent(cc.Button).pressedSprite=i.SpriteFrameDic.get(t)):(r.LoadTools._ins.loadResAny(o,cc.SpriteFrame,function(o){e.getComponent(cc.Button).normalSprite=o,e.getComponent(cc.Button).hoverSprite=o}),r.LoadTools._ins.loadResAny(t,cc.SpriteFrame,function(o){e.getComponent(cc.Button).pressedSprite=o}))},e.prototype.setSpriteState=function(e,o){var t=0==o?"builtin-2d-sprite":"builtin-2d-gray-sprite";cc.loader.loadRes("materials/"+t,cc.Material,function(o,t){o?cc.error(o):e.getComponent(cc.Sprite).setMaterial(0,t)})},e.prototype.setNodeParent=function(e,o){var t=s._ins.getToNodePosForNode(e,o);e.parent=o,e.position=cc.v3(t.x,t.y)},e._instance=new e,e}(),c=function(){function e(){}return Object.defineProperty(e,"_ins",{get:function(){return this._instance},enumerable:!1,configurable:!0}),e.prototype.random=function(e,o,t){return void 0===t&&(t=!0),t?e+Math.floor(Math.random()*(o-e+1)):Math.random()*(o-e)+e},e.prototype.chooseRandom=function(e){for(var o=0,t=0;t<e.length;t++)o+=e[t];var n=this.random(0,o,!1);for(t=0;t<e.length;t++){if(n<e[t])return t;n-=e[t]}return e.length-1},e.prototype.refractionY=function(e){return Math.atan2(Math.sin(e),-Math.cos(e))},e.prototype.refractionX=function(e){return Math.atan2(-Math.sin(e),Math.cos(e))},e.prototype.aginSortArr=function(e){for(var o=0;o<e.length;o++){var t=i.random(0,e.length-1);if(t!=o){var n=e[o];e[o]=e[t],e[t]=n}}},e.prototype.sortArrForObject=function(e,o,t){void 0===t&&(t=!1),t?e.sort(function(e,t){return t[o]-e[o]}):e.sort(function(e,t){return e[o]-t[o]})},e.prototype.getDiffNumRandom=function(e,o,t){for(var n=[],r=e;r<=o;r++)n.push(r);var a=n.length-t;for(r=0;r<a;r++){var c=i.random(0,n.length-1);n.splice(c,1)}return n},e._instance=new e,e}(),s=function(){function e(){}return Object.defineProperty(e,"_ins",{get:function(){return this._instance},enumerable:!1,configurable:!0}),e.prototype.getAngleForPos=function(e,o,t){void 0===t&&(t=!1);var n;return n=t?-Math.atan2(o.x-e.x,o.y-e.y):Math.atan2(o.y-e.y,o.x-e.x),cc.misc.radiansToDegrees(n)},e.prototype.getDistance=function(e,o){return e.sub(o).mag()},e.prototype.getPosForAngleLen=function(e,o,t){void 0===t&&(t=cc.v2(0,0));var n=cc.misc.degreesToRadians(e);return cc.v3(t.x+Math.cos(n)*o,t.y+Math.sin(n)*o)},e.prototype.getToNodePosForNode=function(e,o){var t=e.parent.convertToWorldSpaceAR(e.position),n=o.convertToNodeSpaceAR(t);return cc.v2(n.x,n.y)},e.prototype.getToWorldPosAR=function(e){return e.parent.convertToWorldSpaceAR(e.position)},e.prototype.getToNodePosForWorld=function(e,o){return o.convertToNodeSpaceAR(e)},e._instance=new e,e}();cc._RF.pop()},{"../manager/PlatformManager":"PlatformManager","./LoadTools":"LoadTools"}],UIManager:[function(e,o,t){"use strict";cc._RF.push(o,"2db57i1B6xAH6TGmydefCWN","UIManager");var n,r=this&&this.__extends||(n=function(e,o){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])})(e,o)},function(e,o){function t(){this.constructor=e}n(e,o),e.prototype=null===o?Object.create(o):(t.prototype=o.prototype,new t)}),i=this&&this.__spreadArrays||function(){for(var e=0,o=0,t=arguments.length;o<t;o++)e+=arguments[o].length;var n=Array(e),r=0;for(o=0;o<t;o++)for(var i=arguments[o],a=0,c=i.length;a<c;a++,r++)n[r]=i[a];return n};Object.defineProperty(t,"__esModule",{value:!0}),t.UIManager=void 0;var a=e("../common/Tools"),c=e("../common/weiSanTools"),s=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return r(o,e),o.OpenUI=function(e,o){void 0===o&&(o=!1);for(var t,n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(l[e]&&(t=l[e]),null==t)return c.weiSan.error("\u672a\u627e\u5230\u8be5UI\u7684\u914d\u7f6e\u4fe1\u606f:"+e),null;this.UIDic.has(e)?c.weiSan.warn("\u5df2\u7ecf\u6253\u5f00\u8fc7UI:"+e):(1==o&&this.removeAllUI(),this.CreateUI.apply(this,i([t],n)))},o.CloseUI=function(e){for(var o,t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(o=this.UIDic.get(e)){this.UIDic.delete(e);var r=o.getComponent(o.config.com);r&&r.closeUI&&r.closeUI.apply(r,t)}else c.weiSan.warn("\u5df2\u7ecf\u5173\u95ed\u8fc7UI:"+e)},o.GetUI=function(e){var o=this.UIDic.get(e);return null!=o?o:(c.weiSan.log("\u6ca1\u6709\u6253\u5f00UI:"+e),null)},o.GetUIForComponent=function(e){var o=this.UIDic.get(e);return null!=o?o.getComponent(o.config.com):(c.weiSan.warn("\u6ca1\u6709\u6253\u5f00UI:"+e),null)},o.CreateUI=function(e){for(var o=this,t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(null==this.UIDic.get(e.name)){var r=cc.director.getScene().getChildByName("Canvas");a.Tools.newPrefab(e.resUrl,r,null,e.zIndex,function(n){n.config=e;var r=n.getComponent(e.com);r&&r.openUI&&(r.openUI.apply(r,t),r.uiName=e.name),o.UIDic.set(e.name,n)})}},o.removeAllUI=function(){for(var e in this.UIDic)this.CloseUI(e)},o.removeUIDic=function(){this.UIDic.clear()},o.prototype.onDestroy=function(){o.UIDic.delete(this.uiName)},o.UIDic=new Map,o}(cc.Component);t.UIManager=s;var l={OverUI:{name:"OverUI",resUrl:"OverUI",com:"OverUI",zIndex:99}};cc._RF.pop()},{"../common/Tools":"Tools","../common/weiSanTools":"weiSanTools"}],WordsModel:[function(e,o,t){"use strict";cc._RF.push(o,"2ece89cEWRIPr2lAofwJh4H","WordsModel"),Object.defineProperty(t,"__esModule",{value:!0}),t.WordsModel=void 0;var n=e("../common/Tools"),r=e("../common/weiSanTools");t.WordsModel={gameName:{CN:"\u70b9\u70df\u82b1",CHT:"\u9ede\u7159\u82b1",EN:"Light the Fireworks",KOR:"\ubd88\uaf43\ub180\uc774\ub97c\ud558\ub2e4",JP:"\u82b1\u706b\u3092\u6253\u3061\u4e0a\u3052\u308b",TH:"\u0e08\u0e38\u0e14\u0e1e\u0e25\u0e38"},overScoreInfo_0:{CN:"\u53ea\u5f970\u5206\uff0c\u5168\u7403\u72ec\u4e00\u4e2a\uff01",CHT:"\u53ea\u5f970\u5206\uff0c\u5168\u7403\u7368\u4e00\u500b\uff01",EN:"Only 0, the only one in the world!",KOR:"0\uc810\ubc16\uc5d0 \uc548 \ub3fc, \uc804 \uc138\uacc4\uc5d0\uc11c \ud558\ub098\uc57c!",JP:"0\u70b9\u3057\u304b\u53d6\u308c\u307e\u305b\u3093\u3002\u4e16\u754c\u3067\u552f\u4e00\u3067\u3059",TH:"\u0e21\u0e35\u0e40\u0e1e\u0e35\u0e22\u0e07 <NU>0 \u0e08\u0e38\u0e14\u0e2b\u0e19\u0e36\u0e48\u0e07\u0e43\u0e19\u0e42\u0e25\u0e01"},overScoreInfo_1:{CN:"\u51fb\u8d25\u4e86\u5168\u7403",CHT:"\u64ca\u6557\u4e86\u5168\u7403",EN:"Handy: beat the world ",KOR:"\uaca9\ud30c",JP:"\u6253\u3061\u8ca0\u304b\u3059",TH:"\u0e17\u0e33\u0e43\u0e2b\u0e49\u0e1e\u0e48\u0e32\u0e22\u0e41\u0e1e\u0e49"},overScoreInfo_2:{CN:"\u7684\u73a9\u5bb6\uff01",CHT:"\u7684\u73a9\u5bb6\uff01",EN:" of the players!",KOR:"\uc720\uc800!",JP:"\u306e\u30d7\u30ec\u30a4\u30e4\u30fc\uff01",TH:"\u0e1c\u0e39\u0e49\u0e40\u0e25\u0e48\u0e19\u0e02\u0e2d\u0e07"},overTitle_1:{CN:"\u6211\u771f\u662f\u592a\u5389\u5bb3\u4e86\uff0c\u6211\u5728",CHT:"\u6211\u771f\u662f\u592a\u53b2\u5bb3\u4e86\uff0c\u6211\u5728",EN:"I'm really great.  I'm in "},overTitle_2:{CN:"\u4e2d,",CHT:"\u4e2d,",EN:". "},getStrForLanguage:function(e,o){if(o=o||n.Tools.getLanguageType(),this[e])return this[e][o]?this[e][o]:this[e].EN;r.weiSan.log("\u6ca1\u6709\u7ffb\u8bd1:"+e)}},cc._RF.pop()},{"../common/Tools":"Tools","../common/weiSanTools":"weiSanTools"}],weiSanTools:[function(e,o,t){"use strict";cc._RF.push(o,"ff39aoXMlBNuoJpIycuGqrL","weiSanTools");var n=this&&this.__spreadArrays||function(){for(var e=0,o=0,t=arguments.length;o<t;o++)e+=arguments[o].length;var n=Array(e),r=0;for(o=0;o<t;o++)for(var i=arguments[o],a=0,c=i.length;a<c;a++,r++)n[r]=i[a];return n};Object.defineProperty(t,"__esModule",{value:!0}),t.weiSan=void 0;var r=function(){function e(){}return e.log=function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];this.isLog&&console.log.apply(console,n([this.logName],e))},e.logTrace=function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];this.isLog&&console.trace.apply(console,n([this.logName],e))},e.error=function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];this.isLog&&console.error.apply(console,n([this.logName],e))},e.warn=function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];this.isLog&&console.warn.apply(console,n([this.logName],e))},e.initLog=function(){console.log(this.logInfo)},e.isLog=!0,e.logName="\u5fae\u4f1e\u6e38\u620fLog:",e.logInfo="\u672c\u6e38\u620f\u5305\u542b\u7684\u6240\u6709\u5185\u5bb9\uff08\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\uff1a\u4ee3\u7801\u3001\u56fe\u7247\u3001\u89c6\u50cf\u53ca\u58f0\u97f3\u5185\u5bb9\u3001\u540d\u79f0\uff09\u7684\u6240\u6709\u6743\u5f52\u5317\u4eac\u7c73\u515c\u79d1\u6280\u6709\u9650\u516c\u53f8\u6240\u6709\u3002\u4efb\u4f55\u5355\u4f4d\u6216\u4e2a\u4eba\u5c06\u672c\u6e38\u620f\u63d0\u4f9b\u7684\u5185\u5bb9\u4e0e\u670d\u52a1\u7528\u4e8e\u5546\u4e1a\u3001\u76c8\u5229\u3001\u5e7f\u544a\u6027\u7b49\u76ee\u7684\u65f6\uff0c\u9700\u5f81\u5f97\u5317\u4eac\u7c73\u515c\u79d1\u6280\u6709\u9650\u516c\u53f8\u76f8\u5173\u6743\u5229\u4eba\u7684\u4e66\u9762\u8bb8\u53ef\uff1b\u5c06\u672c\u7f51\u7ad9\u63d0\u4f9b\u7684\u5185\u5bb9\u4e0e\u670d\u52a1\u7528\u4e8e\u975e\u5546\u4e1a\u7528\u9014\u65f6\uff0c\u5e94\u9075\u5b88\u8457\u4f5c\u6743\u6cd5\u4ee5\u53ca\u5176\u4ed6\u76f8\u5173\u6cd5\u5f8b\u7684\u89c4\u5b9a\uff0c\u4e0d\u5f97\u4fb5\u72af\u6e38\u620f\u6240\u6709\u8005\u53ca\u76f8\u5173\u6743\u5229\u4eba\u7684\u6743\u76ca\u3002",e}();t.weiSan=r,cc._RF.pop()},{}]},{},["AdManager","AdManager_H5","ActionTools","AudioTools","LoadTools","Tools","weiSanTools","GameCtrl","InitGame","MainGame","Level","ActionControl","CheckpointSp","CreateControl","FireworkSp","GameMainSp","HronSp","InterfaceSp","StorageInformation","ResArr","EventManager","NetworkManager","PlatformManager","PoolManager","UIManager","GameModel","OtherModel","WordsModel","OverUI"]);